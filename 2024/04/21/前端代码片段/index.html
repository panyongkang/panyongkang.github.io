<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>前端代码片段 | 向阳榆木</title><meta name="description" content="前端代码片段"><meta name="keywords" content="笔记整理,代码片段,前端技术"><meta name="author" content="PanXiaoKang"><meta name="copyright" content="PanXiaoKang"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/Lotus.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="wyZknSW2XMDLHhrSvtifCN1aQwr2nn53ydI_lDzVJmI"/><meta name="baidu-site-verification" content="p1OeTLcEA8"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="前端代码片段"><meta name="twitter:description" content="前端代码片段"><meta name="twitter:image" content="http://example.com/img/butterfly.jpg"><meta property="og:type" content="article"><meta property="og:title" content="前端代码片段"><meta property="og:url" content="http://example.com/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"><meta property="og:site_name" content="向阳榆木"><meta property="og:description" content="前端代码片段"><meta property="og:image" content="http://example.com/img/butterfly.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://example.com/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"><link rel="prev" title="CSS学习笔记" href="http://example.com/2024/04/27/CSS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="next" title="TypeScript入门整理" href="http://example.com/2024/04/20/TypeScript%E5%85%A5%E9%97%A8%E6%95%B4%E7%90%86/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"最近有点失眠了,每天被自己帅醒,帅早已成为负担,除了帅一无所有,富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善","fontSize":"20px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'true',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://s1.ax1x.com/2020/06/09/t40ARx.th.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">97</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">211</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fa fa-random"></i><span> 随机文章</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-large" aria-hidden="true"></i><span> 归档</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tagsnet/"><i class="fa-fw fa fa-connectdevelop"></i><span> 关系网</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-send-o" aria-hidden="true"></i><span> 导航栏</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://xyyum.icu/mypages/OnlyI.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 主页导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/xkzhdh/Integrated.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-paper-plane-o"></i><span> 综合导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/software/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 软件分享</span></a></li><li><a class="site-page" href="/sunshineBookshelf/"><i class="fa-fw fa fa-university"></i><span> 向阳书架</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page" href="/bilibili/"><i class="fa-fw fa fa-play-circle"></i><span> 番剧</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fa fa-play-circle-o"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-link" aria-hidden="true"></i><span> 友情链接</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page" href="https://yumuxy.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 桑榆未晚</span></a></li><li><a class="site-page" href="https://lllzxqq.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 偏偏💖雨季</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-user-circle-o" aria-hidden="true"></i><span> 关于我</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="http://www.xbmu.edu.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-graduation-cap"></i><span> 母校</span></a></li><li><a class="site-page" href="/workshop/"><i class="fa-fw fa fa-heartbeat"></i><span> 作品</span></a></li><li><a class="site-page" href="/mybook/"><i class="fa-fw fa fa-book"></i><span> 自传</span></a></li><li><a class="site-page" href="/anires/"><i class="fa-fw fa fa-list-alt"></i><span> 简历</span></a></li><li><a class="site-page" href="/vcard/"><i class="fa-fw fa fa-vcard-o"></i><span> 名片</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gamepad" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://playground.z.wiki/typing-game/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> 打字游戏</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/GreedySnake/GreedySnake.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-lastfm"></i><span> 贪吃蛇</span></a></li><li><a class="site-page" href="/petalage/"><i class="fa-fw fa fa-gamepad"></i><span> 表白时刻</span></a></li><li><a class="site-page" href="/yszq/"><i class="fa-fw fa fa-gamepad"></i><span> 3D元素</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gear (alias)" aria-hidden="true"></i><span> 工具平台</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/xkdm/"><i class="fa-fw fa fa-star"></i><span> 星空弹幕</span></a></li><li><a class="site-page" href="https://xyym.avosapps.us/" target="_blank" rel="noopener"><i class="fa-fw fa fa-commenting-o"></i><span> 评论管理</span></a></li><li><a class="site-page" href="https://myhkw.cn/admin/user/login/" target="_blank" rel="noopener"><i class="fa-fw fa fa-music"></i><span> 音乐后台</span></a></li><li><a class="site-page" href="https://www.superbed.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-area-chart"></i><span> 聚合图床</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 纪念空间</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/3d-gallery/"><i class="fa-fw fa fa-university"></i><span> 3D相册屋</span></a></li><li><a class="site-page" href="/live-photo/"><i class="fa-fw fa fa-photo"></i><span> 青春校园</span></a></li><li><a class="site-page" href="/photo-wall/"><i class="fa-fw fa fa-th"></i><span> 生活照片</span></a></li><li><a class="site-page" href="/video-wall/"><i class="fa-fw fa fa-video-camera"></i><span> 在线视频</span></a></li><li><a class="site-page" href="/mtxx/"><i class="fa-fw fa fa-file-photo-o"></i><span> 美图秀秀</span></a></li><li><a class="site-page" href="/timeStoryline/"><i class="fa-fw fa fa-file-video-o"></i><span> 时间故事线</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据分组"><span class="toc-number">1.</span> <span class="toc-text">数据分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在原型上添加下拉选项选择弹窗"><span class="toc-number">2.</span> <span class="toc-text">在原型上添加下拉选项选择弹窗</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在原型上添加全局方法控制域后事件"><span class="toc-number">3.</span> <span class="toc-text">在原型上添加全局方法控制域后事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#合并表格列"><span class="toc-number">4.</span> <span class="toc-text">合并表格列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组排序"><span class="toc-number">5.</span> <span class="toc-text">数组排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#写入JsonArray对象字符串"><span class="toc-number">6.</span> <span class="toc-text">写入JsonArray对象字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON字符串的处理和排序"><span class="toc-number">7.</span> <span class="toc-text">JSON字符串的处理和排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环的使用"><span class="toc-number">8.</span> <span class="toc-text">循环的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#根据条件筛选获取到的信息，然后再进行模糊查询"><span class="toc-number">9.</span> <span class="toc-text">根据条件筛选获取到的信息，然后再进行模糊查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#去重处理"><span class="toc-number">10.</span> <span class="toc-text">去重处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#转码处理"><span class="toc-number">11.</span> <span class="toc-text">转码处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关于正则表达式"><span class="toc-number">12.</span> <span class="toc-text">关于正则表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#初始化加载表格详情画面"><span class="toc-number">13.</span> <span class="toc-text">初始化加载表格详情画面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特效案例Demo"><span class="toc-number">14.</span> <span class="toc-text">特效案例Demo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#广告栏跑马灯效果"><span class="toc-number">14.1.</span> <span class="toc-text">广告栏跑马灯效果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例代码"><span class="toc-number">14.1.1.</span> <span class="toc-text">案例代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#瀑布流视频墙"><span class="toc-number">14.2.</span> <span class="toc-text">瀑布流视频墙</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例代码-1"><span class="toc-number">14.2.1.</span> <span class="toc-text">案例代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TimeStoryLine-时间故事线"><span class="toc-number">14.3.</span> <span class="toc-text">TimeStoryLine|时间故事线</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例代码-2"><span class="toc-number">14.3.1.</span> <span class="toc-text">案例代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#音乐心电图"><span class="toc-number">14.4.</span> <span class="toc-text">音乐心电图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例图片效果"><span class="toc-number">14.4.1.</span> <span class="toc-text">案例图片效果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#案例代码-3"><span class="toc-number">14.4.2.</span> <span class="toc-text">案例代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#满屏气球特效"><span class="toc-number">14.5.</span> <span class="toc-text">满屏气球特效</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例图片效果-1"><span class="toc-number">14.5.1.</span> <span class="toc-text">案例图片效果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#案例代码-4"><span class="toc-number">14.5.2.</span> <span class="toc-text">案例代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实现自由拖拽效果"><span class="toc-number">14.6.</span> <span class="toc-text">实现自由拖拽效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#鼠标跟随效果"><span class="toc-number">14.7.</span> <span class="toc-text">鼠标跟随效果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例一：简单垂直下挂效果"><span class="toc-number">14.7.1.</span> <span class="toc-text">案例一：简单垂直下挂效果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#案例二：支持多张图片下挂"><span class="toc-number">14.7.2.</span> <span class="toc-text">案例二：支持多张图片下挂</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#案例三：神龙摆尾效果"><span class="toc-number">14.7.3.</span> <span class="toc-text">案例三：神龙摆尾效果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#悬浮划词搜索效果"><span class="toc-number">14.8.</span> <span class="toc-text">悬浮划词搜索效果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例一：简陋版"><span class="toc-number">14.8.1.</span> <span class="toc-text">案例一：简陋版</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#边框动画效果"><span class="toc-number">14.9.</span> <span class="toc-text">边框动画效果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#样例一：小球移动效果"><span class="toc-number">14.9.1.</span> <span class="toc-text">样例一：小球移动效果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#样例二：贪吃蛇基础效果"><span class="toc-number">14.9.2.</span> <span class="toc-text">样例二：贪吃蛇基础效果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#样例三：火车车厢基础效果"><span class="toc-number">14.9.3.</span> <span class="toc-text">样例三：火车车厢基础效果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调用后端服务简单例子"><span class="toc-number">15.</span> <span class="toc-text">调用后端服务简单例子</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/butterfly.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">向阳榆木</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fa fa-random"></i><span> 随机文章</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-large" aria-hidden="true"></i><span> 归档</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tagsnet/"><i class="fa-fw fa fa-connectdevelop"></i><span> 关系网</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-send-o" aria-hidden="true"></i><span> 导航栏</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://xyyum.icu/mypages/OnlyI.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 主页导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/xkzhdh/Integrated.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-paper-plane-o"></i><span> 综合导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/software/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 软件分享</span></a></li><li><a class="site-page" href="/sunshineBookshelf/"><i class="fa-fw fa fa-university"></i><span> 向阳书架</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page" href="/bilibili/"><i class="fa-fw fa fa-play-circle"></i><span> 番剧</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fa fa-play-circle-o"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-link" aria-hidden="true"></i><span> 友情链接</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page" href="https://yumuxy.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 桑榆未晚</span></a></li><li><a class="site-page" href="https://lllzxqq.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 偏偏💖雨季</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-user-circle-o" aria-hidden="true"></i><span> 关于我</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="http://www.xbmu.edu.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-graduation-cap"></i><span> 母校</span></a></li><li><a class="site-page" href="/workshop/"><i class="fa-fw fa fa-heartbeat"></i><span> 作品</span></a></li><li><a class="site-page" href="/mybook/"><i class="fa-fw fa fa-book"></i><span> 自传</span></a></li><li><a class="site-page" href="/anires/"><i class="fa-fw fa fa-list-alt"></i><span> 简历</span></a></li><li><a class="site-page" href="/vcard/"><i class="fa-fw fa fa-vcard-o"></i><span> 名片</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gamepad" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://playground.z.wiki/typing-game/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> 打字游戏</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/GreedySnake/GreedySnake.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-lastfm"></i><span> 贪吃蛇</span></a></li><li><a class="site-page" href="/petalage/"><i class="fa-fw fa fa-gamepad"></i><span> 表白时刻</span></a></li><li><a class="site-page" href="/yszq/"><i class="fa-fw fa fa-gamepad"></i><span> 3D元素</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gear (alias)" aria-hidden="true"></i><span> 工具平台</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/xkdm/"><i class="fa-fw fa fa-star"></i><span> 星空弹幕</span></a></li><li><a class="site-page" href="https://xyym.avosapps.us/" target="_blank" rel="noopener"><i class="fa-fw fa fa-commenting-o"></i><span> 评论管理</span></a></li><li><a class="site-page" href="https://myhkw.cn/admin/user/login/" target="_blank" rel="noopener"><i class="fa-fw fa fa-music"></i><span> 音乐后台</span></a></li><li><a class="site-page" href="https://www.superbed.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-area-chart"></i><span> 聚合图床</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 纪念空间</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/3d-gallery/"><i class="fa-fw fa fa-university"></i><span> 3D相册屋</span></a></li><li><a class="site-page" href="/live-photo/"><i class="fa-fw fa fa-photo"></i><span> 青春校园</span></a></li><li><a class="site-page" href="/photo-wall/"><i class="fa-fw fa fa-th"></i><span> 生活照片</span></a></li><li><a class="site-page" href="/video-wall/"><i class="fa-fw fa fa-video-camera"></i><span> 在线视频</span></a></li><li><a class="site-page" href="/mtxx/"><i class="fa-fw fa fa-file-photo-o"></i><span> 美图秀秀</span></a></li><li><a class="site-page" href="/timeStoryline/"><i class="fa-fw fa fa-file-video-o"></i><span> 时间故事线</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">前端代码片段</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2024-04-21 16:21:22"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2024-04-21</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2025-04-12 22:38:39"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2025-04-12</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><p>整理记录一些平时工作实践的前端代码片段以及本人写的效果小案例，方便提供思路和快速预览，分享给对知识充满渴望的有缘人！</p>
<hr>
<h2 id="数据分组"><a href="#数据分组" class="headerlink" title="数据分组"></a>数据分组</h2><p>学习封装一个通用分组函数，对公共功能的提取有更多的理解与思考。</p>
<p>代码示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = [</span><br><span class="line">	&#123;<span class="attr">name</span>: <span class="string">'小莉'</span>, <span class="attr">age</span>: <span class="number">30</span>, <span class="attr">sex</span>: <span class="string">'女'</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">name</span>: <span class="string">'小马'</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">sex</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">name</span>: <span class="string">'小吴'</span>, <span class="attr">age</span>: <span class="number">30</span>, <span class="attr">sex</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">name</span>: <span class="string">'小刘'</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">sex</span>: <span class="string">'女'</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">name</span>: <span class="string">'小芯'</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">sex</span>: <span class="string">'女'</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">name</span>: <span class="string">'小王'</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">sex</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">name</span>: <span class="string">'小白'</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="string">'女'</span>&#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment">// 按年龄分组</span></span><br><span class="line"><span class="keyword">const</span> result = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> people)&#123;</span><br><span class="line">	<span class="keyword">const</span> key = item.age;</span><br><span class="line">	<span class="keyword">if</span>(!result[key])&#123;</span><br><span class="line">		result[key]=[];</span><br><span class="line">	&#125;</span><br><span class="line">	result[key].push(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按性别分组</span></span><br><span class="line"><span class="keyword">const</span> result = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> people)&#123;</span><br><span class="line">	<span class="keyword">const</span> key = item.sex;</span><br><span class="line">	<span class="keyword">if</span>(!result[key])&#123;</span><br><span class="line">		result[key]=[];</span><br><span class="line">	&#125;</span><br><span class="line">	result[key].push(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"></span><br><span class="line"><span class="comment">// (1)传入属性名，封装成分组函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">groupBy</span>(<span class="params">arr,propName</span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> result = &#123;&#125;;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">	<span class="keyword">const</span> key = item[propName];</span><br><span class="line">	<span class="keyword">if</span>(!result[key])&#123;</span><br><span class="line">		result[key]=[];</span><br><span class="line">	&#125;</span><br><span class="line">	result[key].push(item);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,<span class="string">'age'</span>))</span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,<span class="string">'sex'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (2)传入函数（得到key的过程），封装公共函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">groupBy</span>(<span class="params">arr,generateKey</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">const</span> result = &#123;&#125;;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">	<span class="keyword">const</span> key = generateKey(item);</span><br><span class="line">	<span class="keyword">if</span>(!result[key])&#123;</span><br><span class="line">		result[key]=[];</span><br><span class="line">	&#125;</span><br><span class="line">	result[key].push(item);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 按年龄分组</span></span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,(item)=&gt;item.age))</span><br><span class="line"><span class="comment">// 按性别分组</span></span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,(item)=&gt;item.sex))</span><br><span class="line"><span class="comment">// 按年龄-性别分组</span></span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,(item)=&gt;<span class="string">`<span class="subst">$&#123;item.age&#125;</span>-<span class="subst">$&#123;item.sex&#125;</span>`</span>))</span><br><span class="line"><span class="comment">// 按奇偶数进行分组</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">34</span>,<span class="number">6</span>,<span class="number">323</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">0</span>]</span><br><span class="line"><span class="built_in">console</span>.log(groupBy(arr,(item)=&gt;(item % <span class="number">2</span> ===<span class="number">0</span>?<span class="string">'偶'</span>:<span class="string">'奇'</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (3)参数归一化：既能通过属性，也能通过函数传参调用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">groupBy</span>(<span class="params">arr,generateKey</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">typeof</span> generateKey === <span class="string">'string'</span>)&#123;</span><br><span class="line">		<span class="keyword">const</span> propName = generateKey;</span><br><span class="line">		generateKey = <span class="function">(<span class="params">item</span>) =&gt;</span> item[propName];<span class="comment">// 统一将属性处理成函数进行执行</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">const</span> result = &#123;&#125;;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">	<span class="keyword">const</span> key = generateKey(item);</span><br><span class="line">	<span class="keyword">if</span>(!result[key])&#123;</span><br><span class="line">		result[key]=[];</span><br><span class="line">	&#125;</span><br><span class="line">	result[key].push(item);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 通过属性调用</span></span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,<span class="string">'age'</span>))</span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,<span class="string">'sex'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过函数调用</span></span><br><span class="line"><span class="comment">// 按年龄分组</span></span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,(item)=&gt;item.age))</span><br><span class="line"><span class="comment">// 按性别分组</span></span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,(item)=&gt;item.sex))</span><br><span class="line"><span class="comment">// 按年龄-性别分组</span></span><br><span class="line"><span class="built_in">console</span>.log(groupBy(people,(item)=&gt;<span class="string">`<span class="subst">$&#123;item.age&#125;</span>-<span class="subst">$&#123;item.sex&#125;</span>`</span>))</span><br><span class="line"><span class="comment">// 按奇偶数进行分组</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">34</span>,<span class="number">6</span>,<span class="number">323</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">0</span>]</span><br><span class="line"><span class="built_in">console</span>.log(groupBy(arr,(item)=&gt;(item % <span class="number">2</span> ===<span class="number">0</span>?<span class="string">'偶'</span>:<span class="string">'奇'</span>)))</span><br></pre></td></tr></table></figure>

<h2 id="在原型上添加下拉选项选择弹窗"><a href="#在原型上添加下拉选项选择弹窗" class="headerlink" title="在原型上添加下拉选项选择弹窗"></a>在原型上添加下拉选项选择弹窗</h2><p>通过在原型上定义一个全局方法使其在每个 Vue 的实例中可用，代码示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desoription </span>下拉选项选择弹窗</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>comboName 选项项目标题</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>comboHint 提示语placeholder</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>comboOptions 选项</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>comboValue 初始值initialKey</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>retType 返回类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="variable">string</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Vue.prototype.pushcomboInputDialog = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">comboName, comboHint, combo0ptions, comboValue, retType</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(retType === <span class="string">'RETURN_SUFFIX_OTHER'</span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> &#123;outstr&#125; = (<span class="keyword">await</span> <span class="keyword">this</span>.$syncOpenTrade (</span><br><span class="line">	<span class="string">'@FM/components/ComboInput/ComboInput.vue'</span>,</span><br><span class="line">	comboName,</span><br><span class="line">	<span class="string">'window",</span></span><br><span class="line"><span class="string">	&#123; comboName, comboHint, combo0ptions,comboValue, retType &#125;,</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">	 customstyle:&#123; width:'</span><span class="number">500</span>px<span class="string">',height:'</span><span class="number">265</span>px<span class="string">',top:'</span><span class="number">15</span>%<span class="string">'&#125;,</span></span><br><span class="line"><span class="string">	 bodyStyle:&#123; padding:'</span><span class="number">18</span>px <span class="number">24</span>px<span class="string">'&#125;,</span></span><br><span class="line"><span class="string">	 customclass:'</span>local-auth<span class="string">',</span></span><br><span class="line"><span class="string">	 isModal: false,</span></span><br><span class="line"><span class="string">	 isFocus: true,</span></span><br><span class="line"><span class="string">	 showClose: false,</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	)) || &#123; outstr: '</span><span class="string">' &#125;</span></span><br><span class="line"><span class="string">	return outstr</span></span><br><span class="line"><span class="string">&#125; else &#123;</span></span><br><span class="line"><span class="string">   const &#123;outstr&#125; = (await this.$openPanel (</span></span><br><span class="line"><span class="string">	'</span>@FM/components/ComboInput/ComboInput.vue<span class="string">',</span></span><br><span class="line"><span class="string">	comboName,</span></span><br><span class="line"><span class="string">	'</span><span class="built_in">window</span><span class="string">",</span></span><br><span class="line"><span class="string">	&#123; comboName, comboHint, combo0ptions,comboValue, retType &#125;,</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">	 customstyle:&#123; width:'450px',height:'225px',top:'15%'&#125;,</span></span><br><span class="line"><span class="string">	 bodyStyle:&#123; padding:'10px 24px'&#125;,</span></span><br><span class="line"><span class="string">	 customclass:'local-auth',</span></span><br><span class="line"><span class="string">	 isModal: false,</span></span><br><span class="line"><span class="string">	 isFocus: true,</span></span><br><span class="line"><span class="string">	 showClose: false,</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	)) || &#123; outstr: '' &#125;</span></span><br><span class="line"><span class="string">	return outstr</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="在原型上添加全局方法控制域后事件"><a href="#在原型上添加全局方法控制域后事件" class="headerlink" title="在原型上添加全局方法控制域后事件"></a>在原型上添加全局方法控制域后事件</h2><p>在平台工程Plugins.js文件中新增一个定制化的全局方法，方便对Vue组件栏位进行控制。代码示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@desoription </span>设置组件控件栏位是否向上触发blur域后事件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Vue.prototype.setBackTrigger = <span class="function"><span class="keyword">function</span> (<span class="params">refs, vals, allTypeFlag</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="comment">// 判断refs类型</span></span><br><span class="line">		<span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(refs) &amp;&amp; <span class="keyword">typeof</span> refs !== <span class="string">'string'</span> &amp;&amp; <span class="keyword">typeof</span> refs !== <span class="string">'object'</span>) &#123;</span><br><span class="line">			logger.error(<span class="string">'[setBackTrigger]入参refs应为string类型、vue示例或者他们组成的数组'</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 判断vals类型</span></span><br><span class="line">		<span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(vals) &amp;&amp; <span class="keyword">typeof</span> refs !== <span class="string">'boolean'</span> ) &#123;</span><br><span class="line">			logger.error(<span class="string">'[setBackTrigger]入参vals应为boolean类型或者boolean类型数组'</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 判断refs和vals都为数组时，二者长度需要一致</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(refs) &amp;&amp; <span class="built_in">Array</span>.isArray(vals)&amp;&amp; refs.length !==vals.length ) &#123;</span><br><span class="line">			logger.error(<span class="string">'[setBackTrigger]入参refs和vals为数组类型时，二者长度需要一致'</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(refs)) &#123;</span><br><span class="line">			<span class="comment">// 如果是数组，则递归调用</span></span><br><span class="line">			<span class="keyword">for</span> ( <span class="keyword">const</span> i <span class="keyword">in</span> refs) &#123;</span><br><span class="line">				<span class="keyword">this</span>.setBackTrigger(refs[i], <span class="keyword">typeof</span> vals === <span class="string">'boolean'</span> ? vals : vals[i], allTypeFlag)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// 如果不是数组，则执行refs为单个参数时的逻辑</span></span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">typeof</span> refs === <span class="string">'string'</span> ) refs = <span class="keyword">this</span>.$refs[refs]</span><br><span class="line">			<span class="keyword">if</span> (refs &amp;&amp; <span class="keyword">typeof</span> refs.backTrigger === <span class="string">'boolean'</span> &amp;&amp; <span class="built_in">Object</span>.prototype.hasOwnProperty.call(refs,<span class="string">'getRequisite'</span>)) &#123;</span><br><span class="line">				<span class="comment">// 如果是单个控件 且必填</span></span><br><span class="line">				<span class="keyword">if</span> (refs.getRequisite() || allTypeFlag) refs.backTrigger = vals</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (refs &amp;&amp; refs.$children &amp;&amp; refs.$children.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			 	<span class="comment">// 如果是group或组件等，则递归调用（ len 左置，防止数组长度变化出现的异常情况）</span></span><br><span class="line">			 	<span class="keyword">for</span> ( <span class="keyword">let</span> i = <span class="number">0</span>,len = refs.$children.length; i &lt; len; i++) &#123;</span><br><span class="line">			 	 	<span class="keyword">this</span>.setBackTrigger(refs.$children[i], vals, allTypeFlag)</span><br><span class="line">			 	 &#125;</span><br><span class="line">			  &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">	 logger.error(<span class="string">'[setBackTrigger]执行异常'</span>, e)</span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="合并表格列"><a href="#合并表格列" class="headerlink" title="合并表格列"></a>合并表格列</h2><p> 有些需求是针对表格中相同行数据的某些列进行合并展示，根据表格中可绑定的objectSpanMethod函数进行处理，仅用于参考：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 合并行或列的函数</span></span><br><span class="line">objectSpanMethod(&#123;row,column,rowIndex,columnIndex&#125;)&#123;</span><br><span class="line"><span class="comment">// 合并第二，六列（币种+合计金额）</span></span><br><span class="line"><span class="keyword">if</span>(columnIndex === <span class="number">1</span> || columnIndex === <span class="number">6</span>)&#123;</span><br><span class="line">		<span class="keyword">const</span> _row = <span class="keyword">this</span>.mergeCells(<span class="keyword">this</span>.tableData).one[rowIndex]</span><br><span class="line">		<span class="keyword">const</span> _col = _row &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span></span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">		rowspan: _row, <span class="comment">// 要合并的行数</span></span><br><span class="line">		rowspan: _col, <span class="comment">// 要合并的列数</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 合并列</span></span><br><span class="line">mergeCells(arr)&#123;</span><br><span class="line">	<span class="keyword">const</span> spanOneArr = []</span><br><span class="line">	<span class="keyword">let</span> concatOne = <span class="number">0</span></span><br><span class="line">	arr.forEach(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">// 第一行占一个单元格</span></span><br><span class="line">	<span class="keyword">if</span>(index === <span class="number">0</span>)&#123;</span><br><span class="line">		spanOneArr.push(<span class="number">1</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// 如果下一行的值跟上个行的值相同，占用的单元格+1，下行则占0，如果值不同则占1格</span></span><br><span class="line">		<span class="keyword">if</span>(item[<span class="keyword">this</span>.tableHeadData[<span class="number">1</span>].prop] === arr[index <span class="number">-1</span>][<span class="keyword">this</span>.tableHeadData[<span class="number">1</span>].prop])&#123;</span><br><span class="line">		spanOneArr[] += <span class="number">1</span></span><br><span class="line">		spanOneArr.push(<span class="number">0</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		spanOneArr.push(<span class="number">1</span>)</span><br><span class="line">		concatOne = index</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	one:spanOneArr,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组排序"><a href="#数组排序" class="headerlink" title="数组排序"></a>数组排序</h2><p>根据获取的数组内容不同，若明确其中的某个字符串是有规律的，我们可以通过截取其中的字符串进行处理排序问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line"> <span class="string">"图像001-00005-fr_清单人工通过"</span>, </span><br><span class="line"> <span class="string">"图像001-00003-fr_清单人工通过"</span>,</span><br><span class="line"> <span class="string">"图像001-00004-fr_清单人工通过"</span></span><br><span class="line"> ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 sort 方法对数组进行排序</span></span><br><span class="line">data.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 将字符串转换为数字</span></span><br><span class="line">  <span class="keyword">const</span> num1 = <span class="built_in">parseInt</span>(a.split(<span class="string">"-"</span>)[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">const</span> num2 = <span class="built_in">parseInt</span>(b.split(<span class="string">"-"</span>)[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 从小到大排序</span></span><br><span class="line">  <span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(data); <span class="comment">// ["图像001-00003-fr_清单人工通过", "图像001-00004-fr_清单人工通过", "图像001-00005-fr_清单人工通过"]</span></span><br></pre></td></tr></table></figure>

<p>还可以通过正则表达式判断是否转为数字，数字的放在一起排序，非纯数字的放一起进行字母和数字比较排序：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line"> <span class="string">"图像001-00005-fr_清单人工通过"</span>,</span><br><span class="line"> <span class="string">"图像001-000b3-fr_清单人工通过"</span>,</span><br><span class="line"> <span class="string">"图像001-00003-fr_清单人工通过"</span>, </span><br><span class="line"> <span class="string">"图像001-00004-fr_清单人工通过"</span>,</span><br><span class="line"> <span class="string">"图像001-000a6-fr_自动通过"</span>,</span><br><span class="line"> <span class="string">"图像001-000b6-fr_自动通过"</span>,</span><br><span class="line"> <span class="string">"图像001-02c56-fr_通过"</span>,</span><br><span class="line"> ];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = data.filter(<span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> match = str.match(<span class="regexp">/^\d+$/</span>);</span><br><span class="line">  <span class="keyword">return</span> match;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nonNumbers = data.filter(<span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> match = str.match(<span class="regexp">/^\d+$/</span>);</span><br><span class="line">  <span class="keyword">return</span> !match;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">numbers.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(a, <span class="number">10</span>) - <span class="built_in">parseInt</span>(b, <span class="number">10</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">nonNumbers.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a.localeCompare(b);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sortedData = [...numbers, ...nonNumbers];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'输出--'</span>,sortedData);</span><br></pre></td></tr></table></figure>

<p>代码解释：<br>这段代码首先使用 filter() 方法将数据分为两组：数字和非纯数字。<br>数字组使用正则表达式 &#x2F;^\d+$&#x2F; 匹配。该正则表达式匹配一个或多个数字。<br>非纯数字组使用正则表达式的反向匹配 !match。<br>然后，代码使用 sort() 方法对数字组进行排序。sort() 方法接受一个比较函数作为参数。比较函数使用减法运算符 (-) 比较两个数字的大小。<br>最后，代码使用 sort() 方法对非纯数字组进行排序。sort() 方法使用 localeCompare() 方法比较两个字符串的大小。localeCompare() 方法考虑了语言环境和区域设置。</p>
<h2 id="写入JsonArray对象字符串"><a href="#写入JsonArray对象字符串" class="headerlink" title="写入JsonArray对象字符串"></a>写入JsonArray对象字符串</h2><p>有些时候需要给后端写入的文件，里面的某个映射字段必须要指定的JsonArray对象字符串，各元素为JsonObject对象，这时候可通过如下代码进行处理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> yyrzdjb = &#123;</span><br><span class="line">	ywlsh:<span class="keyword">this</span>.ywlsh,<span class="comment">// 业务流水号</span></span><br><span class="line">	pzzl:<span class="keyword">this</span>.taskData.pzzl,<span class="comment">// 凭证种类</span></span><br><span class="line">	pzxh:<span class="keyword">this</span>.taskData.pzxh,<span class="comment">// 凭证序号</span></span><br><span class="line">	clyj:<span class="keyword">this</span>.CLYJ, <span class="comment">//处理意见</span></span><br><span class="line">	verificationInfo:[],<span class="comment">// 验印详细信息</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> key <span class="keyword">in</span> <span class="keyword">this</span>.verificationInfo)&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">Object</span>.hasOwnProperty.call(<span class="keyword">this</span>.verificationInfo,key))&#123;</span><br><span class="line">		yyrzdjb.verificationInfo.push(<span class="keyword">this</span>.verificationInfo[key])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 写入文件数据</span></span><br><span class="line"><span class="keyword">let</span> sealVerificationInfoTmp =&#123;</span><br><span class="line">	yyjgxx,</span><br><span class="line">	yyrzdjb,</span><br><span class="line">&#125;</span><br><span class="line">sealVerificationInfoTmp = <span class="built_in">JSON</span>.stringify(sealVerificationInfoTmp )</span><br><span class="line"><span class="keyword">let</span> savePath = <span class="keyword">await</span> PlupinUtils.getProTemFilePath(<span class="keyword">this</span>) <span class="comment">// 调用封装好的公函获取临时文件的地址</span></span><br><span class="line"><span class="keyword">if</span>(savePath.isSucces)&#123;</span><br><span class="line">	savePath = savaPath.data+ <span class="string">'\\SealTaskAccredit\\'</span>+<span class="keyword">this</span>.taskData.ywlsh+<span class="string">'sealVerificationInfo'</span> <span class="comment">// 拼接目录文件名</span></span><br><span class="line">	<span class="keyword">const</span> res = <span class="keyword">await</span> File.writeClientFile(savaPath,sealVerificationInfoTmp,<span class="string">'false'</span>,<span class="string">'utf-8'</span>) <span class="comment">// 调用封装好的公函转成文件</span></span><br><span class="line">	<span class="keyword">if</span>(res.reuslt === <span class="string">'true'</span>)&#123;</span><br><span class="line">		<span class="keyword">await</span> <span class="keyword">this</span>.pushInfo(<span class="string">'写入文件成功！'</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">await</span> <span class="keyword">this</span>.pushInfo(<span class="string">'写入文件失败！'</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码解释：</p>
<blockquote>
<ul>
<li>for(const key in this.verificationInfo)：这行代码开始了一个 for…in 循环。for…in 循环用于遍历对象的可枚举属性。在这里，key 是一个变量，用于存储每次迭代中对象的属性名。</li>
<li>Object.hasOwnProperty.call(this.verificationInfo, key)：这一行通过 Object 对象的 hasOwnProperty 方法来检查当前迭代的属性是否为对象自身的属性，而不是继承来的属性。这么做是为了确保只遍历对象自身的属性，而不包括从原型链继承的属性。call() 方法的作用是调用 hasOwnProperty 方法，并将当前对象 (this.verificationInfo) 以及当前属性名 (key) 作为参数传递给 hasOwnProperty 方法。</li>
<li>yyrzdjb.verificationInfo.push(this.verificationInfo[key])：如果属性是对象自身的属性，那么就将该属性的值（通过 this.verificationInfo[key] 获取）添加到另一个对象 yyrzdjb 的 verificationInfo 属性中。这假定了 yyrzdjb 对象在代码的上下文中已经被定义，并且拥有一个名为 verificationInfo 的数组属性。</li>
<li>因此，这段代码的作用是将 this.verificationInfo 对象中的所有自身属性的值都复制到另一个对象 yyrzdjb 的 verificationInfo 数组中。</li>
</ul>
</blockquote>
<h2 id="JSON字符串的处理和排序"><a href="#JSON字符串的处理和排序" class="headerlink" title="JSON字符串的处理和排序"></a>JSON字符串的处理和排序</h2><p>有些时候从后端服务获取返回的数据报文格式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;&#123;&quot;rwxh&quot;:&quot;1&quot;,&quot;jdmc&quot;:&#39;&#39;录入审核&quot;,&quot;jddm&quot;:&#39;&#39;1110&quot;,&quot;shyj&quot;:&quot;提交账户初审子务&quot;,&quot;shsj&quot;:&quot;2024-03-04 09:17:29&quot;,&quot;userid&quot;:&quot;0005001&#125;,</span><br><span class="line">&#123;&quot;rwxh&quot;:&quot;&quot;,&quot;jdmc&quot;:&#39;&#39;录入审核拒绝&quot;,,&quot;jddm&quot;:&#39;&#39;1402&quot;,&quot;shyj&quot;:&quot;提交账户初审子务&quot;,&quot;shsj&quot;:&quot;2024-03-04 15:07:55&quot;,&quot;userid&quot;:&quot;117010887&quot;&#125;,</span><br><span class="line">&#123;&quot;rwxh&quot;:&quot;1&quot;,&quot;jdmc&quot;:&#39;&#39;凭证验印初审(网点)&quot;,,&quot;jddm&quot;:&#39;&#39;1404&quot;&quot;shyj&quot;:&quot;审核无误，可进入下一流程！&quot;,&quot;shjg&quot;:&quot;无需验印&quot;,&quot;shsj&quot;:&quot;20240316&quot;,&quot;userid&quot;:&quot;117010887&quot;&#125;,&quot;</span><br></pre></td></tr></table></figure>

<p>由于后台的数据是根据不同的子流程任务产生后累计返回的报文信息，此时的业务需求是需要将这些数据加工处理好之后，按最新的一条意见内容进行回显界面，可用下面代码进行实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理后台的任务流程意见信息</span></span><br><span class="line"><span class="keyword">let</span> lcclyj = <span class="string">''</span></span><br><span class="line"><span class="keyword">const</span> sbfList =[]</span><br><span class="line"><span class="keyword">if</span>(!_.isEmpty(taskData.lcclyj))&#123;</span><br><span class="line">	lcclyj = <span class="string">'['</span>+taskData?.lcclyj.slice(<span class="number">0</span>,taskData.lcclyj.length<span class="number">-1</span>)+<span class="string">']'</span> <span class="comment">// 去除最后一位逗号</span></span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		lcclyj = JOSN.parse(lcclyj)</span><br><span class="line">	&#125; <span class="keyword">catch</span>(error)&#123;</span><br><span class="line">		logger.debug(<span class="string">'lcclyj不是JOSN字符串格式'</span>,lcclyj)</span><br><span class="line">	&#125;</span><br><span class="line">	lcclyj.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">let</span> jdmc = <span class="string">''</span></span><br><span class="line">		<span class="keyword">if</span>(item.jddm === <span class="string">'1402'</span>)&#123;</span><br><span class="line">			jdmc = <span class="string">'验印经办'</span></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>( item.jddm === <span class="string">'1403'</span>)&#123;</span><br><span class="line">			jdmc = <span class="string">'验印复核'</span></span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>( item.jddm === <span class="string">'1404'</span>)&#123;</span><br><span class="line">			jdmc = <span class="string">'验印经办（网点）'</span></span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>( item.jddm === <span class="string">'1405'</span>)&#123;</span><br><span class="line">			jdmc = <span class="string">'验印复核（网点）'</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(item.jddm === <span class="string">'1402'</span> || item.jddm === <span class="string">'1403'</span>||item.jddm === <span class="string">'1404'</span>||item.jddm === <span class="string">'1405'</span>)&#123;</span><br><span class="line">			<span class="keyword">const</span> userid = item.userid?.trim() || <span class="string">''</span></span><br><span class="line">			<span class="keyword">const</span> shsj = item.shsj?.trim() || <span class="string">''</span></span><br><span class="line">			<span class="keyword">const</span> shjg = item.shjg?.trim() || <span class="string">''</span></span><br><span class="line">			<span class="keyword">const</span> shyj = item.shyj?.trim() || <span class="string">''</span></span><br><span class="line">			sbfList.push(&#123;</span><br><span class="line">				sbfTime:shsj,</span><br><span class="line">				sbfShyj: jdmc + <span class="string">'('</span>+userid+<span class="string">')'</span>+<span class="string">'('</span>+shsj+<span class="string">')'</span>+<span class="string">'('</span>+shjg+<span class="string">')'</span>+<span class="string">'('</span>+shyj,</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按时间进行排序</span></span><br><span class="line">sbfList.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(b.sbfTime) - <span class="keyword">new</span> <span class="built_in">Date</span>(a.sbfTime)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取最近一条意见内容进行回显</span></span><br><span class="line"><span class="keyword">this</span>.YJL = sbfList[<span class="number">0</span>].sbfShyj || <span class="string">''</span> <span class="comment">// 意见栏</span></span><br></pre></td></tr></table></figure>

<h2 id="循环的使用"><a href="#循环的使用" class="headerlink" title="循环的使用"></a>循环的使用</h2><p>理由：forEach 不支持使用 break 或 return 语句中断循环。for of 支持使用 break 或 return 语句中断循环。<br>由于JS的循环写法很多，每个同事对于循环的使用习惯都不一样，一些前同事的代码逻辑中很喜欢使用ForEach,写起来确实方便，但拓展性不太强,比如从返回的数据中需要进行筛选，不满足条件的直接中断循环，ForEach这方面就略逊一筹，因为从后端服务拿过来的数据无法预测的，且需求是随时可变的，为了可拓展，可以改成for of循环：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AuditOpinion =<span class="keyword">this</span>.importMap.AuditOpinion</span><br><span class="line"><span class="keyword">let</span> opinion =<span class="string">''</span></span><br><span class="line"><span class="keyword">if</span>(!_.isEmpty(AuditOpinion))&#123;</span><br><span class="line">	<span class="keyword">const</span> json =<span class="built_in">JSON</span>.parse(AuditOpinion)</span><br><span class="line">	<span class="keyword">if</span>(!_.isEmpty(json))&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> json)&#123;</span><br><span class="line">			<span class="keyword">const</span> start = item.indexOf(<span class="string">'('</span>)</span><br><span class="line">			<span class="keyword">const</span> end = item.indexOf(<span class="string">')'</span>)</span><br><span class="line">			<span class="keyword">const</span> cl = item.substring(start+<span class="number">1</span>,end)</span><br><span class="line">			<span class="keyword">if</span>(!_.isEmpty(cl)&amp;&amp; cl.length ===<span class="number">6</span>)&#123;</span><br><span class="line">				<span class="keyword">break</span> <span class="comment">// 满足此条件时直接停止循环过滤筛选</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(!_.isEmpty(cl)&amp;&amp; cl.length ===<span class="number">9</span>)&#123;</span><br><span class="line">				opinion += item +<span class="string">'\n'</span></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>.HandOpinions = opinion <span class="comment">//处理意见</span></span><br></pre></td></tr></table></figure>

<h2 id="根据条件筛选获取到的信息，然后再进行模糊查询"><a href="#根据条件筛选获取到的信息，然后再进行模糊查询" class="headerlink" title="根据条件筛选获取到的信息，然后再进行模糊查询"></a>根据条件筛选获取到的信息，然后再进行模糊查询</h2><p>有时候查询服务得到的数据结构总是不统一的，而后端又不想做数据格式处理，这时需要前端根据返回的数据结构，转换成想要的结构后再使用。因为会涉及到多个地方需要使用，所以需要写一个通用的公共函数进行处理后返回。可以新建一个专门存放公共方法的js文件，方便后面在Vue文件中直接引入调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description </span>根据代发类型筛选获取到的摘要表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>trade 交易对象 Vue</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>srcitems 摘要代号数组 获取的list结构为:</span></span><br><span class="line"><span class="comment"> * [&#123;dflx:'01',zhdh:'006',zymc:'代发工资'&#125;,&#123;dflx:'02',zhdh:'008',zymc:'电费'&#125;,...]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>dflxView 代发类型位图 有三种情况：薪酬 非薪酬 薪酬+非薪酬</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns </span>返回账户代号-摘要</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">async</span> getZyitemsByDflx(trade,srcitems,dflxView)&#123;</span><br><span class="line">	<span class="keyword">if</span>(_.isEmpty(srcitems))&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 代发类型位图转为代发类型</span></span><br><span class="line">	<span class="keyword">const</span> dflxMap=&#123;&#125;</span><br><span class="line">	<span class="keyword">if</span>(dflxView.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="comment">// 获取的dflxView为薪酬时，可能返回10000000，首位不为0，代表为薪酬类</span></span><br><span class="line">		<span class="keyword">if</span>(dflxView.substring(<span class="number">0</span>,<span class="number">1</span>) !==<span class="string">'0'</span>)&#123;</span><br><span class="line">			dflxMap[<span class="string">'01'</span>] = <span class="string">'薪酬'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(dflxView.length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="comment">// 获取的dflxView为非薪酬时，可能返回01000000，第二位不为0，代表为非薪酬类</span></span><br><span class="line">		<span class="keyword">if</span>(dflxView.substring(<span class="number">1</span>,<span class="number">2</span>) !==<span class="string">'0'</span>)&#123;</span><br><span class="line">			dflxMap[<span class="string">'02'</span>] = <span class="string">'非薪酬'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 通过srcitems中的dflx去匹配出当前dflxMap对象中含有的key再进行过滤</span></span><br><span class="line">	<span class="keyword">const</span> list =srcitems.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> dflxMap[item.dflx])</span><br><span class="line">	<span class="keyword">if</span>(_.isEmpty(list))&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> list</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description </span>模糊匹配摘要信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>trade 交易对象 Vue</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>list 筛选后的摘要数组信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>zydh 摘要代号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns </span>返回账户代号-摘要</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">async</span> getZydhInfoOne(trade,list,zydh)&#123;</span><br><span class="line">	<span class="keyword">let</span> retZydh = <span class="string">''</span></span><br><span class="line">	<span class="keyword">const</span> itemsMatchList = []</span><br><span class="line">	<span class="keyword">const</span> convertS = <span class="string">''</span> <span class="comment">// 界面输入[001-存款]之类的，判断相等直接返回</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">let</span> index = <span class="number">0</span>;index &lt; list.length;index++)&#123;</span><br><span class="line">		<span class="keyword">const</span> element = list[index]</span><br><span class="line">		convertS = <span class="string">`&#123;element.zydh&#125;-&#123;element.zymc&#125;`</span></span><br><span class="line">		<span class="keyword">if</span>(element.zydh === zydh)&#123;</span><br><span class="line">			<span class="keyword">return</span> convertS</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(element.zydh.indexOf(zydh) &gt; <span class="number">-1</span> || zydh.indexOf(element.zydh) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">			<span class="comment">// 模糊查询筛选</span></span><br><span class="line">			itemsMatchList.push(element)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">let</span> itemMatchs = []</span><br><span class="line">	<span class="comment">// 判断是否有模糊匹配，若无，加载所有</span></span><br><span class="line">	<span class="keyword">if</span>(itemsMatchList.length === <span class="number">0</span>)&#123;</span><br><span class="line">		itemMatchs = list.map(<span class="function">(<span class="params">item</span>) =&gt;</span> (&#123;</span><br><span class="line">			label: <span class="string">`<span class="subst">$&#123;item.zydh&#125;</span>-<span class="subst">$&#123;item.zymc&#125;</span>`</span>,</span><br><span class="line">			value: item.zydh,</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		itemMatchs = itemsMatchList.map(<span class="function">(<span class="params">item</span>) =&gt;</span> (&#123;</span><br><span class="line">			label: <span class="string">`<span class="subst">$&#123;item.zydh&#125;</span>-<span class="subst">$&#123;item.zymc&#125;</span>`</span>,</span><br><span class="line">			value: item.zydh,</span><br><span class="line">		&#125;))</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 把筛选后的itemMatchs传入封装好的方法中进行弹框展示</span></span><br><span class="line">	retZydh = <span class="keyword">await</span> trade.pushComboInputDialog(<span class="string">'摘要'</span>,<span class="string">'请选择'</span>,itemMatchs,<span class="string">''</span>,<span class="string">'RETURN_FULL'</span>)</span><br><span class="line">	<span class="keyword">return</span> retZydh</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="去重处理"><a href="#去重处理" class="headerlink" title="去重处理"></a>去重处理</h2><p>有时候后端服务查询会有返回重复的数据，这时候前端可以先进行去重处理，再进行展示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">            <span class="keyword">const</span> data = &#123;</span><br><span class="line">                cpdh: <span class="keyword">this</span>.CPDH, <span class="comment">// 产品代号</span></span><br><span class="line">                dqdhList: [<span class="keyword">this</span>.OrgInfo.rgnCdNm,<span class="string">'00'</span>], <span class="comment">// 地区代号</span></span><br><span class="line">                qsrq: CibTradeUtil.getHostDate(<span class="keyword">this</span>), <span class="comment">// 起始日期</span></span><br><span class="line">                zzrq: CibTradeUtil.getHostDate(<span class="keyword">this</span>), <span class="comment">// 终止日期</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> loadCPQX(<span class="keyword">this</span>,data)</span><br><span class="line">            <span class="keyword">if</span>(res,isSuccess &amp;&amp; res.body.list.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            	<span class="keyword">const</span> list =res.body.list</span><br><span class="line">            	<span class="keyword">const</span> optionsList =list.map(<span class="function">(<span class="params">item</span>)=&gt;</span>(&#123;</span><br><span class="line">					label:item.cpqx,</span><br><span class="line">					value:item.cpqx,</span><br><span class="line">				&#125;)</span><br><span class="line">				<span class="comment">// 去重处理</span></span><br><span class="line">				<span class="keyword">this</span>.CPQX_options = optionsList.reduce(<span class="function">(<span class="params">acc,item</span>) =&gt;</span> &#123;</span><br><span class="line">					<span class="keyword">if</span>(!acc.some(<span class="function">(<span class="params">item2</span>)=&gt;</span> item2.value === item.value))&#123;</span><br><span class="line">						acc.push(item)</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">return</span> acc</span><br><span class="line">				&#125;,[])</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="转码处理"><a href="#转码处理" class="headerlink" title="转码处理"></a>转码处理</h2><p>有时候后端接口只返回码值，并没有中文描述，并且下拉选项是需要动态查询服务进行加载，因此调用服务查询回来时，还需进行转码处理进行展示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">        <span class="keyword">async</span> jxbz_onFocus() &#123;</span><br><span class="line">            <span class="keyword">const</span> data = &#123;</span><br><span class="line">                dqdh: <span class="keyword">this</span>.OrgInfo.rgnCdNm, <span class="comment">// 地区代号</span></span><br><span class="line">                cpdh: <span class="keyword">this</span>.CPDH, <span class="comment">// 产品代号</span></span><br><span class="line">                hbzl: <span class="string">'01'</span>, <span class="comment">// 币种</span></span><br><span class="line">                sxrq: CibTradeUtil.getHostDate(<span class="keyword">this</span>), <span class="comment">// 生效日期</span></span><br><span class="line">                zzrq: CibTradeUtil.getHostDate(<span class="keyword">this</span>), <span class="comment">// 终止日期</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 调用产品信息表的服务</span></span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> loadCPXX(<span class="keyword">this</span>, data)</span><br><span class="line">            <span class="keyword">const</span> list = res?.body?.list</span><br><span class="line">            <span class="keyword">if</span> (!res.isSuccess) &#123;</span><br><span class="line">                <span class="keyword">await</span> <span class="keyword">this</span>.pushInfo(<span class="string">"获取产品信息属性识别，请确认！"</span>)</span><br><span class="line">                <span class="keyword">this</span>.focusManager.setFocus(<span class="string">'CKLLTJ'</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> jxzqz = list[<span class="number">0</span>].jxzqz</span><br><span class="line">                <span class="keyword">this</span>.jxbz_options = <span class="keyword">this</span>.loadJXBZ(jxzqz)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *  返回结息标志进行转换处理</span></span><br><span class="line"><span class="comment">         *  <span class="doctag">@param <span class="variable">jxbz</span></span></span></span><br><span class="line"><span class="comment">         *  <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        loadJXBZ(jxbz) &#123;</span><br><span class="line">            <span class="keyword">if</span> (_.isEmpty(jxbz)) &#123;</span><br><span class="line">                <span class="keyword">this</span>.pushInfo(<span class="string">'结息标志为空，请确认！'</span>)</span><br><span class="line">                <span class="keyword">this</span>.focusManager.setFocus(<span class="string">'jxbz'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> jxbzlen = jxbz.length</span><br><span class="line">            <span class="keyword">const</span> newJxbzs = []</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; jxbzlen; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (jxbz.substr(i, <span class="number">1</span>) === <span class="string">'0'</span>) &#123;</span><br><span class="line">                    newJxbzs.push(&#123;</span><br><span class="line">                        label: <span class="string">'0'</span> + <span class="string">'-'</span> + <span class="string">'按月结息'</span>,</span><br><span class="line">                        value: <span class="string">'0'</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (jxbz.substr(i, <span class="number">1</span>) === <span class="string">'1'</span>) &#123;</span><br><span class="line">                    newJxbzs.push(&#123;</span><br><span class="line">                        label: <span class="string">'1'</span> + <span class="string">'-'</span> + <span class="string">'按季付息'</span>,</span><br><span class="line">                        value: <span class="string">'1'</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (jxbz.substr(i, <span class="number">1</span>) === <span class="string">'2'</span>) &#123;</span><br><span class="line">                    newJxbzs.push(&#123;</span><br><span class="line">                        label: <span class="string">'2'</span> + <span class="string">'-'</span> + <span class="string">'按年付息'</span>,</span><br><span class="line">                        value: <span class="string">'2'</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> _.sortBy(newJxbzs, <span class="string">'value'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="关于正则表达式"><a href="#关于正则表达式" class="headerlink" title="关于正则表达式"></a>关于正则表达式</h2><p>在公司中需要封装一些公共方法，记录一下踩过的坑。由于项目ESLint提交时检查不能使用new的写法，所以改成了字面量的写法，结果测试的时候总是校验不到，原因就是字面量写法中不需要进行转义，使用\就无法正确识别，而new RegExp的时候需要进行转义，这个锅甩给细节啦！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 凭证代号校验</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">async</span> isValidateXh(xh)&#123;</span><br><span class="line">	<span class="comment">//const reg =new RegExp('^((26)|(27))\\d&#123;7&#125;$')</span></span><br><span class="line">	<span class="keyword">const</span> reg = <span class="regexp">/^((26)|(27))\d&#123;7&#125;$/</span></span><br><span class="line">	<span class="keyword">return</span> reg.test(xh)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="初始化加载表格详情画面"><a href="#初始化加载表格详情画面" class="headerlink" title="初始化加载表格详情画面"></a>初始化加载表格详情画面</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">	<span class="keyword">async</span> tradeInit()&#123;</span><br><span class="line">		<span class="keyword">const</span> importVar =<span class="keyword">this</span>.$getPanelImportVar() <span class="comment">// 获取上一个交易传递过来的参数数据</span></span><br><span class="line">		<span class="keyword">const</span> plStr = importVar.PLBSH <span class="comment">// 获取的数据格式如："1,2,3,4,5"</span></span><br><span class="line">		<span class="keyword">const</span> xgStr = importVar.XGBH</span><br><span class="line">		<span class="keyword">const</span> hpStr = importVar.HPDQR</span><br><span class="line">		<span class="keyword">const</span> dbStr = importVar.DBFS</span><br><span class="line">		<span class="keyword">const</span> pmStr = importVar.PMHZJE</span><br><span class="line">		<span class="keyword">const</span> plbshAry= plStr.split(<span class="string">','</span>)</span><br><span class="line">		<span class="keyword">if</span>(plbshAry !==<span class="literal">null</span> &amp;&amp; plbshAry.lenth &gt;<span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">const</span> rowData=[]</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;plbsAry.length;i++)&#123;</span><br><span class="line">				rowData[<span class="number">0</span>]=xgStr.split(<span class="string">','</span>)[i] <span class="comment">// 对每项数据进行截取后回填到列表中</span></span><br><span class="line">				rowData[<span class="number">1</span>]=plbshAry</span><br><span class="line">				rowData[<span class="number">2</span>]=hpStr.split(<span class="string">','</span>)[i]</span><br><span class="line">				rowData[<span class="number">3</span>]=dbStr.split(<span class="string">','</span>)[i]</span><br><span class="line">				rowData[<span class="number">4</span>]=pmStr.split(<span class="string">','</span>)[i]</span><br><span class="line">				<span class="keyword">this</span>.tableData.push(&#123;</span><br><span class="line">					XGBH:rowData[<span class="number">0</span>],</span><br><span class="line">					PLBSH:rowData[<span class="number">1</span>],</span><br><span class="line">					HPDQR:rowData[<span class="number">2</span>],</span><br><span class="line">					DBFS:rowData[<span class="number">3</span>],</span><br><span class="line">					PMHZJE:rowData[<span class="number">4</span>],</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="特效案例Demo"><a href="#特效案例Demo" class="headerlink" title="特效案例Demo"></a>特效案例Demo</h2><h3 id="广告栏跑马灯效果"><a href="#广告栏跑马灯效果" class="headerlink" title="广告栏跑马灯效果"></a>广告栏跑马灯效果</h3><h4 id="案例代码"><a href="#案例代码" class="headerlink" title="案例代码"></a>案例代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>广告栏跑马灯效果<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-container</span> &#123;</span></span><br><span class="line">      overflow: hidden;</span><br><span class="line">      position: relative;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-id">#dbe4ff</span>, <span class="selector-id">#f3e8ff</span>);</span></span><br><span class="line">      padding: 0 0 10px 0;</span><br><span class="line">      display: flex;</span><br><span class="line">      gap: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-track</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">      will-change: transform;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-track</span><span class="selector-class">.horizontal</span> &#123;</span></span><br><span class="line">      flex-direction: row;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-track</span><span class="selector-class">.vertical</span> &#123;</span></span><br><span class="line">      flex-direction: row;</span><br><span class="line">      height: 300px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-track</span><span class="selector-class">.vertical</span> <span class="selector-class">.track-column</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">      flex-direction: column;</span><br><span class="line">      gap: 20px;</span><br><span class="line">      flex: 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-card</span> &#123;</span></span><br><span class="line">      flex: 0 0 auto;</span><br><span class="line">      width: 140px;</span><br><span class="line">      height: 160px;</span><br><span class="line"><span class="css">      <span class="comment">/* 固定卡片高度 */</span></span></span><br><span class="line">      margin: 10px;</span><br><span class="line">      border-radius: 20px;</span><br><span class="line">      background: white;</span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 4<span class="selector-tag">px</span> 15<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.1</span>);</span></span><br><span class="line">      text-align: center;</span><br><span class="line">      overflow: hidden;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.3s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line">      cursor: pointer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(1<span class="selector-class">.1</span>);</span></span><br><span class="line">      z-index: 10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-card</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100px;</span><br><span class="line">      object-fit: cover;</span><br><span class="line">      border-top-left-radius: 20px;</span><br><span class="line">      border-top-right-radius: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.marquee-card</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line">      margin: 10px;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      line-height: 1;</span><br><span class="line"><span class="css">      <span class="comment">/* 确保文本高度一致 */</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>跑马灯测试<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"marquee1"</span> <span class="attr">class</span>=<span class="string">"marquee-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"marquee2"</span> <span class="attr">class</span>=<span class="string">"marquee-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"marquee3"</span> <span class="attr">class</span>=<span class="string">"marquee-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> data = [</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product13.cb01faad.png"</span>, title: <span class="string">"AI 商品图"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/606573fb8322e6675c9df76c.gif"</span>, title: <span class="string">"AI 去水印"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/608ab487d1a9ae528fc5e451.png"</span>, title: <span class="string">"简历模板"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product9.30351d21.png"</span>, title: <span class="string">"公众号首图"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/6064539b8322e6675c8f8d37.png"</span>, title: <span class="string">"海报设计"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product6.a3c25bc6.png"</span>, title: <span class="string">"智能抠图"</span>, link: <span class="string">"#"</span> &#125;</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> data1 = [</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product13.cb01faad.png"</span>, title: <span class="string">"AI 测撒测试"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/606573fb8322e6675c9df76c.gif"</span>, title: <span class="string">"AI 去水印"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/608ab487d1a9ae528fc5e451.png"</span>, title: <span class="string">"简历模板"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product9.30351d21.png"</span>, title: <span class="string">"公众号首图"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/606573fb8322e6675c9df76c.gif"</span>, title: <span class="string">"AI 去水印"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/608ab487d1a9ae528fc5e451.png"</span>, title: <span class="string">"简历模板"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product9.30351d21.png"</span>, title: <span class="string">"公众号首图"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/606573fb8322e6675c9df76c.gif"</span>, title: <span class="string">"AI 去水印"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/608ab487d1a9ae528fc5e451.png"</span>, title: <span class="string">"简历模板"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product9.30351d21.png"</span>, title: <span class="string">"公众号首图"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://img.imgdb.cn/item/6064539b8322e6675c8f8d37.png"</span>, title: <span class="string">"海报设计"</span>, link: <span class="string">"#"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; img: <span class="string">"https://www.chuangkit.com/distweb/img/product6.a3c25bc6.png"</span>, title: <span class="string">"测试测"</span>, link: <span class="string">"#"</span> &#125;</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">initMarquee</span><span class="params">(containerId, cardsData = [], direction = <span class="string">"right-to-left"</span>)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(containerId);</span></span><br><span class="line">      if (!container) &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.error(<span class="string">`Container with ID <span class="subst">$&#123;containerId&#125;</span> not found`</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (!cardsData || cardsData.length === 0) &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.error(<span class="string">"No data provided for marquee"</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> track = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">      track.className = <span class="string">"marquee-track"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> isVertical = direction === <span class="string">"vertical-dual"</span>;</span></span><br><span class="line">      if (isVertical) &#123;</span><br><span class="line"><span class="actionscript">        track.classList.add(<span class="string">"vertical"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> trackLeft = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">        trackLeft.className = <span class="string">"track-column"</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> trackRight = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">        trackRight.className = <span class="string">"track-column"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> isPausedLeft = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> isPausedRight = <span class="literal">false</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        cardsData.forEach(<span class="function"><span class="params">card</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> cardDivLeft = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">          cardDivLeft.className = <span class="string">"marquee-card"</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> cardDivRight = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">          cardDivRight.className = <span class="string">"marquee-card"</span>;</span></span><br><span class="line"></span><br><span class="line">          if (card.link) &#123;</span><br><span class="line"><span class="javascript">            cardDivLeft.addEventListener(<span class="string">"click"</span>, () =&gt; <span class="built_in">window</span>.open(card.link, <span class="string">"_blank"</span>));</span></span><br><span class="line"><span class="javascript">            cardDivRight.addEventListener(<span class="string">"click"</span>, () =&gt; <span class="built_in">window</span>.open(card.link, <span class="string">"_blank"</span>));</span></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> imgLeft = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="actionscript">          imgLeft.setAttribute(<span class="string">"loading"</span>, <span class="string">"lazy"</span>);</span></span><br><span class="line">          imgLeft.src = card.img;</span><br><span class="line"><span class="actionscript">          imgLeft.alt = card.title || <span class="string">""</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> imgRight = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="actionscript">          imgRight.setAttribute(<span class="string">"loading"</span>, <span class="string">"lazy"</span>);</span></span><br><span class="line">          imgRight.src = card.img;</span><br><span class="line"><span class="actionscript">          imgRight.alt = card.title || <span class="string">""</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> titleLeft = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">          titleLeft.textContent = card.title || <span class="string">""</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> titleRight = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">          titleRight.textContent = card.title || <span class="string">""</span>;</span></span><br><span class="line"></span><br><span class="line">          cardDivLeft.appendChild(imgLeft);</span><br><span class="line">          cardDivLeft.appendChild(titleLeft);</span><br><span class="line">          cardDivRight.appendChild(imgRight);</span><br><span class="line">          cardDivRight.appendChild(titleRight);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">          cardDivLeft.addEventListener(<span class="string">"mouseenter"</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">            isPausedLeft = <span class="literal">true</span>;</span></span><br><span class="line">          &#125;);</span><br><span class="line"><span class="actionscript">          cardDivLeft.addEventListener(<span class="string">"mouseleave"</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">            isPausedLeft = <span class="literal">false</span>;</span></span><br><span class="line">          &#125;);</span><br><span class="line"><span class="actionscript">          cardDivRight.addEventListener(<span class="string">"mouseenter"</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">            isPausedRight = <span class="literal">true</span>;</span></span><br><span class="line">          &#125;);</span><br><span class="line"><span class="actionscript">          cardDivRight.addEventListener(<span class="string">"mouseleave"</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">            isPausedRight = <span class="literal">false</span>;</span></span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          trackLeft.appendChild(cardDivLeft);</span><br><span class="line">          trackRight.appendChild(cardDivRight);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        track.appendChild(trackLeft);</span><br><span class="line">        track.appendChild(trackRight);</span><br><span class="line">        container.appendChild(track);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> scrollPosLeft = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> scrollPosRight = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> cardHeight = <span class="number">160</span>; <span class="comment">// 卡片高度</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> gap = <span class="number">20</span>; <span class="comment">// 间距</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> cardSize = cardHeight + gap; <span class="comment">// 包含间距的总高度</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">scroll</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">          if (!isPausedLeft) &#123;</span><br><span class="line">            scrollPosLeft -= 1;</span><br><span class="line">            if (scrollPosLeft &lt;= -cardSize) &#123;</span><br><span class="line"><span class="actionscript">              <span class="keyword">const</span> firstCard = trackLeft.firstElementChild;</span></span><br><span class="line">              trackLeft.appendChild(firstCard);</span><br><span class="line">              scrollPosLeft += cardSize;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            trackLeft.style.transform = <span class="string">`translateY(<span class="subst">$&#123;scrollPosLeft&#125;</span>px)`</span>;</span></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          if (!isPausedRight) &#123;</span><br><span class="line">            scrollPosRight += 1;</span><br><span class="line">            if (scrollPosRight &gt;= 0) &#123;</span><br><span class="line"><span class="actionscript">              <span class="keyword">const</span> lastCard = trackRight.lastElementChild;</span></span><br><span class="line">              trackRight.prepend(lastCard);</span><br><span class="line">              scrollPosRight -= cardSize;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            trackRight.style.transform = <span class="string">`translateY(<span class="subst">$&#123;scrollPosRight&#125;</span>px)`</span>;</span></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          requestAnimationFrame(scroll);</span><br><span class="line">        &#125;</span><br><span class="line">        requestAnimationFrame(scroll);</span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">        track.classList.add(<span class="string">"horizontal"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> isPaused = <span class="literal">false</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        cardsData.forEach(<span class="function"><span class="params">card</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> cardDiv = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">          cardDiv.className = <span class="string">"marquee-card"</span>;</span></span><br><span class="line">          if (card.link) &#123;</span><br><span class="line"><span class="javascript">            cardDiv.addEventListener(<span class="string">"click"</span>, () =&gt; <span class="built_in">window</span>.open(card.link, <span class="string">"_blank"</span>));</span></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="actionscript">          img.setAttribute(<span class="string">"loading"</span>, <span class="string">"lazy"</span>);</span></span><br><span class="line">          img.src = card.img;</span><br><span class="line"><span class="actionscript">          img.alt = card.title || <span class="string">""</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> title = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">          title.textContent = card.title || <span class="string">""</span>;</span></span><br><span class="line"></span><br><span class="line">          cardDiv.appendChild(img);</span><br><span class="line">          cardDiv.appendChild(title);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">          cardDiv.addEventListener(<span class="string">"mouseenter"</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">            isPaused = <span class="literal">true</span>;</span></span><br><span class="line">          &#125;);</span><br><span class="line"><span class="actionscript">          cardDiv.addEventListener(<span class="string">"mouseleave"</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">            isPaused = <span class="literal">false</span>;</span></span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          track.appendChild(cardDiv);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        container.appendChild(track);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> scrollPos = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> cardSize = <span class="number">160</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">scroll</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">          if (!isPaused) &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (direction === <span class="string">"right-to-left"</span>) &#123;</span></span><br><span class="line">              scrollPos -= 1;</span><br><span class="line">              if (scrollPos &lt;= -cardSize) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> firstCard = track.firstElementChild;</span></span><br><span class="line">                track.appendChild(firstCard);</span><br><span class="line">                scrollPos += cardSize;</span><br><span class="line">              &#125;</span><br><span class="line"><span class="javascript">              track.style.transform = <span class="string">`translateX(<span class="subst">$&#123;scrollPos&#125;</span>px)`</span>;</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (direction === <span class="string">"left-to-right"</span>) &#123;</span></span><br><span class="line">              scrollPos += 1;</span><br><span class="line">              if (scrollPos &gt;= 0) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> lastCard = track.lastElementChild;</span></span><br><span class="line">                track.prepend(lastCard);</span><br><span class="line">                scrollPos -= cardSize;</span><br><span class="line">              &#125;</span><br><span class="line"><span class="javascript">              track.style.transform = <span class="string">`translateX(<span class="subst">$&#123;scrollPos&#125;</span>px)`</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          requestAnimationFrame(scroll);</span><br><span class="line">        &#125;</span><br><span class="line">        requestAnimationFrame(scroll);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    initMarquee(<span class="string">"marquee1"</span>, data, <span class="string">"right-to-left"</span>);</span></span><br><span class="line"><span class="actionscript">    initMarquee(<span class="string">"marquee2"</span>, data1, <span class="string">"left-to-right"</span>);</span></span><br><span class="line"><span class="actionscript">    initMarquee(<span class="string">"marquee3"</span>, data1, <span class="string">"vertical-dual"</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="瀑布流视频墙"><a href="#瀑布流视频墙" class="headerlink" title="瀑布流视频墙"></a>瀑布流视频墙</h3><h4 id="案例代码-1"><a href="#案例代码-1" class="headerlink" title="案例代码"></a>案例代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>瀑布流视频墙（懒加载优化版）<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    body &#123;</span><br><span class="line">      font-family: Arial, sans-serif;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#f5f5f5</span>;</span></span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line">      display: grid;</span><br><span class="line">      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));</span><br><span class="line">      gap: 16px;</span><br><span class="line">      justify-items: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.grid-item</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">      border-radius: 10px;</span><br><span class="line">      overflow: hidden;</span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 4<span class="selector-tag">px</span> 8<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.1</span>);</span></span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.3s</span> <span class="selector-tag">ease-in-out</span>, <span class="selector-tag">box-shadow</span> 0<span class="selector-class">.3s</span>;</span></span><br><span class="line">      cursor: pointer;</span><br><span class="line">      position: relative;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.grid-item</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(1<span class="selector-class">.05</span>);</span></span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 6<span class="selector-tag">px</span> 12<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.2</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.grid-item</span> <span class="selector-tag">video</span> &#123;</span></span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 250px;</span><br><span class="line">      object-fit: cover;</span><br><span class="line">      display: block;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.video-title</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      top: 0;</span><br><span class="line">      left: 0;</span><br><span class="line">      right: 0;</span><br><span class="line">      padding: 8px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">bottom</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.7</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0) 100%);</span></span><br><span class="line">      color: white;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      font-weight: bold;</span><br><span class="line"><span class="css">      <span class="selector-tag">text-shadow</span>: 1<span class="selector-tag">px</span> 1<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>);</span></span><br><span class="line">      white-space: nowrap;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      text-overflow: ellipsis;</span><br><span class="line">      z-index: 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.video-description</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      bottom: 0;</span><br><span class="line">      left: 0;</span><br><span class="line">      right: 0;</span><br><span class="line">      padding: 8px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">top</span>, <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.7</span>) 0%, <span class="selector-tag">rgba</span>(0, 0, 0, 0) 100%);</span></span><br><span class="line">      color: white;</span><br><span class="line">      font-size: 10px;</span><br><span class="line"><span class="css">      <span class="selector-tag">text-shadow</span>: 1<span class="selector-tag">px</span> 1<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>);</span></span><br><span class="line">      max-height: 40%;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      text-overflow: ellipsis;</span><br><span class="line">      display: -webkit-box;</span><br><span class="line">      -webkit-line-clamp: 3;</span><br><span class="line">      -webkit-box-orient: vertical;</span><br><span class="line"><span class="css">      <span class="selector-tag">line-height</span>: 1<span class="selector-class">.4</span>;</span></span><br><span class="line">      z-index: 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.fullscreen</span> &#123;</span></span><br><span class="line">      position: fixed;</span><br><span class="line">      top: 0;</span><br><span class="line">      left: 0;</span><br><span class="line">      width: 100vw;</span><br><span class="line">      height: 100vh;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.8</span>);</span></span><br><span class="line">      display: none;</span><br><span class="line">      align-items: center;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      z-index: 1000;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.fullscreen</span> <span class="selector-tag">video</span> &#123;</span></span><br><span class="line">      max-width: 90%;</span><br><span class="line">      max-height: 90%;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 8<span class="selector-tag">px</span> 16<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(255, 255, 255, 0<span class="selector-class">.3</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.close-btn</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      top: 20px;</span><br><span class="line">      right: 20px;</span><br><span class="line">      font-size: 24px;</span><br><span class="line">      color: white;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.5</span>);</span></span><br><span class="line">      border: none;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      border-radius: 5px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.close-btn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(255, 255, 255, 0<span class="selector-class">.3</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.video-title</span>,</span></span><br><span class="line"><span class="css">    <span class="selector-class">.video-description</span> &#123;</span></span><br><span class="line">      transition: opacity 2s ease-in-out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="keyword">@media</span> (<span class="attribute">min-width:</span> <span class="number">1200px</span>) &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line">        grid-template-columns: repeat(5, minmax(150px, 1fr));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">1199px</span>) <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">992px</span>) &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line">        grid-template-columns: repeat(4, minmax(150px, 1fr));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">991px</span>) <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line">        grid-template-columns: repeat(3, minmax(150px, 1fr));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">767px</span>) <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">576px</span>) &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line">        grid-template-columns: repeat(2, minmax(150px, 1fr));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">575px</span>) &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line">        grid-template-columns: repeat(1, minmax(150px, 1fr));</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.video-title</span> &#123;</span></span><br><span class="line">        font-size: 14px;</span><br><span class="line">        padding: 6px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.video-description</span> &#123;</span></span><br><span class="line">        font-size: 12px;</span><br><span class="line">        -webkit-line-clamp: 2;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span>瀑布流视频墙<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid-container"</span> <span class="attr">id</span>=<span class="string">"gridContainer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"fullscreenContainer"</span> <span class="attr">class</span>=<span class="string">"fullscreen"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"fullscreenVideo"</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"close-btn"</span> <span class="attr">onclick</span>=<span class="string">"closeFullscreen()"</span>&gt;</span>✖<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> currentVideoInfo = &#123;&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 视频数据</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> videoUrls = [</span></span><br><span class="line"><span class="actionscript">      &#123; url: <span class="string">"https://mpimg.cn/view.php/ec646e37456de0ac11a31c366ae97902.mp4"</span>, name: <span class="string">"雪山日出"</span>, description: <span class="string">"清晨的雪山日出美景，金色阳光洒满雪山"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; url: <span class="string">"https://mpimg.cn/view.php/d7cf77dc0f88ea61157bd1b09d3cc38b.mp4"</span>, name: <span class="string">"海底世界"</span>, description: <span class="string">""</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; url: <span class="string">"https://example.com/video1.mp4"</span>, name: <span class="string">"城市夜景"</span>, description: <span class="string">"延时摄影展示的城市夜景灯光"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; url: <span class="string">"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm"</span>, name: <span class="string">"花开富贵"</span>, description: <span class="string">"款式大方考虑到实际付款老大随机发克拉的设计饭卡手打款式大方好看的，防守打法顺丰快递说法打撒的地方开始货到付款活动时间风好大手机。石沉大海司法鉴定所富华大厦放"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; url: <span class="string">"https://mpimg.cn/view.php/d7cf77dc0f88ea61157bd1b09d3cc38b.mp4"</span>, name: <span class="string">""</span>, description: <span class="string">""</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; url: <span class="string">"https://mpimg.cn/view.php/ec646e37456de0ac11a31c366ae97902.mp4"</span>, name: <span class="string">"《记事本MV》-陈慧琳"</span>, description: <span class="string">"童年只记住了旋律，长大后更多是关于生活、爱情以及成长的故事~"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">      &#123; url: <span class="string">"https://mpimg.cn/view.php/d7cf77dc0f88ea61157bd1b09d3cc38b.mp4"</span>, name: <span class="string">"内心世界"</span>, description: <span class="string">"从小缺爱的人内心是没有力量的，唯有把心激活，生命才能恢复活力~"</span> &#125;,</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> gridContainer = <span class="built_in">document</span>.getElementById(<span class="string">"gridContainer"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> fullscreenContainer = <span class="built_in">document</span>.getElementById(<span class="string">"fullscreenContainer"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> fullscreenVideo = <span class="built_in">document</span>.getElementById(<span class="string">"fullscreenVideo"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 为每个视频创建一个 grid-item</span></span></span><br><span class="line"><span class="javascript">    videoUrls.forEach(<span class="function"><span class="params">videoData</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">      div.className = <span class="string">"grid-item"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 添加标题</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> title = <span class="literal">null</span>;</span></span><br><span class="line">      if (videoData.name) &#123;</span><br><span class="line"><span class="javascript">        title = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">        title.className = <span class="string">"video-title"</span>;</span></span><br><span class="line">        title.textContent = videoData.name;</span><br><span class="line">        div.appendChild(title);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 创建 video 元素，但不设置 src（懒加载）</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> video = <span class="built_in">document</span>.createElement(<span class="string">"video"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 将真实视频 URL 存入 data-src 属性</span></span></span><br><span class="line">      video.dataset.src = videoData.url;</span><br><span class="line"><span class="actionscript">      <span class="comment">// 设置 preload 为 "none"，确保不会自动下载</span></span></span><br><span class="line"><span class="actionscript">      video.preload = <span class="string">"none"</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 使用默认封面（poster）——可以根据需求自定义，这里简单替换 .mp4 为指定的缩略图 URL</span></span></span><br><span class="line"><span class="actionscript">      video.poster = videoData.url.replace(<span class="string">".mp4"</span>, <span class="string">"https://mpimg.cn/view.php/9b3a38f7ec07818525d175c5ec014141.jpg"</span>);</span></span><br><span class="line"><span class="javascript">      video.onerror = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        video.poster = <span class="string">"https://mpimg.cn/view.php/2982f73b9d2223a23a85e0a6686b7bdd.jpg"</span>;</span></span><br><span class="line"><span class="actionscript">        video.removeAttribute(<span class="string">"src"</span>);</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 添加描述</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> desc = <span class="literal">null</span>;</span></span><br><span class="line">      if (videoData.description) &#123;</span><br><span class="line"><span class="javascript">        desc = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">        desc.className = <span class="string">"video-description"</span>;</span></span><br><span class="line">        desc.textContent = videoData.description;</span><br><span class="line">        div.appendChild(desc);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 控制标题和描述显示状态</span></span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">toggleTextVisibility</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (title) title.style.display = video.paused ? <span class="string">'block'</span> : <span class="string">'none'</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (desc) desc.style.display = video.paused ? <span class="string">'block'</span> : <span class="string">'none'</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">      toggleTextVisibility();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 播放和暂停时切换文字显示</span></span></span><br><span class="line"><span class="actionscript">      video.addEventListener(<span class="string">'play'</span>, toggleTextVisibility);</span></span><br><span class="line"><span class="actionscript">      video.addEventListener(<span class="string">'pause'</span>, toggleTextVisibility);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 点击事件：第一次点击时设置 src 并开始播放；后续点击则切换播放/暂停</span></span></span><br><span class="line"><span class="javascript">      video.onclick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 如果还没有加载视频数据，则开始懒加载</span></span></span><br><span class="line">        if (!video.src) &#123;</span><br><span class="line">          video.src = video.dataset.src;</span><br><span class="line"><span class="actionscript">          video.load();  <span class="comment">// 通知浏览器加载资源</span></span></span><br><span class="line">          video.play();</span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">          if (video.paused) &#123;</span><br><span class="line">            video.play();</span><br><span class="line"><span class="actionscript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">            video.pause();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 双击进入全屏：同样确保 video.src 已加载</span></span></span><br><span class="line"><span class="javascript">      video.ondblclick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line">        if (!video.src) &#123;</span><br><span class="line">          video.src = video.dataset.src;</span><br><span class="line">          video.load();</span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> wasPlaying = !video.paused;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> currentTime = video.currentTime;</span></span><br><span class="line">        video.pause();</span><br><span class="line">        openFullscreen(video.src, currentTime, wasPlaying, video);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      div.appendChild(video);</span><br><span class="line">      gridContainer.appendChild(div);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 全屏播放函数</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">openFullscreen</span><span class="params">(url, currentTime, wasPlaying, gridVideo)</span> </span>&#123;</span></span><br><span class="line">      fullscreenVideo.src = url;</span><br><span class="line">      fullscreenVideo.currentTime = currentTime;</span><br><span class="line">      fullscreenVideo.play();</span><br><span class="line"><span class="actionscript">      fullscreenContainer.style.display = <span class="string">"flex"</span>;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.style.overflow = <span class="string">"hidden"</span>;</span></span><br><span class="line">      currentVideoInfo = &#123; wasPlaying, gridVideo &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">closeFullscreen</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> &#123; wasPlaying, gridVideo &#125; = currentVideoInfo;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> currentTime = fullscreenVideo.currentTime;</span></span><br><span class="line">      fullscreenVideo.pause();</span><br><span class="line"><span class="actionscript">      fullscreenContainer.style.display = <span class="string">"none"</span>;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.style.overflow = <span class="string">"auto"</span>;</span></span><br><span class="line">      if (gridVideo) &#123;</span><br><span class="line">        gridVideo.currentTime = currentTime;</span><br><span class="line">        if (wasPlaying) gridVideo.play();</span><br><span class="line">      &#125;</span><br><span class="line">      currentVideoInfo = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    fullscreenContainer.addEventListener(<span class="string">"click"</span>, (e) =&gt; &#123;</span></span><br><span class="line">      if (e.target === fullscreenContainer) closeFullscreen();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 标签页切换时暂停/恢复播放</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> playStates = <span class="keyword">new</span> <span class="built_in">Map</span>();</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">'visibilitychange'</span>, handleVisibilityChange);</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">handleVisibilityChange</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> videos = <span class="built_in">document</span>.querySelectorAll(<span class="string">'video'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="built_in">document</span>.hidden) &#123;</span></span><br><span class="line"><span class="javascript">        videos.forEach(<span class="function"><span class="params">video</span> =&gt;</span> &#123;</span></span><br><span class="line">          playStates.set(video, !video.paused);</span><br><span class="line">          video.pause();</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        playStates.forEach(<span class="function">(<span class="params">wasPlaying, video</span>) =&gt;</span> &#123;</span></span><br><span class="line">          if (wasPlaying) video.play();</span><br><span class="line">        &#125;);</span><br><span class="line">        playStates.clear();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="TimeStoryLine-时间故事线"><a href="#TimeStoryLine-时间故事线" class="headerlink" title="TimeStoryLine|时间故事线"></a>TimeStoryLine|时间故事线</h3><h4 id="案例代码-2"><a href="#案例代码-2" class="headerlink" title="案例代码"></a>案例代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>TimeStoryLine - Dynamic Rows<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 全局基础重置 */</span></span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    body &#123;</span><br><span class="line">      font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#f5f5f5</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#333</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* ===== 顶部导航栏 ===== */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.navbar</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-between;</span><br><span class="line">      align-items: center;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">      height: 60px;</span><br><span class="line">      padding: 0 20px;</span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 2<span class="selector-tag">px</span> 4<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.1</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.navbar</span> <span class="selector-class">.logo</span> &#123;</span></span><br><span class="line">      font-size: 20px;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.navbar</span> <span class="selector-class">.nav-items</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line">      margin-left: 10px;</span><br><span class="line">      padding: 6px 12px;</span><br><span class="line">      border: none;</span><br><span class="line">      border-radius: 4px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#ddd</span>;</span></span><br><span class="line">      cursor: pointer;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-tag">background-color</span> 0<span class="selector-class">.3s</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.navbar</span> <span class="selector-class">.nav-items</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* ===== 时间线容器 ===== */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.timeline-container</span> &#123;</span></span><br><span class="line">      width: 80%;</span><br><span class="line">      margin: 40px auto;</span><br><span class="line">      position: relative;</span><br><span class="line"><span class="css">      <span class="comment">/* 用于放置时间线伪元素 */</span></span></span><br><span class="line">      padding-bottom: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 时间线：使用伪元素从上到下贯穿容器 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.timeline-container</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">      content: '';</span><br><span class="line">      position: absolute;</span><br><span class="line">      left: 50%;</span><br><span class="line"><span class="css">      <span class="comment">/* 水平居中 */</span></span></span><br><span class="line">      transform: translateX(-50%);</span><br><span class="line">      top: 0;</span><br><span class="line">      bottom: 0;</span><br><span class="line"><span class="css">      <span class="comment">/* 全高度覆盖 */</span></span></span><br><span class="line">      width: 2px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line">      z-index: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* ===== 单个事件的行容器 ===== */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.event-row</span> &#123;</span></span><br><span class="line">      position: relative;</span><br><span class="line"><span class="css">      <span class="comment">/* 内部绝对定位小圆点 */</span></span></span><br><span class="line">      margin-bottom: 30px;</span><br><span class="line"><span class="css">      <span class="comment">/* 行间距 */</span></span></span><br><span class="line">      min-height: 60px;</span><br><span class="line"><span class="css">      <span class="comment">/* 保证有一定高度 */</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 清除内部浮动，避免高度塌陷 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.event-row</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">      content: '';</span><br><span class="line">      display: block;</span><br><span class="line">      clear: both;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* ===== 小圆点：独立元素，贴时间线 ===== */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.circle</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      left: 50%;</span><br><span class="line"><span class="css">      <span class="comment">/* 与时间线对齐 */</span></span></span><br><span class="line">      transform: translateX(-50%);</span><br><span class="line"><span class="css">      <span class="selector-tag">top</span>: 1<span class="selector-class">.5em</span>;</span></span><br><span class="line"><span class="css">      <span class="comment">/* 与卡片header大致对齐，可微调 */</span></span></span><br><span class="line">      width: 16px;</span><br><span class="line">      height: 16px;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 3<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#007bff</span>;</span></span><br><span class="line">      border-radius: 50%;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">      z-index: 2;</span><br><span class="line"><span class="css">      <span class="comment">/* 在卡片之上或之下均可 */</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* ===== 事件卡片 ===== */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.event-card</span> &#123;</span></span><br><span class="line">      position: relative;</span><br><span class="line">      width: 46%;</span><br><span class="line"><span class="css">      <span class="comment">/* 占父容器一部分 */</span></span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">      border-radius: 6px;</span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 2<span class="selector-tag">px</span> 6<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.1</span>);</span></span><br><span class="line">      padding: 20px;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.3s</span>, <span class="selector-tag">box-shadow</span> 0<span class="selector-class">.3s</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.event-card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(1<span class="selector-class">.02</span>);</span></span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 4<span class="selector-tag">px</span> 12<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.25</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 左侧卡片：浮动到左侧，文本左对齐 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.left-card</span> &#123;</span></span><br><span class="line">      float: left;</span><br><span class="line">      text-align: left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 右侧卡片：浮动到右侧，文本左对齐 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.right-card</span> &#123;</span></span><br><span class="line">      float: right;</span><br><span class="line">      text-align: left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* ===== 响应式：小屏改为单列 ===== */</span></span></span><br><span class="line"><span class="css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.timeline-container</span> &#123;</span></span><br><span class="line">        width: 90%;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.timeline-container</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">        left: 20px;</span><br><span class="line"><span class="css">        <span class="comment">/* 时间线贴左 */</span></span></span><br><span class="line">        transform: none;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.event-row</span> &#123;</span></span><br><span class="line">        margin-bottom: 30px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.circle</span> &#123;</span></span><br><span class="line">        left: 20px;</span><br><span class="line"><span class="css">        <span class="comment">/* 小圆点贴左 */</span></span></span><br><span class="line">        transform: none;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.event-card</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-class">.left-card</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-class">.right-card</span> &#123;</span></span><br><span class="line">        float: none;</span><br><span class="line">        width: 100%;</span><br><span class="line">        text-align: left;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* ====== 卡片内容示例样式 ====== */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.card-header</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-between;</span><br><span class="line">      margin-bottom: 8px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.card-header</span> <span class="selector-class">.sender</span> &#123;</span></span><br><span class="line">      font-weight: bold;</span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#555</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.card-header</span> <span class="selector-class">.time</span> &#123;</span></span><br><span class="line">      font-size: 14px;</span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#999</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.card-content</span> &#123;</span></span><br><span class="line">      margin-top: 6px;</span><br><span class="line"><span class="css">      <span class="selector-tag">line-height</span>: 1<span class="selector-class">.6</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.card-content</span> <span class="selector-tag">img</span>,</span></span><br><span class="line"><span class="css">    <span class="selector-class">.card-content</span> <span class="selector-tag">video</span> &#123;</span></span><br><span class="line">      max-width: 100%;</span><br><span class="line">      border-radius: 4px;</span><br><span class="line">      margin-top: 8px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 顶部导航 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span>TimeStoryLine|时间故事线<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav-items"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span>用户昵称<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 时间线容器 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"timeline-container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第1行事件（奇数：左侧） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-card left-card"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sender"</span>&gt;</span>Alice<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>2024-10-01 10:00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-content"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>国庆节快乐！这是我们一起出游的第一天，期待留下美好回忆。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第2行事件（偶数：右侧） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-card right-card"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sender"</span>&gt;</span>Bob<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>2024-09-28 19:20<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-content"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>夕阳下的海边，超美！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://picsum.photos/500/300?random=1"</span> <span class="attr">alt</span>=<span class="string">"海边美景"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第3行事件（奇数：左侧） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-card left-card"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sender"</span>&gt;</span>Alice<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>2024-08-15 15:30<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-content"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>夏日花海，拍了一个小视频留念~<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm"</span> <span class="attr">controls</span></span></span><br><span class="line"><span class="tag">            <span class="attr">poster</span>=<span class="string">"https://picsum.photos/500/300?random=2"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第4行事件（偶数：右侧） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-card right-card"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sender"</span>&gt;</span>Bob<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>2024-05-20 12:00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-content"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>520快乐！这一天，一起走过的点点滴滴都那么珍贵。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第5行事件（奇数：左侧） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-card left-card"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sender"</span>&gt;</span>Bob<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>2024-09-28 19:20<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-content"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>夕阳下的海边，超美！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://picsum.photos/500/300?random=1"</span> <span class="attr">alt</span>=<span class="string">"海边美景"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第6行事件（偶数：右侧） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-row"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"event-card right-card"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sender"</span>&gt;</span>Alice<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>2024-08-15 15:30<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-content"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>夏日花海，拍了一个小视频留念~<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm"</span> <span class="attr">controls</span></span></span><br><span class="line"><span class="tag">            <span class="attr">poster</span>=<span class="string">"https://picsum.photos/500/300?random=2"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 更多事件... --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="音乐心电图"><a href="#音乐心电图" class="headerlink" title="音乐心电图"></a>音乐心电图</h3><h4 id="案例图片效果"><a href="#案例图片效果" class="headerlink" title="案例图片效果"></a>案例图片效果</h4><!-- <img src="/img/loading.gif" class="lazyload" data-src="前端代码片段/1740880210881.png"  alt="音乐心电图" title="音乐心电图" style="max-width:auto; height:300px;"> -->

<p><code>&lt;img src=&quot;/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/1740880210881.png&quot; alt=&quot;音乐心电图&quot; title=&quot;音乐心电图&quot; style=&quot;max-width:auto; height:300px;&quot;&gt;</code></p>
<h4 id="案例代码-3"><a href="#案例代码-3" class="headerlink" title="案例代码"></a>案例代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>音乐心电图<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    body &#123;</span><br><span class="line">      background-color: black;</span><br><span class="line">      display: flex;</span><br><span class="line">      flex-direction: column;</span><br><span class="line">      align-items: center;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      height: 100vh;</span><br><span class="line">      color: white;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-id">#visual-container</span> &#123;</span></span><br><span class="line">      position: relative;</span><br><span class="line">      width: 600px;</span><br><span class="line">      height: 200px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 爱心：使用实心填充，而非仅描边 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-id">#heart</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 200px;</span><br><span class="line">      left: 33%;</span><br><span class="line"><span class="css">      <span class="comment">/* transform: translateX(-50%); */</span></span></span><br><span class="line">      background: url('https://pic1.imgdb.cn/item/67c2dd13d0e0a243d4091c1e.png') no-repeat center/contain;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.2s</span> <span class="selector-tag">ease-out</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-id">#ecg-canvas</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      top: 67px;</span><br><span class="line">      width: 600px;</span><br><span class="line">      height: 80px;</span><br><span class="line"><span class="css">      <span class="comment">/* border-top: 2px solid #ff3366; */</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-id">#controls</span> &#123;</span></span><br><span class="line">      margin-top: 200px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"visual-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"heart"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"ecg-canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"controls"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"playBtn"</span>&gt;</span>▶️ 播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 你可以换成自己的外链 MP3 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">audio</span> <span class="attr">id</span>=<span class="string">"audio"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">"https://m10.music.126.net/20250302101105/d662a590a9b2cc08e4ba437e18a91a8b/ymusic/020e/015d/010b/5d3dfa710867af61316d6aafae53909f.mp3?vuutv=0kZdXkUmbzE0XVXCeesLALXQijTmzG/hK42Kc4Dp2GEkOaDGLl9fzWBH46WwcIh2tnVHgWyNPQPoFSjydZxZLP1h+vlNfATVA3Xuf8jmHDE="</span></span></span><br><span class="line"><span class="tag">    <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> audio = <span class="built_in">document</span>.getElementById(<span class="string">"audio"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> playBtn = <span class="built_in">document</span>.getElementById(<span class="string">"playBtn"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> heart = <span class="built_in">document</span>.getElementById(<span class="string">"heart"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"ecg-canvas"</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> canvasCtx = canvas.getContext(<span class="string">"2d"</span>);</span></span><br><span class="line"></span><br><span class="line">    canvas.width = 600;</span><br><span class="line">    canvas.height = 80;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> audioCtx;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> analyser;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> dataArray;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> bufferLength;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> source;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> isPlaying = <span class="literal">false</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// ========================</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 1) 定义“ECG 波形形状”模板</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ========================</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 这段数组模拟一个完整心电图周期(简化版)；数值在 [0,1] 之间，0.5 代表基线。</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> baseEcgShape = [</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 前段基线</span></span></span><br><span class="line">      0.5, 0.5, 0.5, 0.5,</span><br><span class="line"><span class="actionscript">      <span class="comment">// P 波 (小上升)</span></span></span><br><span class="line">      0.52, 0.55,</span><br><span class="line"><span class="actionscript">      <span class="comment">// 回到基线</span></span></span><br><span class="line">      0.53, 0.5, 0.5,</span><br><span class="line"><span class="actionscript">      <span class="comment">// Q 波 (轻微下降)</span></span></span><br><span class="line">      0.48, 0.45,</span><br><span class="line"><span class="actionscript">      <span class="comment">// R 波 (大幅上冲)</span></span></span><br><span class="line">      0.7, 0.9, 0.95, 0.85,</span><br><span class="line"><span class="actionscript">      <span class="comment">// S 波 (下降)</span></span></span><br><span class="line">      0.4, 0.45,</span><br><span class="line"><span class="actionscript">      <span class="comment">// 回到基线</span></span></span><br><span class="line">      0.5, 0.5,</span><br><span class="line"><span class="actionscript">      <span class="comment">// T 波 (中等上升)</span></span></span><br><span class="line">      0.55, 0.6, 0.58, 0.52,</span><br><span class="line"><span class="actionscript">      <span class="comment">// 再次回到基线</span></span></span><br><span class="line">      0.5, 0.5, 0.5, 0.5</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 心电图数据数组（长度=canvas宽度），用于滚动绘制</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> ecgData = <span class="keyword">new</span> <span class="built_in">Array</span>(canvas.width).fill(canvas.height / <span class="number">2</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">setupAudioContext</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      if (!audioCtx) &#123;</span><br><span class="line"><span class="javascript">        audioCtx = <span class="keyword">new</span> (<span class="built_in">window</span>.AudioContext || <span class="built_in">window</span>.webkitAudioContext)();</span></span><br><span class="line">        analyser = audioCtx.createAnalyser();</span><br><span class="line">        analyser.fftSize = 512;</span><br><span class="line">        bufferLength = analyser.frequencyBinCount;</span><br><span class="line"><span class="javascript">        dataArray = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(bufferLength);</span></span><br><span class="line"></span><br><span class="line">        source = audioCtx.createMediaElementSource(audio);</span><br><span class="line">        source.connect(analyser);</span><br><span class="line">        analyser.connect(audioCtx.destination);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> waveIndex = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> randomFactor = <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> frameCount = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> skipFrames = <span class="number">3</span>; <span class="comment">// 改大一点，波形移动就越慢</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      requestAnimationFrame(draw);</span><br><span class="line"></span><br><span class="line">      if (audio.paused) &#123;</span><br><span class="line"><span class="actionscript">        heart.style.transform = <span class="string">"scale(1)"</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      analyser.getByteFrequencyData(dataArray);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 爱心跳动</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> bassEnergy = dataArray.slice(<span class="number">0</span>, <span class="number">20</span>).reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>) / <span class="number">20</span>;</span></span><br><span class="line"><span class="actionscript">      heart.style.transform = `scale($&#123;<span class="number">1</span> + bassEnergy / <span class="number">200</span>&#125;)`;<span class="comment">// 让跳动幅度更大</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 波形放大</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> midEnergy = dataArray.slice(<span class="number">100</span>, <span class="number">200</span>).reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>) / <span class="number">100</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 只有在满足一定帧数时才更新一格</span></span></span><br><span class="line">      frameCount++;</span><br><span class="line">      if (frameCount % skipFrames === 0) &#123;</span><br><span class="line">        ecgData.shift();</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> baseVal = baseEcgShape[waveIndex % baseEcgShape.length];</span></span><br><span class="line">        waveIndex++;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> amplitude = (midEnergy / <span class="number">255</span>) * <span class="number">2</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> finalVal = baseVal + (baseVal - <span class="number">0.5</span>) * amplitude;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> y = (<span class="number">1</span> - finalVal) * canvas.height;</span></span><br><span class="line">        ecgData.push(y);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 绘制</span></span></span><br><span class="line">      canvasCtx.clearRect(0, 0, canvas.width, canvas.height);</span><br><span class="line">      canvasCtx.beginPath();</span><br><span class="line"><span class="actionscript">      canvasCtx.strokeStyle = <span class="string">"#ff3366"</span>;</span></span><br><span class="line">      canvasCtx.lineWidth = 2;</span><br><span class="line">      canvasCtx.moveTo(0, ecgData[0]);</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; ecgData.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> prevY = ecgData[i - <span class="number">1</span>];</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> currY = ecgData[i];</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> cp1X = i - <span class="number">0.5</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> cp1Y = prevY;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> cp2X = i;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> cp2Y = currY;</span></span><br><span class="line">        canvasCtx.bezierCurveTo(cp1X, cp1Y, cp2X, cp2Y, i, currY);</span><br><span class="line">      &#125;</span><br><span class="line">      canvasCtx.stroke();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 播放 / 暂停 按钮</span></span></span><br><span class="line"><span class="actionscript">    playBtn.addEventListener(<span class="string">"click"</span>, () =&gt; &#123;</span></span><br><span class="line">      setupAudioContext();</span><br><span class="line"></span><br><span class="line">      if (!isPlaying) &#123;</span><br><span class="line"><span class="javascript">        audioCtx.resume().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line">          audio.play();</span><br><span class="line"><span class="actionscript">          playBtn.textContent = <span class="string">"⏸️ 暂停"</span>;</span></span><br><span class="line"><span class="actionscript">          isPlaying = <span class="literal">true</span>;</span></span><br><span class="line"><span class="actionscript">          draw(); <span class="comment">// 开始动画循环</span></span></span><br><span class="line">        &#125;);</span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">        audio.pause();</span><br><span class="line"><span class="actionscript">        playBtn.textContent = <span class="string">"▶️ 播放"</span>;</span></span><br><span class="line"><span class="actionscript">        isPlaying = <span class="literal">false</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 音乐结束时重置按钮</span></span></span><br><span class="line"><span class="javascript">    audio.onended = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">      playBtn.textContent = <span class="string">"▶️ 播放"</span>;</span></span><br><span class="line"><span class="actionscript">      isPlaying = <span class="literal">false</span>;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="满屏气球特效"><a href="#满屏气球特效" class="headerlink" title="满屏气球特效"></a>满屏气球特效</h3><h4 id="案例图片效果-1"><a href="#案例图片效果-1" class="headerlink" title="案例图片效果"></a>案例图片效果</h4><!-- <img src="/img/loading.gif" class="lazyload" data-src="前端代码片段/1740881813739.png"  alt="满屏特效" style="max-width: none; height:300px;"> -->

<p><code>&lt;img src=&quot;/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/1740881813739.png&quot; alt=&quot;满屏气球特效&quot; title=&quot;满屏气球特效&quot; style=&quot;max-width: none; height:300px;&quot;&gt;</code></p>
<h4 id="案例代码-4"><a href="#案例代码-4" class="headerlink" title="案例代码"></a>案例代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>气球漂浮特效<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="comment">/* 气球容器 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-id">#balloon-container</span> &#123;</span></span><br><span class="line">            position: fixed;</span><br><span class="line">            top: 0;</span><br><span class="line">            left: 0;</span><br><span class="line">            width: 100vw;</span><br><span class="line">            height: 100vh;</span><br><span class="line">            pointer-events: none;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            z-index: 999;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="comment">/* 气球样式 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.balloon</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">            animation: float 8s ease-in-out infinite;</span><br><span class="line">            width: 80px;</span><br><span class="line">            height: 100px;</span><br><span class="line"><span class="css">            <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.3s</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.balloon-img</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            object-fit: contain;</span><br><span class="line">            image-rendering: crisp-edges;</span><br><span class="line">            pointer-events: auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="keyword">@keyframes</span> float &#123;</span></span><br><span class="line"></span><br><span class="line">            0%,</span><br><span class="line">            100% &#123;</span><br><span class="line">                transform: translateX(-5px) translateY(0) rotate(-3deg);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            50% &#123;</span><br><span class="line">                transform: translateX(5px) translateY(-10px) rotate(3deg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="comment">/* 垂直按钮组 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.control-panel</span> &#123;</span></span><br><span class="line">            position: fixed;</span><br><span class="line">            bottom: 20px;</span><br><span class="line">            right: 20px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            gap: 8px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(255, 255, 255, 0<span class="selector-class">.9</span>);</span></span><br><span class="line">            padding: 12px;</span><br><span class="line">            border-radius: 20px;</span><br><span class="line"><span class="css">            <span class="selector-tag">box-shadow</span>: 0 4<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.1</span>);</span></span><br><span class="line">            backdrop-filter: blur(5px);</span><br><span class="line">            z-index: 1000;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.control-btn</span> &#123;</span></span><br><span class="line">            padding: 10px 20px;</span><br><span class="line">            border: none;</span><br><span class="line">            border-radius: 15px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line"><span class="css">            <span class="selector-tag">transition</span>: <span class="selector-tag">all</span> 0<span class="selector-class">.3s</span>;</span></span><br><span class="line">            font-family: Arial, sans-serif;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">            justify-content: center;</span><br><span class="line">            gap: 6px;</span><br><span class="line">            width: 100px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#startBtn</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#4CAF50</span>;</span></span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#pauseBtn</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#FF9800</span>;</span></span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#clearBtn</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#f44336</span>;</span></span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.control-btn</span><span class="selector-pseudo">:disabled</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">opacity</span>: 0<span class="selector-class">.6</span>;</span></span><br><span class="line">            cursor: not-allowed;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="comment">/* 移动端适配 */</span></span></span><br><span class="line"><span class="css">        <span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">480px</span>) &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.control-panel</span> &#123;</span></span><br><span class="line">                bottom: 10px;</span><br><span class="line">                right: 10px;</span><br><span class="line">                padding: 8px;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.control-btn</span> &#123;</span></span><br><span class="line">                width: 80px;</span><br><span class="line">                padding: 8px 12px;</span><br><span class="line">                font-size: 12px;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"balloon-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 垂直按钮组 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control-panel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"startBtn"</span> <span class="attr">class</span>=<span class="string">"control-btn"</span>&gt;</span>▶️ 开启<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"pauseBtn"</span> <span class="attr">class</span>=<span class="string">"control-btn"</span>&gt;</span>⏸️ 暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"clearBtn"</span> <span class="attr">class</span>=<span class="string">"control-btn"</span>&gt;</span>🧹 清空<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 状态控制变量</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> isGenerating = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> animationInterval;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> balloons = [];</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> balloonImages = [</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67c27a04d0e0a243d4087fd9.png'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67c2d416d0e0a243d4090fce.png'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67c29485d0e0a243d408a3c4.png'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67c29485d0e0a243d408a3c5.png'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67c29486d0e0a243d408a3c6.png'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67c2d416d0e0a243d4090fd1.png'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67c27a3dd0e0a243d4087fdd.png'</span>,</span></span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 初始化按钮状态</span></span></span><br><span class="line">        updateButtonStates();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 功能函数</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">startGeneration</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">            if (!isGenerating) &#123;</span><br><span class="line"><span class="actionscript">                isGenerating = <span class="literal">true</span>;</span></span><br><span class="line">                animationInterval = setInterval(createBalloon, 800);</span><br><span class="line">                updateButtonStates();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">pauseGeneration</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            isGenerating = <span class="literal">false</span>;</span></span><br><span class="line">            clearInterval(animationInterval);</span><br><span class="line">            updateButtonStates();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">clearAll</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">            pauseGeneration();</span><br><span class="line"><span class="javascript">            balloons.forEach(<span class="function"><span class="params">balloon</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                balloon.style.transition = <span class="string">'opacity 0.3s'</span>;</span></span><br><span class="line"><span class="actionscript">                balloon.style.opacity = <span class="string">'0'</span>;</span></span><br><span class="line"><span class="javascript">                setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> balloon.remove(), <span class="number">300</span>);</span></span><br><span class="line">            &#125;);</span><br><span class="line">            balloons.length = 0;</span><br><span class="line">            updateButtonStates();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 状态更新函数</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">updateButtonStates</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'startBtn'</span>).disabled = isGenerating;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'pauseBtn'</span>).disabled = !isGenerating;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'clearBtn'</span>).disabled = balloons.length === <span class="number">0</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 创建气球</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">createBalloon</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> wrapper = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">            wrapper.className = <span class="string">'balloon'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> img = <span class="keyword">new</span> Image();</span></span><br><span class="line"><span class="actionscript">            img.className = <span class="string">'balloon-img'</span>;</span></span><br><span class="line"><span class="javascript">            img.src = balloonImages[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * balloonImages.length)];</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> width = <span class="number">60</span> + <span class="built_in">Math</span>.random() * <span class="number">60</span>;</span></span><br><span class="line"><span class="javascript">            wrapper.style.width = <span class="string">`<span class="subst">$&#123;width&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">            wrapper.style.height = <span class="string">`<span class="subst">$&#123;width * <span class="number">1.2</span>&#125;</span>px`</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            wrapper.style.left = <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.random() * (<span class="built_in">window</span>.innerWidth - width)&#125;</span>px`</span>;</span></span><br><span class="line"><span class="actionscript">            wrapper.style.bottom = <span class="string">'-150px'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">            wrapper.addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span></span><br><span class="line">                removeBalloon(wrapper);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            wrapper.appendChild(img);</span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'balloon-container'</span>).appendChild(wrapper);</span></span><br><span class="line">            balloons.push(wrapper);</span><br><span class="line">            startBalloonAnimation(wrapper);</span><br><span class="line">            updateButtonStates();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 气球动画</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">startBalloonAnimation</span><span class="params">(balloon)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> yPos = <span class="number">-150</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> startX = <span class="built_in">parseFloat</span>(balloon.style.left);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> amplitude = <span class="number">80</span> + <span class="built_in">Math</span>.random() * <span class="number">50</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> speed = <span class="number">0.8</span> + <span class="built_in">Math</span>.random() * <span class="number">1.2</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span> (!isGenerating) <span class="keyword">return</span>;</span></span><br><span class="line"></span><br><span class="line">                yPos += speed;</span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> xPos = startX + <span class="built_in">Math</span>.sin(yPos * <span class="number">0.02</span>) * amplitude;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (yPos &gt; <span class="built_in">window</span>.innerHeight + <span class="number">200</span>) &#123;</span></span><br><span class="line">                    removeBalloon(balloon);</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                balloon.style.bottom = <span class="string">`<span class="subst">$&#123;yPos&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">                balloon.style.left = <span class="string">`<span class="subst">$&#123;xPos&#125;</span>px`</span>;</span></span><br><span class="line">                requestAnimationFrame(animate);</span><br><span class="line">            &#125;</span><br><span class="line">            animate();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 移除气球</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">removeBalloon</span><span class="params">(balloon)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            balloon.style.transition = <span class="string">'transform 0.5s, opacity 0.5s'</span>;</span></span><br><span class="line"><span class="actionscript">            balloon.style.transform = <span class="string">'scale(1.5)'</span>;</span></span><br><span class="line"><span class="actionscript">            balloon.style.opacity = <span class="string">'0'</span>;</span></span><br><span class="line"><span class="javascript">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line">                balloon.remove();</span><br><span class="line">                balloons.splice(balloons.indexOf(balloon), 1);</span><br><span class="line">                updateButtonStates();</span><br><span class="line">            &#125;, 500);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 事件监听</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'startBtn'</span>).addEventListener(<span class="string">'click'</span>, startGeneration);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'pauseBtn'</span>).addEventListener(<span class="string">'click'</span>, pauseGeneration);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'clearBtn'</span>).addEventListener(<span class="string">'click'</span>, clearAll);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 窗口调整适配</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">            balloons.forEach(<span class="function"><span class="params">balloon</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> currentX = <span class="built_in">parseFloat</span>(balloon.style.left);</span></span><br><span class="line"><span class="javascript">                balloon.style.left = <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.min(currentX, <span class="built_in">window</span>.innerWidth - <span class="built_in">parseFloat</span>(balloon.style.width))&#125;</span>px`</span>;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="实现自由拖拽效果"><a href="#实现自由拖拽效果" class="headerlink" title="实现自由拖拽效果"></a>实现自由拖拽效果</h3><p>1.创建Demo.html文件<br>示例代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"static/css/style.css"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">media</span>=<span class="string">"all"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入自由拖拽的JS库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/sortablejs@1.13.0/Sortable.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"listdhsl"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"sortable-list"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://laolion.com/"</span> <span class="attr">title</span>=<span class="string">"我是一只历经沧桑的老狮。（Typeche付费Joe主题）"</span>&gt;</span>老狮的梦<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://ae.js.cn/"</span> <span class="attr">title</span>=<span class="string">"记录与学习前端知识。（Joe主题作者）"</span>&gt;</span>Joe的博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://9i3.cn/"</span> <span class="attr">title</span>=<span class="string">"Typecho合集站 - 用爱发电,始于2021"</span>&gt;</span>Typecho合集站<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.dongfang.name/"</span> <span class="attr">title</span>=<span class="string">"行吟游子的个人独立博客！"</span>&gt;</span>门影塘畔<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.cisharp.com/"</span> <span class="attr">title</span>=<span class="string">"一个分享心得的网站_程序员_个人博客！"</span>&gt;</span>一缕清风<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.aiyo99.com/"</span> <span class="attr">title</span>=<span class="string">"罗小黑-（便携小电视）"</span>&gt;</span>罗小黑<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://racns.com/"</span> <span class="attr">title</span>=<span class="string">"兔子爱上胡萝卜-（可语音浮动看板娘）"</span>&gt;</span>萌卜兔's<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.gmit.vip/"</span> <span class="attr">title</span>=<span class="string">"故梦吖 ，记录生活点点滴滴（很好看的看板娘）"</span>&gt;</span>故梦吖<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sortable-item"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://love2wind.cn/"</span> <span class="attr">title</span>=<span class="string">"软件资源代码分享博客"</span>&gt;</span>涅槃博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">		<span class="comment">// 自由拖拽效果</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> sortableLists = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.sortable-list'</span>);</span></span><br><span class="line"><span class="actionscript">		sortableLists.forEach(<span class="function"><span class="keyword">function</span> <span class="params">(sortableList)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">			<span class="keyword">var</span> sortable = Sortable.create(sortableList, &#123;</span></span><br><span class="line">				animation: 150,</span><br><span class="line"><span class="actionscript">				handle: <span class="string">'.sortable-item'</span>,</span></span><br><span class="line"><span class="actionscript">				draggable: <span class="string">'.sortable-item'</span>,</span></span><br><span class="line"><span class="actionscript">				onEnd: <span class="function"><span class="keyword">function</span> <span class="params">(evt)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">					<span class="comment">// 获取排序后的列表项</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">var</span> items = <span class="built_in">Array</span>.from(sortableList.children);</span></span><br><span class="line"><span class="actionscript">					<span class="comment">// 创建一个新的文档片段</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span></span><br><span class="line"><span class="actionscript">					<span class="comment">// 将排序后的列表项添加到文档片段中</span></span></span><br><span class="line"><span class="actionscript">					items.forEach(<span class="function"><span class="keyword">function</span> <span class="params">(item)</span> </span>&#123;</span></span><br><span class="line">						fragment.appendChild(item);</span><br><span class="line">					&#125;);</span><br><span class="line"><span class="actionscript">					<span class="comment">// 清空原有的列表项</span></span></span><br><span class="line"><span class="actionscript">					sortableList.innerHTML = <span class="string">''</span>;</span></span><br><span class="line"><span class="actionscript">					<span class="comment">// 将文档片段添加回原来的位置</span></span></span><br><span class="line">					sortableList.appendChild(fragment);</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.新建style.css样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 自由拖拽样式 */</span></span><br><span class="line"><span class="selector-class">.sortable-list</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: none;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sortable-item</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f1f1f1</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: move;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="鼠标跟随效果"><a href="#鼠标跟随效果" class="headerlink" title="鼠标跟随效果"></a>鼠标跟随效果</h3><h4 id="案例一：简单垂直下挂效果"><a href="#案例一：简单垂直下挂效果" class="headerlink" title="案例一：简单垂直下挂效果"></a>案例一：简单垂直下挂效果</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>鼠标跟随-垂直下挂效果<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        html, body &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            overflow: hidden;</span><br><span class="line"><span class="css">            <span class="selector-tag">cursor</span>: <span class="selector-tag">none</span> !<span class="selector-tag">important</span>; <span class="comment">/* 双重保险 */</span></span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.cursor</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            background: url('https://img.imgdb.cn/item/60697b638322e6675c5e7e25.png') no-repeat center;</span><br><span class="line">            background-size: contain;</span><br><span class="line">            pointer-events: none;</span><br><span class="line">            z-index: 1000;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.leaf</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 30px;</span><br><span class="line">            height: 30px;</span><br><span class="line">            background: url('https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d95.gif') no-repeat center;</span><br><span class="line">            background-size: contain;</span><br><span class="line">            pointer-events: none;</span><br><span class="line"><span class="css">            <span class="selector-tag">opacity</span>: 0<span class="selector-class">.8</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.2s</span> <span class="selector-tag">ease-out</span>, <span class="selector-tag">opacity</span> 0<span class="selector-class">.5s</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cursor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> cursor = <span class="built_in">document</span>.querySelector(<span class="string">'.cursor'</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> leaves = [];</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> leafCount = <span class="number">5</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; leafCount; i++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> leaf = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">            leaf.classList.add(<span class="string">'leaf'</span>);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.body.appendChild(leaf);</span></span><br><span class="line">            leaves.push(leaf);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.addEventListener(<span class="string">'mousemove'</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">            cursor.style.left = <span class="string">`<span class="subst">$&#123;e.clientX - <span class="number">15</span>&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">            cursor.style.top = <span class="string">`<span class="subst">$&#123;e.clientY - <span class="number">40</span>&#125;</span>px`</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            leaves.forEach(<span class="function">(<span class="params">leaf, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    leaf.style.left = <span class="string">`<span class="subst">$&#123;e.clientX - <span class="number">15</span>&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">                    leaf.style.top = <span class="string">`<span class="subst">$&#123;e.clientY + index * <span class="number">10</span>&#125;</span>px`</span>;</span></span><br><span class="line">                    leaf.style.opacity = 1 - index * 0.15;</span><br><span class="line">                &#125;, index * 50);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="案例二：支持多张图片下挂"><a href="#案例二：支持多张图片下挂" class="headerlink" title="案例二：支持多张图片下挂"></a>案例二：支持多张图片下挂</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>鼠标跟随-叶子依次变小效果<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        html, body &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            overflow: hidden;</span><br><span class="line"><span class="css">            <span class="selector-tag">cursor</span>: <span class="selector-tag">none</span> !<span class="selector-tag">important</span>; <span class="comment">/* 隐藏默认鼠标 */</span></span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f8f8f8</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.cursor</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 35px;</span><br><span class="line">            height: 35px;</span><br><span class="line">            background: url('https://img.imgdb.cn/item/60697b638322e6675c5e7e25.png') no-repeat center;</span><br><span class="line">            background-size: contain;</span><br><span class="line">            pointer-events: none;</span><br><span class="line">            z-index: 1000;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.leaf</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            pointer-events: none;</span><br><span class="line"><span class="css">            <span class="selector-tag">opacity</span>: 0<span class="selector-class">.8</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.2s</span> <span class="selector-tag">ease-out</span>, <span class="selector-tag">opacity</span> 0<span class="selector-class">.5s</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cursor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> cursor = <span class="built_in">document</span>.querySelector(<span class="string">'.cursor'</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> leaves = [];</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> leafCount = <span class="number">5</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 叶子图片路径数组（可以换成你自己的）</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> leafImages = [</span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d95.gif'</span>,  <span class="comment">// 第一片叶子（最大）</span></span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d96.gif'</span>, <span class="comment">// 第二片叶子</span></span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d97.gif'</span>,  <span class="comment">// 第三片叶子</span></span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67ab6506d0e0a243d4fe6d91.gif'</span>,<span class="comment">// 第四片叶子</span></span></span><br><span class="line"><span class="actionscript">            <span class="string">'https://pic1.imgdb.cn/item/67ab6506d0e0a243d4fe6d91.gif'</span> <span class="comment">// 第五片叶子（最小）</span></span></span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 生成叶子</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; leafCount; i++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> leaf = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">            leaf.classList.add(<span class="string">'leaf'</span>);</span></span><br><span class="line"><span class="javascript">            leaf.style.width = <span class="string">`<span class="subst">$&#123;<span class="number">40</span> - i * <span class="number">8</span>&#125;</span>px`</span>; <span class="comment">// 依次缩小</span></span></span><br><span class="line"><span class="javascript">            leaf.style.height = <span class="string">`<span class="subst">$&#123;<span class="number">40</span> - i * <span class="number">8</span>&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">            leaf.style.background = <span class="string">`url('<span class="subst">$&#123;leafImages[i]&#125;</span>') no-repeat center`</span>;</span></span><br><span class="line"><span class="actionscript">            leaf.style.backgroundSize = <span class="string">'contain'</span>;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.body.appendChild(leaf);</span></span><br><span class="line">            leaves.push(leaf);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 鼠标移动事件</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.addEventListener(<span class="string">'mousemove'</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">            cursor.style.left = <span class="string">`<span class="subst">$&#123;e.clientX - <span class="number">25</span>&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">            cursor.style.top = <span class="string">`<span class="subst">$&#123;e.clientY - <span class="number">35</span>&#125;</span>px`</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            leaves.forEach(<span class="function">(<span class="params">leaf, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    leaf.style.left = <span class="string">`<span class="subst">$&#123;e.clientX - <span class="number">30</span>&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">                    leaf.style.top = <span class="string">`<span class="subst">$&#123;e.clientY + index * <span class="number">25</span>&#125;</span>px`</span>;</span></span><br><span class="line">                    leaf.style.opacity = 1 - index * 0.15;</span><br><span class="line">                &#125;, index * 50);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="案例三：神龙摆尾效果"><a href="#案例三：神龙摆尾效果" class="headerlink" title="案例三：神龙摆尾效果"></a>案例三：神龙摆尾效果</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>鼠标跟随-神龙摆尾效果<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    html, body &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      cursor: none;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#f8f8f8</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.cursor</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      width: 35px;</span><br><span class="line">      height: 35px;</span><br><span class="line">      background: url('https://img.imgdb.cn/item/60697b638322e6675c5e7e25.png') no-repeat center;</span><br><span class="line">      background-size: contain;</span><br><span class="line">      pointer-events: none;</span><br><span class="line">      z-index: 1000;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.leaf</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      pointer-events: none;</span><br><span class="line"><span class="css">      <span class="selector-tag">opacity</span>: 0<span class="selector-class">.9</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cursor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> cursor = <span class="built_in">document</span>.querySelector(<span class="string">'.cursor'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> leaves = [];<span class="comment">// 存储所有叶子的DOM元素</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> leafCount = <span class="number">6</span>;<span class="comment">// 叶子数量</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 叶子图片地址数组</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> leafImages = [</span></span><br><span class="line"><span class="actionscript">      <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d95.gif'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d96.gif'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d97.gif'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'https://pic1.imgdb.cn/item/67ab6506d0e0a243d4fe6d91.gif'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d96.gif'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'https://pic1.imgdb.cn/item/67ab6507d0e0a243d4fe6d95.gif'</span></span></span><br><span class="line">    ];</span><br><span class="line"><span class="actionscript">    <span class="comment">// 叶子状态数组，每片叶子都存储其当前坐标、目标坐标和速度</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> leafStates = [];</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 初始化叶子</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; leafCount; i++) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> leaf = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">      leaf.classList.add(<span class="string">'leaf'</span>);<span class="comment">// 创建叶子元素</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 设置叶子的尺寸，后面的叶子逐渐变小</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> size = <span class="number">40</span> - i * <span class="number">5</span>;</span></span><br><span class="line"><span class="javascript">      leaf.style.width = <span class="string">`<span class="subst">$&#123;size&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">      leaf.style.height = <span class="string">`<span class="subst">$&#123;size&#125;</span>px`</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 设置叶子的背景图片</span></span></span><br><span class="line"><span class="javascript">      leaf.style.background = <span class="string">`url('<span class="subst">$&#123;leafImages[i]&#125;</span>') no-repeat center`</span>;</span></span><br><span class="line"><span class="actionscript">      leaf.style.backgroundSize = <span class="string">'contain'</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 将叶子添加到页面</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.appendChild(leaf);</span></span><br><span class="line">      leaves.push(leaf);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 记录每片叶子的初始状态</span></span></span><br><span class="line">      leafStates.push(&#123;</span><br><span class="line"><span class="javascript">        current: &#123; <span class="attr">x</span>: <span class="built_in">window</span>.innerWidth / <span class="number">2</span>, <span class="attr">y</span>: <span class="built_in">window</span>.innerHeight / <span class="number">2</span> &#125;,<span class="comment">// 当前坐标</span></span></span><br><span class="line"><span class="javascript">        target: &#123; <span class="attr">x</span>: <span class="built_in">window</span>.innerWidth / <span class="number">2</span>, <span class="attr">y</span>: <span class="built_in">window</span>.innerHeight / <span class="number">2</span> + i * <span class="number">8</span> &#125;, <span class="comment">// 目标坐标，默认向下偏移</span></span></span><br><span class="line"><span class="actionscript">        velocity: &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125; <span class="comment">// 速度</span></span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 记录鼠标位置，默认居中</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> mouseX = <span class="built_in">window</span>.innerWidth / <span class="number">2</span>, mouseY = <span class="built_in">window</span>.innerHeight / <span class="number">2</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 初始光标位置（居中）</span></span></span><br><span class="line"><span class="javascript">    cursor.style.left = <span class="string">`<span class="subst">$&#123;mouseX - <span class="number">15</span>&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">    cursor.style.top = <span class="string">`<span class="subst">$&#123;mouseY - <span class="number">15</span>&#125;</span>px`</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 监听鼠标移动事件</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">'mousemove'</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 更新鼠标位置，考虑滚动偏移量</span></span></span><br><span class="line"><span class="javascript">      mouseX = e.clientX + <span class="built_in">window</span>.scrollX;</span></span><br><span class="line"><span class="javascript">      mouseY = e.clientY + <span class="built_in">window</span>.scrollY;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 更新自定义光标位置（默认隐藏原鼠标）</span></span></span><br><span class="line"><span class="javascript">      cursor.style.left = <span class="string">`<span class="subst">$&#123;mouseX - <span class="number">15</span>&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">      cursor.style.top = <span class="string">`<span class="subst">$&#123;mouseY - <span class="number">15</span>&#125;</span>px`</span>;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 物理动画参数</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> stiffness = <span class="number">0.15</span>;  <span class="comment">// 弹性系数，值越大叶子跟随鼠标越快</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> damping = <span class="number">0.75</span>;    <span class="comment">// 阻尼系数，决定叶子的惯性拖尾</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> delayFactor = <span class="number">0.2</span>; <span class="comment">// 叶子之间的延迟感（未使用，但可用于增加时间差）</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 动画循环</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; leafCount; i++) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> state = leafStates[i];</span></span><br><span class="line"></span><br><span class="line">        if (i === 0) &#123;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 第一片叶子直接跟随鼠标，但向下偏移 15px，使其看起来挂在鼠标下面</span></span></span><br><span class="line">          state.target.x = mouseX + 12;</span><br><span class="line">          state.target.y = mouseY + 15;</span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 其余叶子跟随前一片叶子的“过去位置”，并添加一定的默认偏移</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> prevState = leafStates[i - <span class="number">1</span>];</span></span><br><span class="line"><span class="actionscript">          state.target.x = prevState.current.x - (i * (<span class="number">-2</span>));<span class="comment">// 水平位置略微右偏移</span></span></span><br><span class="line"><span class="actionscript">          state.target.y = prevState.current.y + (i * <span class="number">6</span>); <span class="comment">// 竖直方向形成拖尾</span></span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 计算加速度（弹簧模型）</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> dx = state.target.x - state.current.x;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> dy = state.target.y - state.current.y;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> ax = dx * stiffness;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> ay = dy * stiffness;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 更新速度，并加入阻尼效果</span></span></span><br><span class="line">        state.velocity.x = (state.velocity.x + ax) * damping;</span><br><span class="line">        state.velocity.y = (state.velocity.y + ay) * damping;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 更新当前位置</span></span></span><br><span class="line">        state.current.x += state.velocity.x;</span><br><span class="line">        state.current.y += state.velocity.y;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 应用位置到叶子元素，考虑滚动偏移量</span></span></span><br><span class="line"><span class="javascript">        leaves[i].style.left = <span class="string">`<span class="subst">$&#123;state.current.x&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">        leaves[i].style.top = <span class="string">`<span class="subst">$&#123;state.current.y&#125;</span>px`</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="actionscript">      <span class="comment">// 继续下一帧动画</span></span></span><br><span class="line">      requestAnimationFrame(animate);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 启动动画</span></span></span><br><span class="line">    animate();</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="悬浮划词搜索效果"><a href="#悬浮划词搜索效果" class="headerlink" title="悬浮划词搜索效果"></a>悬浮划词搜索效果</h3><h4 id="案例一：简陋版"><a href="#案例一：简陋版" class="headerlink" title="案例一：简陋版"></a>案例一：简陋版</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>悬浮划词搜索-简陋版<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    body &#123;</span><br><span class="line">      font-family: sans-serif;</span><br><span class="line">      margin: 20px;</span><br><span class="line"><span class="css">      <span class="selector-tag">line-height</span>: 1<span class="selector-class">.6</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* 悬浮容器 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-id">#selectionPopup</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      display: none;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line">      padding: 5px;</span><br><span class="line">      z-index: 99999;</span><br><span class="line"><span class="css">      <span class="selector-tag">box-shadow</span>: 0 2<span class="selector-tag">px</span> 6<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.2</span>);</span></span><br><span class="line">      border-radius: 4px;</span><br><span class="line">      white-space: nowrap;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* 每个搜索按钮的样式 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.search-btn</span> &#123;</span></span><br><span class="line">      display: inline-flex;</span><br><span class="line">      align-items: center;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      width: 28px;</span><br><span class="line">      height: 28px;</span><br><span class="line">      margin: 0 4px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#f5f5f5</span>;</span></span><br><span class="line">      border-radius: 50%;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span>;</span></span><br><span class="line">      font-size: 16px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      text-decoration: none;</span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#333</span>;</span></span><br><span class="line">      vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.search-btn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#e6e6e6</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>划词搜索示例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  当你在此页面中用鼠标选中一段文字并松开鼠标后，会在选中区域下方弹出一个悬浮层，</span><br><span class="line">  里面包含多个图标按钮以及一个超链接图标）。</span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span>鼠标悬停在任意图标上时，会显示对应的名称提示（Tooltip）。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  测试文本：<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  - 网易云信大语言模型<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  - JavaScript 插件开发<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  - https://chat.deepseek.com/ <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  - Chrome 扩展<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  - 前端开发<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  - 后端开发<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  - AI 算法<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 悬浮层容器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"selectionPopup"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 包含 icon、name 两个字段，鼠标悬停时可通过 title 属性显示 name</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> searchEngines = [</span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'🔍'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'百度'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://www.baidu.com/s?wd='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'🅱️'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'Bing'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://www.bing.com/search?q='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'🤖'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'纳米AI搜索'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://www.n.cn/search?q='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'🌐'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'Google'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://www.google.com/search?q='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'🦆'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'DuckDuckGo'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://duckduckgo.com/?q='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'知'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'知乎'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://www.zhihu.com/search?q='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'🐙'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'GitHub'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://github.com/search?q='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'SO'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'Stack Overflow'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="string">'https://stackoverflow.com/search?q='</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">      icon: <span class="string">'🔗'</span>,</span></span><br><span class="line"><span class="actionscript">      name: <span class="string">'超链接'</span>,</span></span><br><span class="line"><span class="actionscript">      url: <span class="literal">null</span> <span class="comment">// 特殊处理</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> selectionPopup = <span class="built_in">document</span>.getElementById(<span class="string">'selectionPopup'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// 监听鼠标松开事件</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.addEventListener(<span class="string">'mouseup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 获取选中的文本</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> selection = <span class="built_in">window</span>.getSelection();</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> selectedText = selection.toString().trim();</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 如果没有选中文本，则隐藏悬浮层</span></span></span><br><span class="line">    if (!selectedText) &#123;</span><br><span class="line"><span class="actionscript">      selectionPopup.style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 如果有选中内容，则获取选中范围的位置信息</span></span></span><br><span class="line">    if (selection.rangeCount &gt; 0) &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> range = selection.getRangeAt(<span class="number">0</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> rect = range.getBoundingClientRect();</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 如果无法获取有效的矩形信息，也隐藏弹窗</span></span></span><br><span class="line">      if (!rect || (rect.width === 0 &amp;&amp; rect.height === 0)) &#123;</span><br><span class="line"><span class="actionscript">        selectionPopup.style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 计算弹窗应出现的位置（在所选文本下方，稍作偏移）</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> offsetY = <span class="number">8</span>; <span class="comment">// 在文本下方 8px 处</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> left = rect.left + <span class="built_in">window</span>.scrollX;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> top = rect.bottom + <span class="built_in">window</span>.scrollY + offsetY;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 设置弹窗位置</span></span></span><br><span class="line"><span class="actionscript">      selectionPopup.style.left = left + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="actionscript">      selectionPopup.style.top = top + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="actionscript">      selectionPopup.style.display = <span class="string">'block'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 清空之前的按钮</span></span></span><br><span class="line"><span class="actionscript">      selectionPopup.innerHTML = <span class="string">''</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 创建并插入各个搜索按钮</span></span></span><br><span class="line"><span class="javascript">      searchEngines.forEach(<span class="function"><span class="params">engine</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> btn = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span></span><br><span class="line"><span class="actionscript">        btn.className = <span class="string">'search-btn'</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 显示图标</span></span></span><br><span class="line">        btn.innerHTML = engine.icon;</span><br><span class="line"><span class="actionscript">        <span class="comment">// 设置鼠标悬停时显示的名称</span></span></span><br><span class="line">        btn.title = engine.name;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        btn.onclick = <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">          e.preventDefault(); <span class="comment">// 防止默认点击行为</span></span></span><br><span class="line">          if (engine.url) &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// 拼接搜索链接</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> finalUrl = engine.url + <span class="built_in">encodeURIComponent</span>(selectedText);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.open(finalUrl, <span class="string">'_blank'</span>);</span></span><br><span class="line"><span class="actionscript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 处理超链接图标的逻辑</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> linkUrl = selectedText;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 如果不包含 http:// 或 https://，则拼接 https://</span></span></span><br><span class="line">            if (</span><br><span class="line"><span class="actionscript">              !selectedText.startsWith(<span class="string">'http://'</span>) &amp;&amp;</span></span><br><span class="line"><span class="actionscript">              !selectedText.startsWith(<span class="string">'https://'</span>)</span></span><br><span class="line">            ) &#123;</span><br><span class="line"><span class="actionscript">              linkUrl = <span class="string">'https://'</span> + selectedText;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.open(linkUrl, <span class="string">'_blank'</span>);</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        selectionPopup.appendChild(btn);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// 如果点击页面其他地方，且不在悬浮层内部，则隐藏悬浮层</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.addEventListener(<span class="string">'mousedown'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line">    if (!selectionPopup.contains(e.target)) &#123;</span><br><span class="line"><span class="actionscript">      selectionPopup.style.display = <span class="string">'none'</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="边框动画效果"><a href="#边框动画效果" class="headerlink" title="边框动画效果"></a>边框动画效果</h3><h4 id="样例一：小球移动效果"><a href="#样例一：小球移动效果" class="headerlink" title="样例一：小球移动效果"></a>样例一：小球移动效果</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.greedy-snake-border</span> &#123;</span></span><br><span class="line">  position: relative;</span><br><span class="line">  border: 3px solid transparent;</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  margin: 20px;</span><br><span class="line"><span class="css">  <span class="selector-tag">background</span>: <span class="selector-id">#f0f0f0</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="comment">/* 彩虹边框层 */</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.greedy-snake-border</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">  content: "";</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: -3px;</span><br><span class="line">  left: -3px;</span><br><span class="line">  right: -3px;</span><br><span class="line">  bottom: -3px;</span><br><span class="line">  background: conic-gradient(</span><br><span class="line"><span class="css">    <span class="selector-id">#ff0000</span>, <span class="selector-id">#ff7300</span>, <span class="selector-id">#fffb00</span>, <span class="selector-id">#48ff00</span>,</span></span><br><span class="line"><span class="css">    <span class="selector-id">#00ffd5</span>, <span class="selector-id">#002bff</span>, <span class="selector-id">#7a00ff</span>, <span class="selector-id">#ff00c8</span>, <span class="selector-id">#ff0000</span></span></span><br><span class="line">  );</span><br><span class="line">  animation: rotate 3s linear infinite;</span><br><span class="line">  border-radius: inherit;</span><br><span class="line">  z-index: 0;</span><br><span class="line">  mask: </span><br><span class="line"><span class="css">    <span class="selector-tag">linear-gradient</span>(<span class="selector-id">#000</span> 0 0) <span class="selector-tag">content-box</span>,</span></span><br><span class="line"><span class="css">    <span class="selector-tag">linear-gradient</span>(<span class="selector-id">#000</span> 0 0);</span></span><br><span class="line">  mask-composite: exclude;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="comment">/* 光点动画修正 */</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.greedy-snake-border</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">  content: "";</span><br><span class="line">  position: absolute;</span><br><span class="line">  width: 16px;</span><br><span class="line">  height: 16px;</span><br><span class="line"><span class="css">  <span class="selector-tag">background</span>: <span class="selector-id">#ff4757</span>;</span></span><br><span class="line">  border-radius: 50%;</span><br><span class="line"><span class="css">  <span class="selector-tag">filter</span>: <span class="selector-tag">drop-shadow</span>(0 0 8<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(255,71,87,0<span class="selector-class">.8</span>));</span></span><br><span class="line">  animation: snakeMove 3s linear infinite;</span><br><span class="line">  z-index: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="comment">/* 关键帧路径修正 */</span></span></span><br><span class="line"><span class="css"><span class="keyword">@keyframes</span> snakeMove &#123;</span></span><br><span class="line">  0% &#123;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line"><span class="css">    <span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(0, 0); <span class="comment">/* 初始位置无偏移 */</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  25% &#123;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 100%;</span><br><span class="line"><span class="css">    <span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(<span class="selector-tag">-100</span>%, 0); <span class="comment">/* 向右移动时左拉自身宽度 */</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    top: 100%;</span><br><span class="line">    left: 100%;</span><br><span class="line"><span class="css">    <span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(<span class="selector-tag">-100</span>%, <span class="selector-tag">-100</span>%); <span class="comment">/* 向下移动时上拉自身高度 */</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  75% &#123;</span><br><span class="line">    top: 100%;</span><br><span class="line">    left: 0;</span><br><span class="line"><span class="css">    <span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(0, <span class="selector-tag">-100</span>%); <span class="comment">/* 向左移动时上拉高度 */</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    transform: translate(0, 0);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="keyword">@keyframes</span> rotate &#123; 100% &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>); &#125; &#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"greedy-snake-border"</span> <span class="attr">style</span>=<span class="string">"width: 300px; height: 150px; padding: 20px;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>内容区域<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>测试按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="样例二：贪吃蛇基础效果"><a href="#样例二：贪吃蛇基础效果" class="headerlink" title="样例二：贪吃蛇基础效果"></a>样例二：贪吃蛇基础效果</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>贪吃蛇边框动画演示<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 公共容器样式 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.greedy-snake-border</span> &#123;</span></span><br><span class="line">      position: relative;</span><br><span class="line">      border: 3px solid transparent;</span><br><span class="line">      border-radius: 8px;</span><br><span class="line">      margin: 20px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#f0f0f0</span>;</span></span><br><span class="line">      overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* 彩虹边框（静态，使用 conic-gradient 与 mask 实现仅显示边框区域） */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.greedy-snake-border</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">      content: "";</span><br><span class="line">      position: absolute;</span><br><span class="line">      top: -3px;</span><br><span class="line">      left: -3px;</span><br><span class="line">      right: -3px;</span><br><span class="line">      bottom: -3px;</span><br><span class="line">      z-index: 0;</span><br><span class="line">      background: conic-gradient(</span><br><span class="line"><span class="css">        <span class="selector-id">#ff0000</span>, <span class="selector-id">#ff7300</span>, <span class="selector-id">#fffb00</span>, <span class="selector-id">#48ff00</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#00ffd5</span>, <span class="selector-id">#002bff</span>, <span class="selector-id">#7a00ff</span>, <span class="selector-id">#ff00c8</span>, <span class="selector-id">#ff0000</span></span></span><br><span class="line">      );</span><br><span class="line">      border-radius: inherit;</span><br><span class="line">      animation: rotate 3s linear infinite;</span><br><span class="line"><span class="css">      <span class="selector-tag">mask</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-id">#000</span> 0 0) <span class="selector-tag">content-box</span>, <span class="selector-tag">linear-gradient</span>(<span class="selector-id">#000</span> 0 0);</span></span><br><span class="line">      mask-composite: exclude;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="keyword">@keyframes</span> rotate &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">to</span> &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>); &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"><span class="css">    <span class="comment">/* ---------------- CSS 版本 ---------------- */</span></span></span><br><span class="line"><span class="css">    <span class="comment">/* 仅一个动态小点沿边框运动 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.css-version</span> <span class="selector-class">.snake</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      width: 14px;</span><br><span class="line">      height: 14px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">circle</span>, <span class="selector-id">#ff0000</span> 30%, <span class="selector-id">#ff7300</span> 80%);</span></span><br><span class="line">      border-radius: 50%;</span><br><span class="line"><span class="css">      <span class="selector-tag">filter</span>: <span class="selector-tag">drop-shadow</span>(0 0 5<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(255, 50, 50, 0<span class="selector-class">.8</span>));</span></span><br><span class="line">      animation: snakeMove 3s linear infinite;</span><br><span class="line">      z-index: 1;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="keyword">@keyframes</span> snakeMove &#123;</span></span><br><span class="line"><span class="css">      0%   &#123; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">100%</span>, -<span class="number">100%</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>); &#125;</span></span><br><span class="line"><span class="css">      25%  &#123; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">100%</span>; <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0</span>, -<span class="number">100%</span>) <span class="built_in">scale</span>(<span class="number">1</span>); &#125;</span></span><br><span class="line"><span class="css">      50%  &#123; <span class="attribute">top</span>: <span class="number">100%</span>; <span class="attribute">left</span>: <span class="number">100%</span>; <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0</span>, <span class="number">0</span>) <span class="built_in">scale</span>(<span class="number">0.8</span>); &#125;</span></span><br><span class="line"><span class="css">      75%  &#123; <span class="attribute">top</span>: <span class="number">100%</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">100%</span>, <span class="number">0</span>) <span class="built_in">scale</span>(<span class="number">1</span>); &#125;</span></span><br><span class="line"><span class="css">      100% &#123; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">100%</span>, -<span class="number">100%</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>); &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"><span class="css">    <span class="comment">/* ---------------- JS 版本 ---------------- */</span></span></span><br><span class="line"><span class="css">    <span class="comment">/* 蛇段样式 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.snake-segment</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      width: 14px;</span><br><span class="line">      height: 14px;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line"><span class="css">      <span class="selector-tag">filter</span>: <span class="selector-tag">drop-shadow</span>(0 0 5<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.5</span>));</span></span><br><span class="line">      z-index: 1;</span><br><span class="line">      left: 0;</span><br><span class="line">      top: 0;</span><br><span class="line">      transform: translate(-50%, -50%);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>CSS 版本贪吃蛇边框动画<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"greedy-snake-border css-version"</span> <span class="attr">style</span>=<span class="string">"width:300px; height:150px;"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 动态小点（蛇头，头大尾小效果通过 scale 实现） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"snake"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"position: relative; z-index: 2; padding:10px;"</span>&gt;</span>CSS版本：内容区域<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>JS 版本贪吃蛇边框动画<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"jsContainer"</span> <span class="attr">class</span>=<span class="string">"greedy-snake-border"</span> <span class="attr">style</span>=<span class="string">"width:300px; height:150px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"position: relative; z-index: 2; padding:10px;"</span>&gt;</span>JS版本：内容区域<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// JS版本：利用多个蛇段实现贪吃蛇效果</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'jsContainer'</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> numSegments = <span class="number">10</span>; <span class="comment">// 蛇段数量，可根据需要调整</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> segments = [];</span></span><br><span class="line">  </span><br><span class="line"><span class="actionscript">      <span class="comment">// 创建蛇段（蛇头为 segments[0]，后面依次递减大小）</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numSegments; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> seg = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">        seg.classList.add(<span class="string">'snake-segment'</span>);</span></span><br><span class="line">        container.appendChild(seg);</span><br><span class="line">        segments.push(seg);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> startTime = <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> speed = <span class="number">100</span>; <span class="comment">// 每秒移动像素数，可根据需要调整</span></span></span><br><span class="line">  </span><br><span class="line"><span class="actionscript">      <span class="comment">// 根据当前t值（沿周长的像素距离）计算出在矩形边框上的坐标</span></span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">getPerimeterCoord</span><span class="params">(t, width, height)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> perimeter = <span class="number">2</span> * (width + height);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> pos = t % perimeter;</span></span><br><span class="line">        if (pos &lt; width) &#123;</span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123; x: pos, y: <span class="number">0</span> &#125;;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pos -= width;</span><br><span class="line">        if (pos &lt; height) &#123;</span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123; x: width, y: pos &#125;;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pos -= height;</span><br><span class="line">        if (pos &lt; width) &#123;</span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123; x: width - pos, y: height &#125;;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pos -= width;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123; x: <span class="number">0</span>, y: height - pos &#125;;</span></span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line"><span class="actionscript">      <span class="comment">// 动画函数</span></span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">(timestamp)</span> </span>&#123;</span></span><br><span class="line">        if (!startTime) startTime = timestamp;</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> elapsed = (timestamp - startTime) / <span class="number">1000</span>; <span class="comment">// 转换为秒</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> width = container.clientWidth;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> height = container.clientHeight;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> perimeter = <span class="number">2</span> * (width + height);</span></span><br><span class="line">  </span><br><span class="line"><span class="actionscript">        <span class="comment">// 每个蛇段沿着边框延迟一定距离运动</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numSegments; i++) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 每个段延迟20像素</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> delay = i * <span class="number">20</span>;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> tPos = speed * elapsed - delay;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 保证 tPos 为正数，并取模循环</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> effectiveT = ((tPos % perimeter) + perimeter) % perimeter;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> pos = getPerimeterCoord(effectiveT, width, height);</span></span><br><span class="line"><span class="actionscript">          segments[i].style.left = pos.x + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">          segments[i].style.top = pos.y + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 调整大小：蛇头较大，尾部逐渐缩小</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> scale = <span class="number">1</span> - i * <span class="number">0.05</span>;</span></span><br><span class="line"><span class="actionscript">          segments[i].style.transform = <span class="string">"translate(-50%, -50%) scale("</span> + scale + <span class="string">")"</span>;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 根据当前位置计算颜色，生成彩虹效果</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> hue = (<span class="number">360</span> * effectiveT / perimeter);</span></span><br><span class="line"><span class="actionscript">          segments[i].style.backgroundColor = <span class="string">"hsl("</span> + hue + <span class="string">", 80%, 50%)"</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        requestAnimationFrame(animate);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      requestAnimationFrame(animate);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="样例三：火车车厢基础效果"><a href="#样例三：火车车厢基础效果" class="headerlink" title="样例三：火车车厢基础效果"></a>样例三：火车车厢基础效果</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>火车车厢动画<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 公共容器样式 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.greedy-snake-border</span> &#123;</span></span><br><span class="line">      position: relative;</span><br><span class="line">      border: 3px solid transparent;</span><br><span class="line">      border-radius: 8px;</span><br><span class="line">      margin: 20px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#f0f0f0</span>;</span></span><br><span class="line">      overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* 彩虹边框（仅显示边框区域） */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.greedy-snake-border</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">      content: "";</span><br><span class="line">      position: absolute;</span><br><span class="line">      top: -3px;</span><br><span class="line">      left: -3px;</span><br><span class="line">      right: -3px;</span><br><span class="line">      bottom: -3px;</span><br><span class="line">      z-index: 0;</span><br><span class="line">      background: conic-gradient(</span><br><span class="line"><span class="css">        <span class="selector-id">#ff0000</span>, <span class="selector-id">#ff7300</span>, <span class="selector-id">#fffb00</span>, <span class="selector-id">#48ff00</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#00ffd5</span>, <span class="selector-id">#002bff</span>, <span class="selector-id">#7a00ff</span>, <span class="selector-id">#ff00c8</span>, <span class="selector-id">#ff0000</span></span></span><br><span class="line">      );</span><br><span class="line">      border-radius: inherit;</span><br><span class="line">      animation: rotate 3s linear infinite;</span><br><span class="line"><span class="css">      <span class="selector-tag">mask</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-id">#000</span> 0 0) <span class="selector-tag">content-box</span>, <span class="selector-tag">linear-gradient</span>(<span class="selector-id">#000</span> 0 0);</span></span><br><span class="line">      mask-composite: exclude;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="keyword">@keyframes</span> rotate &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">to</span> &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>); &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 蛇段容器样式：车厢大小 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.snake-segment</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line"><span class="css">      <span class="selector-tag">width</span>: 80<span class="selector-tag">px</span>; <span class="comment">/* 车厢宽度，稍微增加 */</span></span></span><br><span class="line"><span class="css">      <span class="selector-tag">height</span>: 50<span class="selector-tag">px</span>; <span class="comment">/* 车厢高度 */</span></span></span><br><span class="line">      z-index: 1;</span><br><span class="line">      left: 0;</span><br><span class="line">      top: 0;</span><br><span class="line">      transform: translate(-50%, -50%);</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-tag">transform</span> 0<span class="selector-class">.1s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* 火车车厢图标样式 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.snake-segment</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">      display: block;</span><br><span class="line"><span class="css">      <span class="selector-tag">object-fit</span>: <span class="selector-tag">contain</span>; <span class="comment">/* 保证图标保持比例 */</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>火车车厢动画（边框版）<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"jsContainer"</span> <span class="attr">class</span>=<span class="string">"greedy-snake-border"</span> <span class="attr">style</span>=<span class="string">"width:500px; height:300px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"position: relative; z-index: 2; padding:10px;"</span>&gt;</span>火车车厢动画<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// JS版本：使用图片替换蛇段的显示</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'jsContainer'</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> numSegments = <span class="number">6</span>; <span class="comment">// 蛇段数量</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> segments = [];</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 火车车厢图标链接（可以替换成实际的图片路径）</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> imgUrls = [</span></span><br><span class="line"><span class="actionscript">        <span class="string">'https://img.icons8.com/ios/50/000000/train.png'</span>,   <span class="comment">// 火车车厢1</span></span></span><br><span class="line"><span class="actionscript">        <span class="string">'https://img.icons8.com/ios/50/000000/train.png'</span>,   <span class="comment">// 火车车厢2</span></span></span><br><span class="line"><span class="actionscript">        <span class="string">'https://img.icons8.com/ios/50/000000/train.png'</span>,   <span class="comment">// 火车车厢3</span></span></span><br><span class="line"><span class="actionscript">        <span class="string">'https://img.icons8.com/ios/50/000000/train.png'</span>,   <span class="comment">// 火车车厢4</span></span></span><br><span class="line"><span class="actionscript">        <span class="string">'https://img.icons8.com/ios/50/000000/train.png'</span>,   <span class="comment">// 火车车厢5</span></span></span><br><span class="line"><span class="actionscript">        <span class="string">'https://img.icons8.com/ios/50/000000/train.png'</span>    <span class="comment">// 火车车厢6</span></span></span><br><span class="line">      ];</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 创建蛇段，每个蛇段中嵌入一个 &lt;img&gt; 标签</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numSegments; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> seg = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">        seg.classList.add(<span class="string">'snake-segment'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span></span><br><span class="line"><span class="actionscript">        img.src = imgUrls[i]; <span class="comment">// 使用不同的图标链接</span></span></span><br><span class="line">        seg.appendChild(img);</span><br><span class="line">        container.appendChild(seg);</span><br><span class="line">        segments.push(seg);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> startTime = <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> speed = <span class="number">100</span>; <span class="comment">// 每秒移动像素数，可根据需要调整</span></span></span><br><span class="line">  </span><br><span class="line"><span class="actionscript">      <span class="comment">// 根据当前 t 值（沿周长的像素距离）计算在容器边框上的坐标，并返回方向</span></span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">getPerimeterCoord</span><span class="params">(t, width, height)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> perimeter = <span class="number">2</span> * (width + height);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> pos = t % perimeter;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> direction = <span class="string">''</span>;</span></span><br><span class="line">        if (pos &lt; width) &#123;</span><br><span class="line"><span class="actionscript">          direction = <span class="string">'top'</span>; <span class="comment">// 上边</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123; x: pos, y: <span class="number">0</span>, direction &#125;;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pos -= width;</span><br><span class="line">        if (pos &lt; height) &#123;</span><br><span class="line"><span class="actionscript">          direction = <span class="string">'right'</span>; <span class="comment">// 右边</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123; x: width, y: pos, direction &#125;;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pos -= height;</span><br><span class="line">        if (pos &lt; width) &#123;</span><br><span class="line"><span class="actionscript">          direction = <span class="string">'bottom'</span>; <span class="comment">// 下边</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123; x: width - pos, y: height, direction &#125;;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pos -= width;</span><br><span class="line"><span class="actionscript">        direction = <span class="string">'left'</span>; <span class="comment">// 左边</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123; x: <span class="number">0</span>, y: height - pos, direction &#125;;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 动画函数</span></span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">(timestamp)</span> </span>&#123;</span></span><br><span class="line">        if (!startTime) startTime = timestamp;</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> elapsed = (timestamp - startTime) / <span class="number">1000</span>; <span class="comment">// 转换为秒</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> width = container.clientWidth;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> height = container.clientHeight;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> perimeter = <span class="number">2</span> * (width + height);</span></span><br><span class="line">  </span><br><span class="line"><span class="actionscript">        <span class="comment">// 每个蛇段沿边框延迟一定距离运动，形成类似蛇头大尾部渐缩的效果</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numSegments; i++) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> delay = i * <span class="number">30</span>; <span class="comment">// 每段延迟30像素，增加间距</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> tPos = speed * elapsed - delay;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> effectiveT = ((tPos % perimeter) + perimeter) % perimeter;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> pos = getPerimeterCoord(effectiveT, width, height);</span></span><br><span class="line"><span class="actionscript">          segments[i].style.left = pos.x + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">          segments[i].style.top = pos.y + <span class="string">"px"</span>;</span></span><br><span class="line">  </span><br><span class="line"><span class="actionscript">          <span class="comment">// 根据方向调整旋转角度</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> img = segments[i].querySelector(<span class="string">'img'</span>);</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">switch</span> (pos.direction) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">case</span> <span class="string">'top'</span>:</span></span><br><span class="line"><span class="actionscript">              img.style.transform = <span class="string">'rotate(0deg)'</span>; <span class="comment">// 上边无旋转</span></span></span><br><span class="line"><span class="actionscript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">case</span> <span class="string">'right'</span>:</span></span><br><span class="line"><span class="actionscript">              img.style.transform = <span class="string">'rotate(90deg)'</span>; <span class="comment">// 右边旋转90度</span></span></span><br><span class="line"><span class="actionscript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">case</span> <span class="string">'bottom'</span>:</span></span><br><span class="line"><span class="actionscript">              img.style.transform = <span class="string">'rotate(180deg)'</span>; <span class="comment">// 下边旋转180度</span></span></span><br><span class="line"><span class="actionscript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">case</span> <span class="string">'left'</span>:</span></span><br><span class="line"><span class="actionscript">              img.style.transform = <span class="string">'rotate(270deg)'</span>; <span class="comment">// 左边旋转270度</span></span></span><br><span class="line"><span class="actionscript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// case 'top':</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   img.style.transform = 'rotate(180deg)'; // 上边车轮向下滚动</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   break;</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// case 'right':</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   img.style.transform = 'rotate(270deg)'; // 右边车轮向左滚动</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   break;</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// case 'bottom':</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   img.style.transform = 'rotate(0deg)'; // 下边车轮向上滚动</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   break;</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// case 'left':</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   img.style.transform = 'rotate(90deg)'; // 左边车轮向右滚动</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//   break;</span></span></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">          <span class="comment">// 调整大小：蛇头较大，尾部逐渐缩小</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> scale = <span class="number">1</span> - i * <span class="number">0.05</span>;</span></span><br><span class="line"><span class="actionscript">          segments[i].style.transform = <span class="string">"translate(-50%, -50%) scale("</span> + scale + <span class="string">")"</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        requestAnimationFrame(animate);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      requestAnimationFrame(animate);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="调用后端服务简单例子"><a href="#调用后端服务简单例子" class="headerlink" title="调用后端服务简单例子"></a>调用后端服务简单例子</h2><p>1.新建一个Serive.js文件<br>示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; requset&#125; <span class="keyword">from</span> <span class="string">'./common/requset'</span> <span class="comment">// 引入已封装好的ajax服务js文件</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description </span>获取存款子类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Vue&#125;</span> </span>trade Vue对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;data&#125;</span> </span>接口数据</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"> <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDepositSubcategory</span>(<span class="params">trade,data</span>)</span>&#123;</span><br><span class="line"> 	<span class="keyword">const</span> config =&#123;</span><br><span class="line">	trade,</span><br><span class="line">	url:<span class="string">'http://xxxx/select'</span>,</span><br><span class="line">	data:&#123;</span><br><span class="line">		body:&#123;</span><br><span class="line">			ffmc:<span class="string">'01'</span>,</span><br><span class="line">			...data,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> requset(config)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>2.在Demo.Vue文件中调用该方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getDepositSubcategory &#125; <span class="keyword">from</span> <span class="string">'./serice'</span> <span class="comment">// 引入写好的服务文件</span></span><br><span class="line">data()&#123;</span><br><span class="line">	zhkhlx:<span class="string">''</span>,<span class="comment">//账户客户类型</span></span><br><span class="line">	khzl :<span class="string">''</span>,<span class="comment">//客户子类</span></span><br><span class="line">	CKZL_options:[],<span class="comment">//存款子类选项</span></span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line"><span class="comment">// 存款子类焦点进入事件</span></span><br><span class="line"><span class="keyword">async</span> CKZL_OnFoucus()&#123;</span><br><span class="line"><span class="keyword">const</span> khlx=<span class="keyword">this</span>.zhkhlx <span class="comment">//账户客户类型</span></span><br><span class="line"><span class="keyword">const</span> khzl =<span class="keyword">this</span>.khzl <span class="comment">//客户子类</span></span><br><span class="line"><span class="comment">//查询加载存款子类下拉框数据</span></span><br><span class="line"><span class="keyword">const</span> data =&#123;</span><br><span class="line">	jdbz:<span class="string">'1'</span>, <span class="comment">// 借贷标志</span></span><br><span class="line">	khlb:<span class="string">'1'</span>, <span class="comment">// 客户类型</span></span><br><span class="line">	cklx:<span class="string">'02'</span>, <span class="comment">// 存款类型</span></span><br><span class="line">	hxkhlx:khlx, <span class="comment">// 客户类型</span></span><br><span class="line">	hxkhlxzl:khzl, <span class="comment">// 客户子类</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> getDepositSubcategory(<span class="keyword">this</span>,data)</span><br><span class="line"><span class="comment">// console.log('获取存款子类返回数据==',JSON.stringify(res,null,2))</span></span><br><span class="line"><span class="keyword">const</span> list =res?.body?.list.length &gt;<span class="number">0</span> ?res.body.list:[]</span><br><span class="line"><span class="keyword">this</span>.CKZL_options = list.map(<span class="function"><span class="params">item</span>=&gt;</span>(&#123;</span><br><span class="line">	label:<span class="string">`<span class="subst">$&#123;item.hxcklbzl&#125;</span>-<span class="subst">$&#123;item.hxckzlmc&#125;</span>`</span>,</span><br><span class="line">	value:item.hxcklbzl,</span><br><span class="line">	&#125;))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">PanXiaoKang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/">http://example.com/2024/04/21/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">向阳榆木</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/">笔记整理</a><a class="post-meta__tags" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/">代码片段</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a></div><div class="post_share"><div class="social-share" data-image="/img/butterfly.jpg" data-sites="qq,wechat,facebook,twitter,weibo"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://s1.ax1x.com/2020/06/09/t40mLD.th.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://s1.ax1x.com/2020/06/09/t4czVK.th.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2024/04/27/CSS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="prev_cover lazyload" data-src="/img/butterfly.jpg" onerror="onerror=null;src='/img/404.png'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">CSS学习笔记</div></div></a></div><div class="next-post pull_right"><a href="/2024/04/20/TypeScript%E5%85%A5%E9%97%A8%E6%95%B4%E7%90%86/"><img class="next_cover lazyload" data-src="/img/butterfly.jpg" onerror="onerror=null;src='/img/404.png'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">TypeScript入门整理</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2024/04/20/TypeScript入门整理/" title="TypeScript入门整理"><img class="relatedPosts_cover lazyload"data-src="/img/butterfly.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-04-20</div><div class="relatedPosts_title">TypeScript入门整理</div></div></a></div><div class="relatedPosts_item"><a href="/2024/04/27/CSS学习笔记/" title="CSS学习笔记"><img class="relatedPosts_cover lazyload"data-src="/img/butterfly.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-04-27</div><div class="relatedPosts_title">CSS学习笔记</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/01/Java代码片段/" title="Java代码片段"><img class="relatedPosts_cover lazyload"data-src="/img/butterfly.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-01</div><div class="relatedPosts_title">Java代码片段</div></div></a></div><div class="relatedPosts_item"><a href="/2021/08/29/JavaScript教程之标准库/" title="③JavaScript教程之标准库"><img class="relatedPosts_cover lazyload"data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1273994899,2704080463&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-08-29</div><div class="relatedPosts_title">③JavaScript教程之标准库</div></div></a></div><div class="relatedPosts_item"><a href="/2021/05/04/JavaScript从进阶到熟悉/" title="②JavaScript从进阶到熟悉"><img class="relatedPosts_cover lazyload"data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1273994899,2704080463&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-05-04</div><div class="relatedPosts_title">②JavaScript从进阶到熟悉</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/30/JavaScript从入门到进阶/" title="①JavaScript从入门到进阶"><img class="relatedPosts_cover lazyload"data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1273994899,2704080463&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-04-30</div><div class="relatedPosts_title">①JavaScript从入门到进阶</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: true,
  verify: true,
  appId: 'z2GwNsG7RRpWpx5rt7psedl5-MdYXbMMI',
  appKey: 'gI6Yhfwz4JiUIv9546gepko8',
  placeholder: '来吧，造作吧，快活吧，肆无忌惮吧！(～￣▽￣)～',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By PanXiaoKang</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">小伙伴们好！欢迎来到<a href="https://panyongkang.github.io/" target="_blank" rel="noopener">向阳榆木</a>的博客！</div><div class="icp"><a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>黔ICP备54587259号</span></a></div><div id="running-time"></div><script>setInterval(()=>{let create_time=Math.round(new Date(Date.UTC(2020,01,01,0,0,0)).getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已安全运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script><script src="/js/search/local-search.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/platelet.model.json"},"display":{"position":"right","width":200,"height":500},"mobile":{"show":true},"log":false});</script></body></html>