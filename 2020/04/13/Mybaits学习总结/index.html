<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MyBatis项目创建流程 | 向阳榆木</title><meta name="description" content="MyBatis项目创建流程"><meta name="keywords" content="MyBatis"><meta name="author" content="PanXiaoKang"><meta name="copyright" content="PanXiaoKang"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/Lotus.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="wyZknSW2XMDLHhrSvtifCN1aQwr2nn53ydI_lDzVJmI"/><meta name="baidu-site-verification" content="p1OeTLcEA8"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="MyBatis项目创建流程"><meta name="twitter:description" content="MyBatis项目创建流程"><meta name="twitter:image" content="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2196685962,796489853&amp;fm=26&amp;gp=0.jpg"><meta property="og:type" content="article"><meta property="og:title" content="MyBatis项目创建流程"><meta property="og:url" content="http://example.com/2020/04/13/Mybaits%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"><meta property="og:site_name" content="向阳榆木"><meta property="og:description" content="MyBatis项目创建流程"><meta property="og:image" content="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2196685962,796489853&amp;fm=26&amp;gp=0.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://example.com/2020/04/13/Mybaits%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"><link rel="prev" title="数据库理论" href="http://example.com/2020/04/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%90%86%E8%AE%BA/"><link rel="next" title="Hexo博客使用出错记录" href="http://example.com/2020/04/12/Hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"最近有点失眠了,每天被自己帅醒,帅早已成为负担,除了帅一无所有,富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善","fontSize":"20px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'true',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://s1.ax1x.com/2020/06/09/t40ARx.th.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">97</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">211</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fa fa-random"></i><span> 随机文章</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-large" aria-hidden="true"></i><span> 归档</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tagsnet/"><i class="fa-fw fa fa-connectdevelop"></i><span> 关系网</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-send-o" aria-hidden="true"></i><span> 导航栏</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://xyyum.icu/mypages/OnlyI.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 主页导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/xkzhdh/Integrated.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-paper-plane-o"></i><span> 综合导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/software/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 软件分享</span></a></li><li><a class="site-page" href="/sunshineBookshelf/"><i class="fa-fw fa fa-university"></i><span> 向阳书架</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page" href="/bilibili/"><i class="fa-fw fa fa-play-circle"></i><span> 番剧</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fa fa-play-circle-o"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-link" aria-hidden="true"></i><span> 友情链接</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page" href="https://yumuxy.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 桑榆未晚</span></a></li><li><a class="site-page" href="https://lllzxqq.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 偏偏💖雨季</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-user-circle-o" aria-hidden="true"></i><span> 关于我</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="http://www.xbmu.edu.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-graduation-cap"></i><span> 母校</span></a></li><li><a class="site-page" href="/workshop/"><i class="fa-fw fa fa-heartbeat"></i><span> 作品</span></a></li><li><a class="site-page" href="/mybook/"><i class="fa-fw fa fa-book"></i><span> 自传</span></a></li><li><a class="site-page" href="/anires/"><i class="fa-fw fa fa-list-alt"></i><span> 简历</span></a></li><li><a class="site-page" href="/vcard/"><i class="fa-fw fa fa-vcard-o"></i><span> 名片</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gamepad" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://playground.z.wiki/typing-game/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> 打字游戏</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/GreedySnake/GreedySnake.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-lastfm"></i><span> 贪吃蛇</span></a></li><li><a class="site-page" href="/petalage/"><i class="fa-fw fa fa-gamepad"></i><span> 表白时刻</span></a></li><li><a class="site-page" href="/yszq/"><i class="fa-fw fa fa-gamepad"></i><span> 3D元素</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gear (alias)" aria-hidden="true"></i><span> 工具平台</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/xkdm/"><i class="fa-fw fa fa-star"></i><span> 星空弹幕</span></a></li><li><a class="site-page" href="https://xyym.avosapps.us/" target="_blank" rel="noopener"><i class="fa-fw fa fa-commenting-o"></i><span> 评论管理</span></a></li><li><a class="site-page" href="https://myhkw.cn/admin/user/login/" target="_blank" rel="noopener"><i class="fa-fw fa fa-music"></i><span> 音乐后台</span></a></li><li><a class="site-page" href="https://www.superbed.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-area-chart"></i><span> 聚合图床</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 纪念空间</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/3d-gallery/"><i class="fa-fw fa fa-university"></i><span> 3D相册屋</span></a></li><li><a class="site-page" href="/live-photo/"><i class="fa-fw fa fa-photo"></i><span> 青春校园</span></a></li><li><a class="site-page" href="/photo-wall/"><i class="fa-fw fa fa-th"></i><span> 生活照片</span></a></li><li><a class="site-page" href="/video-wall/"><i class="fa-fw fa fa-video-camera"></i><span> 在线视频</span></a></li><li><a class="site-page" href="/mtxx/"><i class="fa-fw fa fa-file-photo-o"></i><span> 美图秀秀</span></a></li><li><a class="site-page" href="/timeStoryline/"><i class="fa-fw fa fa-file-video-o"></i><span> 时间故事线</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis项目创建流程"><span class="toc-number">1.</span> <span class="toc-text">MyBatis项目创建流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#一、需求描述"><span class="toc-number">1.1.</span> <span class="toc-text">一、需求描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二、创建数据库设计"><span class="toc-number">1.2.</span> <span class="toc-text">二、创建数据库设计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#三、搭建开发环境"><span class="toc-number">1.3.</span> <span class="toc-text">三、搭建开发环境</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#章节一：走进MyBatis"><span class="toc-number">2.</span> <span class="toc-text">章节一：走进MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#任务1：根据用户id查询用户"><span class="toc-number">2.1.</span> <span class="toc-text">任务1：根据用户id查询用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#任务2：根据用户名模糊查询用户"><span class="toc-number">2.2.</span> <span class="toc-text">任务2：根据用户名模糊查询用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#任务3：添加用户"><span class="toc-number">2.3.</span> <span class="toc-text">任务3：添加用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#任务4：UUID主键策略"><span class="toc-number">2.4.</span> <span class="toc-text">任务4：UUID主键策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#任务5：更新用户"><span class="toc-number">2.5.</span> <span class="toc-text">任务5：更新用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#任务6：删除用户"><span class="toc-number">2.6.</span> <span class="toc-text">任务6：删除用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#章节二-Dao的开发"><span class="toc-number">3.</span> <span class="toc-text">章节二 Dao的开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#简介：Mybatis有两种方法开发dao-即原生dao开发和Mapper接口开发"><span class="toc-number">3.1.</span> <span class="toc-text">简介：Mybatis有两种方法开发dao,即原生dao开发和Mapper接口开发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一、原生Dao开发步骤"><span class="toc-number">3.2.</span> <span class="toc-text">一、原生Dao开发步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二、Mapper接口开发dao"><span class="toc-number">3.3.</span> <span class="toc-text">二、Mapper接口开发dao</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#章节三-MyBatis配置详解"><span class="toc-number">4.</span> <span class="toc-text">章节三 MyBatis配置详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#一、全局配置SqlMapConfig"><span class="toc-number">4.1.</span> <span class="toc-text">一、全局配置SqlMapConfig</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二、输入映射parameterType"><span class="toc-number">4.2.</span> <span class="toc-text">二、输入映射parameterType</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#三、输出映射resultType"><span class="toc-number">4.3.</span> <span class="toc-text">三、输出映射resultType</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#四、输出映射resultMap"><span class="toc-number">4.4.</span> <span class="toc-text">四、输出映射resultMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#五、动态SQL"><span class="toc-number">4.5.</span> <span class="toc-text">五、动态SQL</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#章节四-关联查询与缓存"><span class="toc-number">5.</span> <span class="toc-text">章节四 关联查询与缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#关联查询"><span class="toc-number">5.1.</span> <span class="toc-text">关联查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#关联查询总结"><span class="toc-number">5.2.</span> <span class="toc-text">关联查询总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#懒加载"><span class="toc-number">5.3.</span> <span class="toc-text">懒加载</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存"><span class="toc-number">6.</span> <span class="toc-text">缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#一、为什么使用缓存"><span class="toc-number">6.1.</span> <span class="toc-text">一、为什么使用缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二、一级缓存"><span class="toc-number">6.2.</span> <span class="toc-text">二、一级缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#三、二级缓存"><span class="toc-number">6.3.</span> <span class="toc-text">三、二级缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#四、禁用二级缓存"><span class="toc-number">6.4.</span> <span class="toc-text">四、禁用二级缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#五、刷新缓存（清空缓存）"><span class="toc-number">6.5.</span> <span class="toc-text">五、刷新缓存（清空缓存）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#六、缓存总结"><span class="toc-number">6.6.</span> <span class="toc-text">六、缓存总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#七、逆向工程"><span class="toc-number">6.7.</span> <span class="toc-text">七、逆向工程</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2196685962,796489853&amp;fm=26&amp;gp=0.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">向阳榆木</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fa fa-random"></i><span> 随机文章</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-large" aria-hidden="true"></i><span> 归档</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tagsnet/"><i class="fa-fw fa fa-connectdevelop"></i><span> 关系网</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-send-o" aria-hidden="true"></i><span> 导航栏</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://xyyum.icu/mypages/OnlyI.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 主页导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/xkzhdh/Integrated.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-paper-plane-o"></i><span> 综合导航</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/software/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> 软件分享</span></a></li><li><a class="site-page" href="/sunshineBookshelf/"><i class="fa-fw fa fa-university"></i><span> 向阳书架</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page" href="/bilibili/"><i class="fa-fw fa fa-play-circle"></i><span> 番剧</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fa fa-play-circle-o"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-link" aria-hidden="true"></i><span> 友情链接</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page" href="https://yumuxy.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 桑榆未晚</span></a></li><li><a class="site-page" href="https://lllzxqq.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> 偏偏💖雨季</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-user-circle-o" aria-hidden="true"></i><span> 关于我</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="http://www.xbmu.edu.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-graduation-cap"></i><span> 母校</span></a></li><li><a class="site-page" href="/workshop/"><i class="fa-fw fa fa-heartbeat"></i><span> 作品</span></a></li><li><a class="site-page" href="/mybook/"><i class="fa-fw fa fa-book"></i><span> 自传</span></a></li><li><a class="site-page" href="/anires/"><i class="fa-fw fa fa-list-alt"></i><span> 简历</span></a></li><li><a class="site-page" href="/vcard/"><i class="fa-fw fa fa-vcard-o"></i><span> 名片</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gamepad" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://playground.z.wiki/typing-game/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> 打字游戏</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/GreedySnake/GreedySnake.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-lastfm"></i><span> 贪吃蛇</span></a></li><li><a class="site-page" href="/petalage/"><i class="fa-fw fa fa-gamepad"></i><span> 表白时刻</span></a></li><li><a class="site-page" href="/yszq/"><i class="fa-fw fa fa-gamepad"></i><span> 3D元素</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gear (alias)" aria-hidden="true"></i><span> 工具平台</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/xkdm/"><i class="fa-fw fa fa-star"></i><span> 星空弹幕</span></a></li><li><a class="site-page" href="https://xyym.avosapps.us/" target="_blank" rel="noopener"><i class="fa-fw fa fa-commenting-o"></i><span> 评论管理</span></a></li><li><a class="site-page" href="https://myhkw.cn/admin/user/login/" target="_blank" rel="noopener"><i class="fa-fw fa fa-music"></i><span> 音乐后台</span></a></li><li><a class="site-page" href="https://www.superbed.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-area-chart"></i><span> 聚合图床</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 纪念空间</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/3d-gallery/"><i class="fa-fw fa fa-university"></i><span> 3D相册屋</span></a></li><li><a class="site-page" href="/live-photo/"><i class="fa-fw fa fa-photo"></i><span> 青春校园</span></a></li><li><a class="site-page" href="/photo-wall/"><i class="fa-fw fa fa-th"></i><span> 生活照片</span></a></li><li><a class="site-page" href="/video-wall/"><i class="fa-fw fa fa-video-camera"></i><span> 在线视频</span></a></li><li><a class="site-page" href="/mtxx/"><i class="fa-fw fa fa-file-photo-o"></i><span> 美图秀秀</span></a></li><li><a class="site-page" href="/timeStoryline/"><i class="fa-fw fa fa-file-video-o"></i><span> 时间故事线</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">MyBatis项目创建流程</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-04-13 20:21:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-04-13</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2024-12-21 18:14:09"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2024-12-21</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/MyBatis/">MyBatis</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/04/13/Mybaits%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/04/13/Mybaits%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h3 id="MyBatis项目创建流程"><a href="#MyBatis项目创建流程" class="headerlink" title="MyBatis项目创建流程"></a>MyBatis项目创建流程</h3><h4 id="一、需求描述"><a href="#一、需求描述" class="headerlink" title="一、需求描述"></a>一、需求描述</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2.根据用户名模糊查询用户</span><br><span class="line">3.添加用户</span><br><span class="line">4.更新用户</span><br><span class="line">5.删除用户</span><br></pre></td></tr></table></figure>

<h4 id="二、创建数据库设计"><a href="#二、创建数据库设计" class="headerlink" title="二、创建数据库设计"></a>二、创建数据库设计</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">省略。。。</span><br></pre></td></tr></table></figure>

<h4 id="三、搭建开发环境"><a href="#三、搭建开发环境" class="headerlink" title="三、搭建开发环境"></a>三、搭建开发环境</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.创建项目</span><br><span class="line">	2.设置pom.xml	分别导入mybatis、数据库和日志的jar包</span><br><span class="line">	3.创建Mybatis的全局配置文件SqlMapConfig.xml</span><br><span class="line">		3.1读取数据库db.properties信息</span><br><span class="line">		3.2管理数据库连接池dataSource</span><br><span class="line">		3.3加载映射文件mappers</span><br><span class="line">	4.创建映射文件userInfo.xml</span><br><span class="line">	5.创建日志文件</span><br></pre></td></tr></table></figure>

<h3 id="章节一：走进MyBatis"><a href="#章节一：走进MyBatis" class="headerlink" title="章节一：走进MyBatis"></a>章节一：走进MyBatis</h3><h4 id="任务1：根据用户id查询用户"><a href="#任务1：根据用户id查询用户" class="headerlink" title="任务1：根据用户id查询用户"></a>任务1：根据用户id查询用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	1.在Model包下创建POJO类UserInfoModel</span><br><span class="line">​	2.在userInfo.xml中配置SQL映射</span><br><span class="line">​		2.1根据id查询用户：id&#x3D;&quot;findUserInfoById&quot;</span><br><span class="line">​	3.在test包中创建单元测试类Testshop</span><br><span class="line">​		3.1定义会话工厂对象</span><br><span class="line">​		3.2声明@Before注解在setUp方法中：加载SqlMapConfig.xml配置文件</span><br><span class="line">​		3.3在setUp方法中：创建会话工厂，传入mybatis的配置文件信息</span><br><span class="line">​		3.4在testFindUserInfoById方法：通过会话工厂得到SqlSession对象</span><br><span class="line">​		3.5通过sqlSession.selectOne查询单条记录</span><br><span class="line">​		3.6关闭SQLSession对象</span><br><span class="line">​	4.运行打印单元测试，输出日志信息。</span><br></pre></td></tr></table></figure>

<h4 id="任务2：根据用户名模糊查询用户"><a href="#任务2：根据用户名模糊查询用户" class="headerlink" title="任务2：根据用户名模糊查询用户"></a>任务2：根据用户名模糊查询用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	1.创建映射声明ID,修改输入类型和sql语句</span><br><span class="line">​	2.编写单元测试</span><br><span class="line">​		2.1获取sqlSession对象</span><br><span class="line">​		2.2通过sqlSession.selectList查询模糊用户</span><br><span class="line">​		2.3关闭对象SQLSession</span><br><span class="line">​	3.运行打印</span><br></pre></td></tr></table></figure>

<h4 id="任务3：添加用户"><a href="#任务3：添加用户" class="headerlink" title="任务3：添加用户"></a>任务3：添加用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.创建映射声明ID</span><br><span class="line">​		1.1userInfo.xml中编写&lt;insert&gt;标签</span><br><span class="line">​		1.2将新增记录的主键值保存到userInfo对象中</span><br><span class="line">​		1.3编写插入语句insert</span><br><span class="line">​	2.编写单元测试</span><br><span class="line">​		1.获取SQLSession对象</span><br><span class="line">​		2.new一个UserInfoModel类的对象model</span><br><span class="line">​		3.model.set方法插入用户对象</span><br><span class="line">​		4.SQLSession.insert执行插入</span><br><span class="line">​		5.提交事务</span><br><span class="line">​		6.获取用户信息主键</span><br><span class="line">​		7.关闭会话</span><br><span class="line">​	3.单元测试打印结果</span><br></pre></td></tr></table></figure>

<h4 id="任务4：UUID主键策略"><a href="#任务4：UUID主键策略" class="headerlink" title="任务4：UUID主键策略"></a>任务4：UUID主键策略</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">	1.使用mysql的uuid()作为新增记录的主键值，uuid()能够生成长度为36位的永远不重复的字符串，避免了自增长主键值能被猜测的缺陷</span><br><span class="line">​	2.通过select uuid()得到uuid字符串，将uuid字符串设置到userInfo对象的属性中，</span><br><span class="line">​	3.在执行insert时，从userInfo对象中取出id的值</span><br></pre></td></tr></table></figure>

<h4 id="任务5：更新用户"><a href="#任务5：更新用户" class="headerlink" title="任务5：更新用户"></a>任务5：更新用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	1.创建映射声明ID</span><br><span class="line">​	2.编写update语句</span><br><span class="line">​	3.编写单元测试</span><br><span class="line">​		3.1获取SQLSession对象</span><br><span class="line">​		3.2插入用户对象</span><br><span class="line">​		3.3执行sqlSession.update方法</span><br><span class="line">​		3.4提交事务</span><br><span class="line">​		3.5关闭会话</span><br><span class="line">​	4.运行打印结果</span><br></pre></td></tr></table></figure>

<h4 id="任务6：删除用户"><a href="#任务6：删除用户" class="headerlink" title="任务6：删除用户"></a>任务6：删除用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">	1.创建映射声明ID</span><br><span class="line">​	2.delete语句</span><br><span class="line">​	3.单元测试类</span><br><span class="line">​		3.1获取SQLSession对象</span><br><span class="line">​		3.2执行SQLSession.delete方法</span><br><span class="line">​		3.3提交事务</span><br><span class="line">​		3.4关闭会话</span><br><span class="line">​	4.打印结果</span><br></pre></td></tr></table></figure>

<h3 id="章节二-Dao的开发"><a href="#章节二-Dao的开发" class="headerlink" title="章节二 Dao的开发"></a>章节二 Dao的开发</h3><h4 id="简介：Mybatis有两种方法开发dao-即原生dao开发和Mapper接口开发"><a href="#简介：Mybatis有两种方法开发dao-即原生dao开发和Mapper接口开发" class="headerlink" title="简介：Mybatis有两种方法开发dao,即原生dao开发和Mapper接口开发"></a>简介：Mybatis有两种方法开发dao,即原生dao开发和Mapper接口开发</h4><h4 id="一、原生Dao开发步骤"><a href="#一、原生Dao开发步骤" class="headerlink" title="一、原生Dao开发步骤"></a>一、原生Dao开发步骤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">​	1.给定需求：</span><br><span class="line">​		任务1：实现用户id查询用户信息</span><br><span class="line">​		任务2：查询所有用户</span><br><span class="line">​		任务3：实现用户注册业务</span><br><span class="line">​	2.在dao包下创建dao接口IUserInfoDao</span><br><span class="line">​		2.1findByUserId()方法：根据主键查询用户</span><br><span class="line">​		2.2insertUserInfo()方法：添加用户</span><br><span class="line">​	3.创建dao实现类</span><br><span class="line">​		3.1在impl包下创建dao接口实现类UserInfoDaoImpl</span><br><span class="line">​		3.2定义会话工厂对象，该对象从外包部通过构造函数注入</span><br><span class="line">​		3.3findUserInfoById()方法</span><br><span class="line">​			3.3.1通过会话工厂获取SQLSession对象</span><br><span class="line">​			3.3.2执行单条查询</span><br><span class="line">​			3.3.3关闭会话</span><br><span class="line">​			3.3.4返回查询结果</span><br><span class="line">​		3.4insertUserInfo()方法：</span><br><span class="line">​			3.4.1获取SQLSession对象</span><br><span class="line">​			3.4.2执行添加方法</span><br><span class="line">​			3.4.3提交事务</span><br><span class="line">​			3.4.5获取用户主键信息</span><br><span class="line">​			3.4.6关闭会话</span><br><span class="line">​	4.单元测试</span><br><span class="line">​		 1.在test包下创建单元测试类TestDao</span><br><span class="line">​			1.1定义会话工厂对象sqlSessionFactory</span><br><span class="line">​			1.2注解@Before在setUp()方法：</span><br><span class="line">​				1.2.1加载配置文件SqlMapConfig.xml</span><br><span class="line">​				1.2.2InputStream获取</span><br><span class="line">​				1.2.3创建会话工厂，传入mybatis的配置文件信息</span><br><span class="line">​				1.2.4测试根据用户Id查询用户信息</span><br><span class="line">​				1.2.5注解@Test在testFindUserInfoById()方法：</span><br><span class="line">​					1.2.5.1向dao注入sqlSessionFactory</span><br><span class="line">​					1.2.5.2执行userInfoDao.findUserInfoById()方法，返回model对象</span><br><span class="line">​					1.2.5.3打印model对象</span><br><span class="line">​				1.2.6测试用户注册业务，注解@Test在testInsertUser()方法：</span><br><span class="line">​					1.2.6.1向dao注入sqlSessionFactory对象</span><br><span class="line">​					1.2.6.2new一个model对象，set方法添加</span><br><span class="line">​					1.2.6.3执行userInfo.insertUserInfo()方法。</span><br></pre></td></tr></table></figure>

<h4 id="二、Mapper接口开发dao"><a href="#二、Mapper接口开发dao" class="headerlink" title="二、Mapper接口开发dao"></a>二、Mapper接口开发dao</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.原理：Mapper接口（相当于dao接口），动态代理对象（相当于dao实现类）</span><br><span class="line">		1.1定义Mapper.xml映射文件，文件名可自定义，建议表名称+Mapper结尾</span><br><span class="line">		1.2定义Mapper接口，建议表名称+Mapper作为接口名</span><br><span class="line">	2.定义Mapper.xml</span><br><span class="line">		2.1在src&#x2F;main&#x2F;resoures目录下创建userinfoMapper.xml映射文件</span><br><span class="line">		2.2&lt;!--规范1：namespace等于mapper接口路径 --&gt;</span><br><span class="line">		2.3&lt;!--规范2：id的值必须和mapper接口中的方法名称相同  --&gt;</span><br><span class="line">		2.4&lt;!--规范3：paramterType的类型必须与mapper接口方法的输入参数类型相同  --&gt;</span><br><span class="line">		2.5&lt;!--规范4：resultType的类型必须与mapper接口方法的返回值类型相同  --&gt;</span><br><span class="line">	3.将userinfoMapper.xml加载到SqlMapConfig.xml配置文件中</span><br><span class="line">	4.定义Mapper接口</span><br><span class="line">		4.1在src&#x2F;main&#x2F;java中创建包mapper,在该包下创建IUserInfoMapper接口，编写与映射声明id同名的方法</span><br><span class="line">		4.2单元测试</span><br><span class="line">			4.2.1创建TestMapper类</span><br><span class="line">			4.2.2定义会话工厂</span><br><span class="line">			4.2.3setUp()方法：加载Mybaits配置文件</span><br><span class="line">			4.2.4创建会话工厂，传入配置文件信息</span><br><span class="line">			4.2.5testFindUserInfoById方法：</span><br><span class="line">			4.2.6获取SQLSession对象</span><br><span class="line">			4.2.7创建IuserInfoMapper对象，自动生成IUserInfoMapper的代理对象</span><br><span class="line">			4.2.8执行单个查询方法</span><br><span class="line">			4.2.9关闭SQLSession</span><br><span class="line">			4.2.10打印结果</span><br><span class="line">			4.2.11剩余test方法类似</span><br></pre></td></tr></table></figure>

<h3 id="章节三-MyBatis配置详解"><a href="#章节三-MyBatis配置详解" class="headerlink" title="章节三 MyBatis配置详解"></a>章节三 MyBatis配置详解</h3><h4 id="一、全局配置SqlMapConfig"><a href="#一、全局配置SqlMapConfig" class="headerlink" title="一、全局配置SqlMapConfig"></a>一、全局配置SqlMapConfig</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1.配置内容和顺序（顺序固定，不能更改）</span><br><span class="line">​		1.1properties(属性）</span><br><span class="line">​		1.2settings(全局配置参数)</span><br><span class="line">​		1.3typeAliases(类型别名）</span><br><span class="line">​		1.4typeHandlers(类型处理器）</span><br><span class="line">​		1.5objectFactory(对象工厂）</span><br><span class="line">​		1.6plugins(插件）</span><br><span class="line">​		1.7environments(环境集合属性对象）</span><br><span class="line">​			1.8environment(环境子属性对象)</span><br><span class="line">​			1.9transactionManager(事务管理）</span><br><span class="line">​			1.10dataSource(数据源）</span><br><span class="line">​		1.11mappers(映射器）</span><br><span class="line">​	</span><br><span class="line"></span><br><span class="line">2.内容详解</span><br><span class="line">		2.1properties(属性)：可以加载数据库配置信息，通过外部配置来方便动态替换。</span><br><span class="line">		2.2settings(全局配置): settings是mybatis的全局配置参数，它是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。</span><br><span class="line">		2.3具体设置参数参考地址：</span><br><span class="line">			https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_39805338&#x2F;article&#x2F;details&#x2F;80893558</span><br><span class="line">		2.4typeAliases(类型别名): 类型别名是为 Java 类型设置一个短的名字。它只和 XML 配置有关，存在的意义仅在于用来减少类完全限定名的冗余。</span><br><span class="line">           2.4.1针对POJO类型需要自定义别名：</span><br><span class="line">           		2.4.1.1单个定义别名</span><br><span class="line">				&lt;typeAlias alias&#x3D;&quot;userInfoModel&quot; type&#x3D;&quot;cn.itlaobing.mybatis.model.UserInfoModel&quot; &#x2F;&gt;</span><br><span class="line">				2.4.1.2批量定义别名，扫描整个包下的类，别名为类名（首字母大小写都可以）</span><br><span class="line">				&lt;package name&#x3D;&quot;cn.itlaobing.mybatis.model&quot; &#x2F;&gt;</span><br><span class="line">		2.5typeHandlers(类型处理器)：无论是 MyBatis 在预处理语句（PreparedStatement）中设置一个参数时，还是从结果集中取出一个值时， 都会用类型处理器将获取的值以合适的方式转换成 Java 类型。Mybatis提供的typeHandlers已经满足大部分开发需求，通常开发人员不需要自定义typeHandlers。</span><br><span class="line">		2.6objectFactory（对象工厂）：MyBatis 每次创建结果对象的新实例时，它都会使用一个对象工厂（ObjectFactory）实例来完成。</span><br><span class="line">		2.7plugins（插件）：MyBatis 允许你在已映射语句执行过程中的某一点进行拦截调用。</span><br><span class="line">		2.8environments（配置环境）：MyBatis 可以配置成适应多种环境，这种机制有助于将 SQL 映射应用于多种数据库之中， 现实情况下有多种理由需要这么做。例如，开发、测试和生产环境需要有不同的配置；或者共享相同 Schema 的多个生产数据库， 想使用相同的 SQL 映射。许多类似的用例。</span><br><span class="line">		2.9transactionManager（事务管理器）：在 MyBatis 中有两种类型的事务管理器（也就是 type&#x3D;”[JDBC|MANAGED]”）</span><br><span class="line">		2.10dataSource（数据源）：dataSource 元素使用标准的 JDBC 数据源接口来配置 JDBC 连接对象的资源。</span><br><span class="line">		2.11mappers（映射器）：mappers用于加载映射文件到全局配置文件中，Mybatis有四种加载配置文件的方法。分别是resource、url、class、package。其中resource方法一次加载一个映射文件，package方法可以实现批量加载，推荐使用。</span><br></pre></td></tr></table></figure>

<h4 id="二、输入映射parameterType"><a href="#二、输入映射parameterType" class="headerlink" title="二、输入映射parameterType"></a>二、输入映射parameterType</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Myabtis输入映射就是将java对象映射为SQL语句中列的值。</span><br><span class="line">输入映射形式包括：简单类型、POJO类型、VO类型、HashMap类型。</span><br><span class="line"></span><br><span class="line">1.	简单类型：比如需求：根据id查询指定的用户</span><br><span class="line">   1.1mapper映射配置（int)</span><br><span class="line">   1.2mapper接口定义(int)</span><br><span class="line">   1.3单元测试</span><br><span class="line">   1.4运行打印</span><br><span class="line">2.	POJO类型：比如需求：添加用户</span><br><span class="line">   2.1mapper映射配置(UserInfoModel)</span><br><span class="line">   2.2mapper接口定义(UserInfoModel)</span><br><span class="line">   2.3单元测试</span><br><span class="line">   2.4打印运行</span><br><span class="line">3.	VO类型：它的作用是把某个指定页面的所有数据封装起来，一个VO对象中可以对应数据库中的多张表。PO是持久对象，PO类与表对应，PO类中的属性与表的列对应。比如需求：多条件查询用户。</span><br><span class="line">   3.1创建OrdersModel类</span><br><span class="line">   3.2创建UserInfoQueryVO类</span><br><span class="line">   	3.2.1UserInfoModel的PO作为VO的属性</span><br><span class="line">   	3.2.2OrderModel的PO作为VO的属性</span><br><span class="line">   3.3配置Mapper映射文件（UserInfoQueryVO)</span><br><span class="line">   3.4定义Mapper接口（UserInfoQueryVO)</span><br><span class="line">   3.5单元测试</span><br><span class="line">   3.6打印运行</span><br><span class="line">4.	HashMap类型：比如需求：根据用户名和性别查询用户</span><br><span class="line">   4.1Mapper映射配置(HashMap)</span><br><span class="line">   4.2Mapper接口定义(HashMap)</span><br><span class="line">   4.3单元测试</span><br><span class="line">   4.4打印运行</span><br></pre></td></tr></table></figure>

<h4 id="三、输出映射resultType"><a href="#三、输出映射resultType" class="headerlink" title="三、输出映射resultType"></a>三、输出映射resultType</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">注意：POJO（Plain Ordinary Java Object）即普通Java类，具有一部分getter&#x2F;setter方法的那种类就可以称作POJO。</span><br><span class="line">Mybatis的输出映射就是将查询的结果映射为java对象。resultType可以把查询结果封装到pojo类型中，但必须pojo类的属性名和查询到的数据库表的字段名一致。</span><br><span class="line"></span><br><span class="line">1.	简单类型输出映射：需求：查询userInfo表的记录数量</span><br><span class="line">   1.1Mapper映射配置（int)</span><br><span class="line">   1.2Mapper接口定义(int)</span><br><span class="line">   1.3单元测试</span><br><span class="line">   1.4运行打印</span><br><span class="line">2.	POJO对象输出映射：需求：根据id查询指定用户</span><br><span class="line">   2.1Mapper映射配置（UserInfoModel)</span><br><span class="line">   2.2Mapper接口定义（UserInfoModel)</span><br><span class="line">   2.3单元测试</span><br><span class="line">   2.4打印运行</span><br><span class="line">3.	POJO集合输出映射：需求：查询所有用户</span><br><span class="line">   3.1Mapper映射配置（UserInfoModel)</span><br><span class="line">   3.2Mapper接口定义（List&lt;UserInfoModel&gt;)</span><br><span class="line">   3.3单元测试</span><br><span class="line">   3.4打印运行</span><br><span class="line">4.	HashMap类型输出映射：需求：查询所有用户</span><br><span class="line">   4.1Mapper映射配置（hasMap)</span><br><span class="line">   4.2Mapper接口定义(List&lt;hasMap&lt;String,String&gt;&gt;)</span><br><span class="line">   4.3单元测试</span><br><span class="line">   4.4打印运行</span><br></pre></td></tr></table></figure>

<h4 id="四、输出映射resultMap"><a href="#四、输出映射resultMap" class="headerlink" title="四、输出映射resultMap"></a>四、输出映射resultMap</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">如果出现字段和属性不一致，则需要手动配置映射方式，这时使用resultMap。比如列名是“user_id”,而属性名是“userId”。</span><br><span class="line">注意：resultMap和resultType不能同时存在。另外还有resultMap 元素，它是 MyBatis 中最重要最强大的元素，它能提供级联查询，缓存等功能。</span><br><span class="line">4.1标签和属性分析：</span><br><span class="line">	resultMap的id属性是它的唯一标识，是映射的POJO类</span><br><span class="line">	&lt;id&gt;标签映射主键，&lt;result&gt;标签映射非主键</span><br><span class="line">	property设置POJO的属性名称，column映射查询结果的列名称</span><br><span class="line">4.2定义resultMap:</span><br><span class="line">	4.2.1需求：查询所有用户</span><br><span class="line">	4.2.2定义resultMap</span><br><span class="line">	4.2.3使用resultMap</span><br><span class="line">	4.2.4Mapper接口定义</span><br><span class="line">	4.2.5单元测试</span><br></pre></td></tr></table></figure>

<h4 id="五、动态SQL"><a href="#五、动态SQL" class="headerlink" title="五、动态SQL"></a>五、动态SQL</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.	定义：是指通过Mybatist提供的各种标签实现动态拼接SQL语句。</span><br><span class="line">   1.1	where if:需求：多条件查询</span><br><span class="line">   1.2	foreach:批量删除用户</span><br><span class="line">   1.2.1collection属性：表示被迭代的数组或集合</span><br><span class="line">   1.2.2item:表示被迭代的数组或集合中的每一个元素</span><br><span class="line">   1.2.3open:表示遍历前拼接的字符串</span><br><span class="line">   1.2.4separator:表示每个元素后的分隔符</span><br><span class="line">   1.2.5close：表示遍历后拼接的字符串</span><br><span class="line">   1.3	Sql片段：是指将重复的Sql提取出来，进行单独定义的节点。使用时用include引用Sql片段即可，最终达到Sql片段重用的目的。</span><br></pre></td></tr></table></figure>

<h3 id="章节四-关联查询与缓存"><a href="#章节四-关联查询与缓存" class="headerlink" title="章节四 关联查询与缓存"></a>章节四 关联查询与缓存</h3><h4 id="关联查询"><a href="#关联查询" class="headerlink" title="关联查询"></a>关联查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">1. 表与表之间存在三种关系：分别是一对一、一对多、多对多。</span><br><span class="line"></span><br><span class="line">2. 关联查询：指在查询某张表数据的同时也查询与该表关联表中的数据。</span><br><span class="line"></span><br><span class="line">3. 缓存：指将已经查询出的对象缓存在内存中，再次查询该对象时从内存中直接获取，不再从数据库获取，从而提高程序的运行效率。</span><br><span class="line"></span><br><span class="line">4. 一对一关联查询：给出需求：查询所有订单分别是哪些顾客订购的。</span><br><span class="line"></span><br><span class="line">5. 有两种方法创建用于视图的VO类，一种是使用扩展列的VO类，另一种是使用扩展实体的POJO类。</span><br><span class="line"></span><br><span class="line">   5.1方法一：</span><br><span class="line">   		5.1.1定义VO类：VO中的userInfo属性从父类继承，VO中的订单信息是类中的扩展列</span><br><span class="line">   		5.1.2Mapper映射配置（一对一查询，使用resultType实现）</span><br><span class="line">   		5.1.3Mapper接口定义</span><br><span class="line">   		5.1.4单元测试</span><br><span class="line">   		5.1.5打印运行</span><br><span class="line">   5.2方法二：</span><br><span class="line">   		5.2.1定义VO类OrdersVo:将UserInfoModel类的对象作为OrdersModel类的属性， UserInfoModel类的对象用于存储订单的用户信息。</span><br><span class="line">   		5.2.2Mapper映射配置（一对一查询，使用resultMap实现）</span><br><span class="line">   		5.2.3定义resultMap：</span><br><span class="line">   			5.2.3.1订单信息</span><br><span class="line">   			5.2.3.2用户信息（使用assciation作用：当一个实体类封装另一个实体类时，就需要它，并且只能一对一使用</span><br><span class="line">   		5.2.4Mapper接口定义</span><br><span class="line">   		5.2.5单元测试</span><br><span class="line">   		5.2.6打印运行</span><br><span class="line"></span><br><span class="line">6. 一对多关联查询：需求：查询订单及其订单明细和订单用户</span><br><span class="line"></span><br><span class="line">   6.1给出需求：查询订单及其订单明细和订单用户</span><br><span class="line">   6.2需求分析：一个订单可以购买多个商品，因此订单与商品之间是一对多的关系。</span><br><span class="line">   6.3步骤：</span><br><span class="line"></span><br><span class="line">   ​	6.3.1定义POJO类</span><br><span class="line">   ​		6.3.2Mapper映射配置（一对多）</span><br><span class="line">   ​		6.3.3resultMap定义：</span><br><span class="line">   ​			6.3.3.1extends:实现订单信息和用户信息从OrderAndUserInfoResultMap继承；</span><br><span class="line">   ​			6.3.3.2collection：对关联查询到多条记录映射到一个list集合对象中（一对多使用）</span><br><span class="line">   ​			6.3.3.3ofType:指定映射到list集合属性中pojo类型</span><br><span class="line">   ​		6.3.4Mapper接口定义</span><br><span class="line">   ​		6.3.5单元测试</span><br><span class="line">   ​		6.3.6打印运行</span><br><span class="line"></span><br><span class="line">测试结果表明：一对多查询先于一对一查询执行打印出来。问题：为什么orderdetailModel不能改为orderdetailModels?其他却可以改？</span><br><span class="line">自己测试总结：private List&lt;OrderdetailModel&gt; orderdetailModel&#x3D;null;代码中OrderdetailModel不能加s,否则编译错误，orderdetailModel也不行，否则找不到getting方法。</span><br><span class="line"></span><br><span class="line">7. 多对多关联查询：需求：查询用户和用户购买的商品</span><br><span class="line"></span><br><span class="line">7.1需求：查询用户和用户购买的商品</span><br><span class="line">	7.2需求分析：由于用户有多个，商品也有多个，用户与商品之间形成多对多的关系。</span><br><span class="line">	7.3步骤：</span><br><span class="line">		7.3.1定义POJO类UserInfoModel,封装OrdersModel类</span><br><span class="line">		7.3.2定义OrdersModel类，封装UserInfoModel类和OrderdetailModel类</span><br><span class="line">		7.3.3定义OrderdetailModel类，封装GoodsModel类</span><br><span class="line">		7.3.4定义GoodsModel类</span><br><span class="line">		7.3.5userinfoMapper.xml映射配置findUserAndGoods</span><br><span class="line">		7.3.6resultMap定义UserAndGoodsResultMap</span><br><span class="line">		7.3.7IUserInfoMapper接口定义findUserAndGoods方法</span><br><span class="line">		7.3.8TestFindOrderAndOrderDetail.java单元测试</span><br><span class="line">		7.3.9打印运行</span><br><span class="line"></span><br><span class="line">补充：级联的优点是获取关联数据十分方便，但是级联过多会增加数据库系统的复杂度，同时降低系统的性能。如果表 A 中有一个外键引用了表 B 的主键，A 表就是子表，B 表就是父表。当查询表 A 的数据时，通过表 A 的外键将表 B 的相关记录返回，这就是级联查询。例如，当查询一个人的信息时，同时根据外键（身份证号）将他的身份证信息返回。</span><br></pre></td></tr></table></figure>

<h4 id="关联查询总结"><a href="#关联查询总结" class="headerlink" title="关联查询总结"></a>关联查询总结</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">1.	resultType:</span><br><span class="line">   作用：将查询结果按照sql列名和pojo属性名一致性映射到pojo中。</span><br><span class="line">   场合：常见一些明细记录的展示，比如用户购买商品明细，将关联查询信息全部展示在页面时，此时可直接使用resultType将每一条记录映射到pojo中，在前端页面遍历list（list中是pojo）即可。</span><br><span class="line">2.	resultMap:</span><br><span class="line">   联合查询必须用resultMap，它可以使用association（联合）和 collection（集合）完成一对一和一对多高级映射。</span><br><span class="line">   2.1 association：</span><br><span class="line">   2.1.1作用：</span><br><span class="line">   	实现一对一关联查询。将关联查询信息映射到一个pojo对象中。</span><br><span class="line">   2.1.2场合：</span><br><span class="line">   	为了方便查询关联信息可以使用association将关联订单信息映射为用户对象的pojo属性中，比如：查询订单及关联用户信息。</span><br><span class="line"></span><br><span class="line">使用resultType无法将查询结果映射到pojo对象的pojo属性中，根据对结果集查询遍历的需要选择使用resultType还是resultMap。</span><br><span class="line"></span><br><span class="line">2.2collection：</span><br><span class="line"></span><br><span class="line">2.2.1作用：</span><br><span class="line">         实现一对多或多对多关联查询。将关联查询信息映射到一个list集合中。</span><br><span class="line">2.2.2场合：</span><br><span class="line">         为了方便查询遍历关联信息可以使用collection将关联信息映射到list集合中，比如：查询用户权限范围模块及模块下的菜单，可使用collection将模块映射到模块list中，将菜单列表映射到模块对象的菜单list属性中，这样的作的目的也是方便对查询结果集进行遍历查询。</span><br><span class="line">		如果使用resultType无法将查询结果映射到list集合中。</span><br><span class="line"></span><br><span class="line">总结两者：</span><br><span class="line">resultMap可以实现延迟加载，resultType无法实现延迟加载。</span><br><span class="line">resultMap使用association和collection分别完成一对一和一对多高级映射（对结果有特殊的映射要求）。</span><br><span class="line"></span><br><span class="line">jdbc问题总结如下：</span><br><span class="line">1、数据库连接创建、释放频繁造成系统资源浪费，从而影响系统性能。如果使用数据库连接池可解决此问题。</span><br><span class="line">2、Sql语句在代码中硬编码，造成代码不易维护，实际应用中sql变化的可能较大，sql变动需要改变java代码。</span><br><span class="line">3、使用preparedStatement向占有位符号传参数存在硬编码，因为sql语句的where条件不一定，可能多也可能少，修改sql还要修改代码，系统不易维护。</span><br><span class="line">4、对结果集解析存在硬编码（查询列名），sql变化导致解析代码变化，系统不易维护，如果能将数据库记录封装成pojo对象解析比较方便。</span><br><span class="line"></span><br><span class="line">Mybatis解决jdbc编程的问题</span><br><span class="line">1、数据库连接创建、释放频繁造成系统资源浪费从而影响系统性能，如果使用数据库连接池可解决此问题。</span><br><span class="line">解决：在SqlMapConfig.xml中配置数据连接池，使用连接池管理数据库链接。</span><br><span class="line">2、Sql语句写在代码中造成代码不易维护，实际应用sql变化的可能较大，sql变动需要改变java代码。</span><br><span class="line">解决：将Sql语句配置在XXXXmapper.xml文件中与java代码分离。</span><br><span class="line">3、向sql语句传参数麻烦，因为sql语句的where条件不一定，可能多也可能少，占位符需要和参数一一对应。</span><br><span class="line">解决：Mybatis自动将java对象映射至sql语句，通过statement中的parameterType定义输入参数的类型。</span><br><span class="line">4、对结果集解析麻烦，sql变化导致解析代码变化，且解析前需要遍历，如果能将数据库记录封装成pojo对象解析比较方便。</span><br><span class="line">解决：Mybatis自动将sql执行结果映射至java对象，通过statement中的resultType定义输出结果的类型。</span><br></pre></td></tr></table></figure>

<h4 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.	懒加载定义：MyBatis中的延迟加载，也称为懒加载，是指在进行表的关联查询时，使用Mybatis的懒加载特性可有效的减少数据库的压力。例如在进行一对多查询的时候，只查询出一方，当程序中需要多方的数据时，mybatis再发出sql语句进行查询，这样子延迟加载就可以的减少数据库压力。</span><br><span class="line">   Mybatis一对一关联的association和一对多的collection可以实现懒加载。懒加载时要使用resultMap，不能使用resultType。</span><br><span class="line"></span><br><span class="line">2.	启动懒加载：</span><br><span class="line">   Mybatis默认没有打开懒加载配置，需要在SqlMapperConfig.xml中通过settings配置lazyLoadingEnabled、aggressiveLazyLoading来开启懒加载。</span><br><span class="line"></span><br><span class="line">3.	懒加载总结：</span><br><span class="line">   3.1作用：</span><br><span class="line">   	当需要查询关联信息时再去数据库查询，默认不去关联查询，提高数据库性能。</span><br><span class="line">   	只有使用resultMap支持懒加载设置。</span><br><span class="line">   3.2使用场合：</span><br><span class="line">   	当只有部分记录需要关联查询其它表的记录时，此时可按需延迟加载，需要关联查询时再向数据库发出sql，以提高数据库性能。</span><br><span class="line">   	当全部需要关联查询信息时，此时不用懒加载，直接将关联查询信息全部返回即可，可使用resultType或resultMap完成映射。</span><br><span class="line">   3.3配置方法:</span><br><span class="line">   	Collection和association都需要配置select和column属性。</span><br><span class="line">   	两者配置方法相同。</span><br></pre></td></tr></table></figure>

<h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><h4 id="一、为什么使用缓存"><a href="#一、为什么使用缓存" class="headerlink" title="一、为什么使用缓存"></a>一、为什么使用缓存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.作用：为了减去数据库的压力，提高数据库的性能。缓存是使用Map集合缓存数据的。</span><br><span class="line"></span><br><span class="line">2.MyBatis 的缓存分为一级缓存和二级缓存。</span><br><span class="line">	一级缓存是 SqlSession 级别的缓存</span><br><span class="line">	二级缓存是 mapper 级别的缓存，多个 SqlSession 共享</span><br><span class="line">	一级缓存的作用域是同一个SQLSession</span><br><span class="line">	二级缓存的作用域是Mapper的同一个namespace</span><br><span class="line">	Mybtais默认开启一级缓存，二级缓存需要在settings全局参数中配置开启。</span><br></pre></td></tr></table></figure>



<h4 id="二、一级缓存"><a href="#二、一级缓存" class="headerlink" title="二、一级缓存"></a>二、一级缓存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">一级缓存是 SqlSession 级别的缓存，是基于 HashMap 的本地缓存。当同一个 SqlSession 执行两次相同的 sql 语句时，第一次执行完后会将数据库中查询的数据写到缓存，第二次查询时直接从缓存获取不用去数据库查询。不同的 SqlSession 之间的缓存数据区域互不影响。</span><br><span class="line">	Mybatis内部存储缓存使用一个HashMap缓存数据，key为hashCode+sqlId+Sql语句。Value为从查询出来映射生成的java对象。</span><br><span class="line">	当 SqlSession 执行 insert、update、delete 操作并commit提交到数据库后会清空缓存区域，保证缓存中的信息是最新的。防止后续查询发生脏读（脏读：查询到过期的数据）。</span><br></pre></td></tr></table></figure>



<h4 id="三、二级缓存"><a href="#三、二级缓存" class="headerlink" title="三、二级缓存"></a>三、二级缓存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">二级缓存是 mapper 级别的缓存，同样是基于 HashMap 进行存储，多个 SqlSession 可以共用二级缓存，其作用域是 mapper 的同一个 namespace。不同的 SqlSession 两次执行相同的 namespace 下的 sql 语句，会执行相同的 sql，第二次查询只会查询第一次查询时读取数据库后写到缓存的数据，不会再去数据库查询。</span><br><span class="line">	Mybatis内部存储缓存使用一个HashMap缓存数据，key为hashCode+sqlId+Sql语句。Value为从查询出来映射生成的java对象。</span><br><span class="line">	当 SqlSession 执行 insert、update、delete 操作并commit提交到数据库后会清空缓存区域，保证缓存中的信息是最新的。防止后续查询发生脏读（脏读：查询到过期的数据）。</span><br><span class="line"></span><br><span class="line">配置二级缓存：</span><br><span class="line">第一步：在SqlMapperConfig.xml中启用二级缓存：</span><br><span class="line">&lt;setting name&#x3D;&quot;cacheEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;</span><br><span class="line">第二步：POJO序列化，将所有POJO类实现序列化接口。</span><br><span class="line">第三步：在配置映射文件中添加&lt;cache&#x2F;&gt;,表示此mapper开启二级缓存</span><br></pre></td></tr></table></figure>



<h4 id="四、禁用二级缓存"><a href="#四、禁用二级缓存" class="headerlink" title="四、禁用二级缓存"></a>四、禁用二级缓存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useCache&#x3D;&quot;false&quot;:表示禁用二级缓存，每次查询都会发出sql去查询，默认情况是true.</span><br></pre></td></tr></table></figure>

<h4 id="五、刷新缓存（清空缓存）"><a href="#五、刷新缓存（清空缓存）" class="headerlink" title="五、刷新缓存（清空缓存）"></a>五、刷新缓存（清空缓存）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在mapper的同一个namespace中，如果有其它insert、update、delete操作数据后需要刷新缓存，设置fulshCache&#x3D;”true”属性即可刷新缓存，默认是true.</span><br></pre></td></tr></table></figure>

<h4 id="六、缓存总结"><a href="#六、缓存总结" class="headerlink" title="六、缓存总结"></a>六、缓存总结</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">对于访问多的查询请求且用户对查询结果实时性不高时采用二级缓存技术降低数据库访问量，提高访问速度。例如耗时较高的统计分析sql。通过设置flushnternal（时间间隔），让其每隔一段时间自动清空缓存，比如设置为60分钟，24小时等。</span><br><span class="line">对于实时性要求较高的查询不能使用缓存，例如股票行情。</span><br></pre></td></tr></table></figure>

<h4 id="七、逆向工程"><a href="#七、逆向工程" class="headerlink" title="七、逆向工程"></a>七、逆向工程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.定义：逆向工程是指根据数据库生成java代码，正向工程是指根据java代码生成数据库。</span><br><span class="line">	MyBatis一个主要的特点就是需要程序员自己编写SQL，那么如果表太多的话，难免会很麻烦，所以MyBatis官方提供了一个逆向工程，可以针对单表自动生成MyBatis执行所需要的代码（包括po类，mapper.xml映射文件和Mapper接口等）。一般在实际开发中，常用的逆向工程方式是通过数据库的表生成代码。</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">PanXiaoKang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2020/04/13/Mybaits%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/">http://example.com/2020/04/13/Mybaits%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">向阳榆木</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MyBatis/">MyBatis</a></div><div class="post_share"><div class="social-share" data-image="/img/butterfly.jpg" data-sites="qq,wechat,facebook,twitter,weibo"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://s1.ax1x.com/2020/06/09/t40mLD.th.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://s1.ax1x.com/2020/06/09/t4czVK.th.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/04/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%90%86%E8%AE%BA/"><img class="prev_cover lazyload" data-src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=228400941,1528450213&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.png'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数据库理论</div></div></a></div><div class="next-post pull_right"><a href="/2020/04/12/Hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8/"><img class="next_cover lazyload" data-src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2010232996,1620516668&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.png'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hexo博客使用出错记录</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: true,
  verify: true,
  appId: 'z2GwNsG7RRpWpx5rt7psedl5-MdYXbMMI',
  appKey: 'gI6Yhfwz4JiUIv9546gepko8',
  placeholder: '来吧，造作吧，快活吧，肆无忌惮吧！(～￣▽￣)～',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By PanXiaoKang</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">小伙伴们好！欢迎来到<a href="https://panyongkang.github.io/" target="_blank" rel="noopener">向阳榆木</a>的博客！</div><div class="icp"><a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>黔ICP备54587259号</span></a></div><div id="running-time"></div><script>setInterval(()=>{let create_time=Math.round(new Date(Date.UTC(2020,01,01,0,0,0)).getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已安全运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script><script src="/js/search/local-search.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/platelet.model.json"},"display":{"position":"right","width":200,"height":500},"mobile":{"show":true},"log":false});</script></body></html>