<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ç”µå­è´­ç‰©å•†åŸé¡¹ç›® | å‘é˜³æ¦†æœ¨</title><meta name="description" content="ç”µå­è´­ç‰©å•†åŸé¡¹ç›®"><meta name="keywords" content="ç”µå­è´­ç‰©,å•†åŸ"><meta name="author" content="PanXiaoKang"><meta name="copyright" content="PanXiaoKang"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/Lotus.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="wyZknSW2XMDLHhrSvtifCN1aQwr2nn53ydI_lDzVJmI"/><meta name="baidu-site-verification" content="p1OeTLcEA8"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ç”µå­è´­ç‰©å•†åŸé¡¹ç›®"><meta name="twitter:description" content="ç”µå­è´­ç‰©å•†åŸé¡¹ç›®"><meta name="twitter:image" content="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2491061951,1023884889&amp;fm=26&amp;gp=0.jpg"><meta property="og:type" content="article"><meta property="og:title" content="ç”µå­è´­ç‰©å•†åŸé¡¹ç›®"><meta property="og:url" content="http://example.com/2020/04/15/%E7%94%B5%E5%AD%90%E8%B4%AD%E7%89%A9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/"><meta property="og:site_name" content="å‘é˜³æ¦†æœ¨"><meta property="og:description" content="ç”µå­è´­ç‰©å•†åŸé¡¹ç›®"><meta property="og:image" content="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2491061951,1023884889&amp;fm=26&amp;gp=0.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://example.com/2020/04/15/%E7%94%B5%E5%AD%90%E8%B4%AD%E7%89%A9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/"><link rel="prev" title="windowsç³»ç»Ÿæ“ä½œ" href="http://example.com/2020/04/15/windows%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C/"><link rel="next" title="æ•°æ®åº“ç†è®º" href="http://example.com/2020/04/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%90%86%E8%AE%BA/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"æœ€è¿‘æœ‰ç‚¹å¤±çœ äº†,æ¯å¤©è¢«è‡ªå·±å¸…é†’,å¸…æ—©å·²æˆä¸ºè´Ÿæ‹…,é™¤äº†å¸…ä¸€æ— æ‰€æœ‰,å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,è‡ªç”±,å¹³ç­‰,å…¬æ­£,æ³•æ²»,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„","fontSize":"20px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'true',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://s1.ax1x.com/2020/06/09/t40ARx.th.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">103</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">235</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fa fa-random"></i><span> éšæœºæ–‡ç« </span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-large" aria-hidden="true"></i><span> å½’æ¡£</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tagsnet/"><i class="fa-fw fa fa-connectdevelop"></i><span> å…³ç³»ç½‘</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-send-o" aria-hidden="true"></i><span> å¯¼èˆªæ </span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://xyyum.icu/mypages/OnlyI.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> ä¸»é¡µå¯¼èˆª</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/xkzhdh/Integrated.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-paper-plane-o"></i><span> ç»¼åˆå¯¼èˆª</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/software/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> è½¯ä»¶åˆ†äº«</span></a></li><li><a class="site-page" href="/sunshineBookshelf/"><i class="fa-fw fa fa-university"></i><span> å‘é˜³ä¹¦æ¶</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> åˆ—è¡¨</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> ä¹¦ç±</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> æ¸¸æˆ</span></a></li><li><a class="site-page" href="/bilibili/"><i class="fa-fw fa fa-play-circle"></i><span> ç•ªå‰§</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fa fa-play-circle-o"></i><span> å½±è§†</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-link" aria-hidden="true"></i><span> å‹æƒ…é“¾æ¥</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page" href="https://yumuxy.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> æ¡‘æ¦†æœªæ™š</span></a></li><li><a class="site-page" href="https://lllzxqq.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> ååğŸ’–é›¨å­£</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-user-circle-o" aria-hidden="true"></i><span> å…³äºæˆ‘</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="http://www.xbmu.edu.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-graduation-cap"></i><span> æ¯æ ¡</span></a></li><li><a class="site-page" href="/workshop/"><i class="fa-fw fa fa-heartbeat"></i><span> ä½œå“</span></a></li><li><a class="site-page" href="/mybook/"><i class="fa-fw fa fa-book"></i><span> è‡ªä¼ </span></a></li><li><a class="site-page" href="/anires/"><i class="fa-fw fa fa-list-alt"></i><span> ç®€å†</span></a></li><li><a class="site-page" href="/vcard/"><i class="fa-fw fa fa-vcard-o"></i><span> åç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gamepad" aria-hidden="true"></i><span> å¨±ä¹</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://playground.z.wiki/typing-game/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> æ‰“å­—æ¸¸æˆ</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/GreedySnake/GreedySnake.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-lastfm"></i><span> è´ªåƒè›‡</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/nineGridGame/nineGridGame.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> æŠ½å¥–æ¸¸æˆ</span></a></li><li><a class="site-page" href="/petalage/"><i class="fa-fw fa fa-gamepad"></i><span> è¡¨ç™½æ—¶åˆ»</span></a></li><li><a class="site-page" href="/yszq/"><i class="fa-fw fa fa-gamepad"></i><span> 3Då…ƒç´ </span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gear (alias)" aria-hidden="true"></i><span> å·¥å…·å¹³å°</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/xkdm/"><i class="fa-fw fa fa-star"></i><span> æ˜Ÿç©ºå¼¹å¹•</span></a></li><li><a class="site-page" href="https://xyym.avosapps.us/" target="_blank" rel="noopener"><i class="fa-fw fa fa-commenting-o"></i><span> è¯„è®ºç®¡ç†</span></a></li><li><a class="site-page" href="https://myhkw.cn/admin/user/login/" target="_blank" rel="noopener"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹åå°</span></a></li><li><a class="site-page" href="https://www.superbed.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-area-chart"></i><span> èšåˆå›¾åºŠ</span></a></li><li><a class="site-page" href="/encryptedPages/"><i class="fa-fw fa fa-lock"></i><span> åŠ å¯†è®¿é—®</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> çºªå¿µç©ºé—´</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/3d-gallery/"><i class="fa-fw fa fa-university"></i><span> 3Dç›¸å†Œå±‹</span></a></li><li><a class="site-page" href="/live-photo/"><i class="fa-fw fa fa-photo"></i><span> é’æ˜¥æ ¡å›­</span></a></li><li><a class="site-page" href="/photo-wall/"><i class="fa-fw fa fa-th"></i><span> ç”Ÿæ´»ç…§ç‰‡</span></a></li><li><a class="site-page" href="/video-wall/"><i class="fa-fw fa fa-video-camera"></i><span> åœ¨çº¿è§†é¢‘</span></a></li><li><a class="site-page" href="/mtxx/"><i class="fa-fw fa fa-file-photo-o"></i><span> ç¾å›¾ç§€ç§€</span></a></li><li><a class="site-page" href="/timeStoryline/"><i class="fa-fw fa fa-file-video-o"></i><span> æ—¶é—´æ•…äº‹çº¿</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#é¡¹ç›®å‚»ç“œå¼æµç¨‹"><span class="toc-number">1.</span> <span class="toc-text">é¡¹ç›®å‚»ç“œå¼æµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹1-ç”¨æˆ·æ³¨å†Œ"><span class="toc-number">1.1.</span> <span class="toc-text">æ¡ˆä¾‹1-ç”¨æˆ·æ³¨å†Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹2-ç”¨æˆ·æ¿€æ´»"><span class="toc-number">1.2.</span> <span class="toc-text">æ¡ˆä¾‹2-ç”¨æˆ·æ¿€æ´»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹3-ç”¨æˆ·ç™»å½•"><span class="toc-number">1.3.</span> <span class="toc-text">æ¡ˆä¾‹3-ç”¨æˆ·ç™»å½•</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#login-jspè¡¨å•ç™»å½•ä»£ç "><span class="toc-number">1.3.1.</span> <span class="toc-text">login.jspè¡¨å•ç™»å½•ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JséªŒè¯ä¿¡æ¯ä»£ç "><span class="toc-number">1.3.2.</span> <span class="toc-text">JséªŒè¯ä¿¡æ¯ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#UserServlet-javaä»£ç "><span class="toc-number">1.3.3.</span> <span class="toc-text">UserServlet.javaä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#UserService-javaä»£ç "><span class="toc-number">1.3.4.</span> <span class="toc-text">UserService.javaä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹4-ç”¨æˆ·é€€å‡º"><span class="toc-number">1.4.</span> <span class="toc-text">æ¡ˆä¾‹4-ç”¨æˆ·é€€å‡º</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Header-jspä»£ç å±•ç¤º"><span class="toc-number">1.4.1.</span> <span class="toc-text">Header.jspä»£ç å±•ç¤º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#è¿›å…¥UserServlet-javaä»£ç "><span class="toc-number">1.4.2.</span> <span class="toc-text">è¿›å…¥UserServlet.javaä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ‰©å±•æ¡ˆä¾‹-è®°ä½ç”¨æˆ·å"><span class="toc-number">1.5.</span> <span class="toc-text">æ‰©å±•æ¡ˆä¾‹-è®°ä½ç”¨æˆ·å</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Login-jspä»£ç å±•ç¤º"><span class="toc-number">1.5.1.</span> <span class="toc-text">Login.jspä»£ç å±•ç¤º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#è¿›å…¥UserServlet-javaä»£ç -1"><span class="toc-number">1.5.2.</span> <span class="toc-text">è¿›å…¥UserServlet.javaä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Constant-javaä»£ç "><span class="toc-number">1.5.3.</span> <span class="toc-text">Constant.javaä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹5-å‰å°åˆ†ç±»ä¿¡æ¯å±•ç¤º"><span class="toc-number">1.6.</span> <span class="toc-text">æ¡ˆä¾‹5-å‰å°åˆ†ç±»ä¿¡æ¯å±•ç¤º</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Header-jspä»£ç "><span class="toc-number">1.6.1.</span> <span class="toc-text">Header.jspä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Header-jspä»£ç -1"><span class="toc-number">1.6.2.</span> <span class="toc-text">Header.jspä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ProductServlet-javaä»£ç "><span class="toc-number">1.6.3.</span> <span class="toc-text">ProductServlet.javaä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ProductService-javaä»£ç "><span class="toc-number">1.6.4.</span> <span class="toc-text">ProductService.javaä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ProductDao-javaä»£ç "><span class="toc-number">1.6.5.</span> <span class="toc-text">ProductDao.javaä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹6-æœ€æ–°å•†å“å’Œçƒ­é—¨å•†å“å±•ç¤º"><span class="toc-number">1.7.</span> <span class="toc-text">æ¡ˆä¾‹6-æœ€æ–°å•†å“å’Œçƒ­é—¨å•†å“å±•ç¤º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹7-å•ä¸ªå•†å“è¯¦æƒ…"><span class="toc-number">1.8.</span> <span class="toc-text">æ¡ˆä¾‹7-å•ä¸ªå•†å“è¯¦æƒ…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹8-åˆ†ç±»å•†å“çš„åˆ†é¡µå±•ç¤º"><span class="toc-number">1.9.</span> <span class="toc-text">æ¡ˆä¾‹8-åˆ†ç±»å•†å“çš„åˆ†é¡µå±•ç¤º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹9-æ·»åŠ åˆ°è´­ç‰©è½¦"><span class="toc-number">1.10.</span> <span class="toc-text">æ¡ˆä¾‹9-æ·»åŠ åˆ°è´­ç‰©è½¦</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#æ­¥éª¤åˆ†æ"><span class="toc-number">1.10.1.</span> <span class="toc-text">æ­¥éª¤åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Product-info-jspéƒ¨åˆ†ä»£ç "><span class="toc-number">1.10.2.</span> <span class="toc-text">Product_info.jspéƒ¨åˆ†ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CartServlet-javaä»£ç "><span class="toc-number">1.10.3.</span> <span class="toc-text">CartServlet.javaä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ProductService-javaä»£ç -1"><span class="toc-number">1.10.4.</span> <span class="toc-text">ProductService.javaä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ProductDao-javaä»£ç -1"><span class="toc-number">1.10.5.</span> <span class="toc-text">ProductDao.javaä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹10-ä»è´­ç‰©è½¦ç§»é™¤ä¸€ä¸ªå•†å“"><span class="toc-number">1.11.</span> <span class="toc-text">æ¡ˆä¾‹10-ä»è´­ç‰©è½¦ç§»é™¤ä¸€ä¸ªå•†å“</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cart-jspä»£ç "><span class="toc-number">1.11.1.</span> <span class="toc-text">Cart.jspä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CartServlet-javaä»£ç -1"><span class="toc-number">1.11.2.</span> <span class="toc-text">CartServlet.javaä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹11-æ¸…ç©ºè´­ç‰©è½¦"><span class="toc-number">1.12.</span> <span class="toc-text">æ¡ˆä¾‹11-æ¸…ç©ºè´­ç‰©è½¦</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cart-jspéƒ¨åˆ†ä»£ç "><span class="toc-number">1.12.1.</span> <span class="toc-text">Cart.jspéƒ¨åˆ†ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CartServlet-javaä»£ç -2"><span class="toc-number">1.12.2.</span> <span class="toc-text">CartServlet.javaä»£ç </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹12-ç”Ÿæˆè®¢å•"><span class="toc-number">1.13.</span> <span class="toc-text">æ¡ˆä¾‹12-ç”Ÿæˆè®¢å•</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#æ­¥éª¤åˆ†æï¼š"><span class="toc-number">1.13.1.</span> <span class="toc-text">æ­¥éª¤åˆ†æï¼š</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹13-æˆ‘çš„è®¢å•"><span class="toc-number">1.14.</span> <span class="toc-text">æ¡ˆä¾‹13-æˆ‘çš„è®¢å•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¡ˆä¾‹14-è®¢å•è¯¦æƒ…"><span class="toc-number">1.15.</span> <span class="toc-text">æ¡ˆä¾‹14-è®¢å•è¯¦æƒ…</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2491061951,1023884889&amp;fm=26&amp;gp=0.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">å‘é˜³æ¦†æœ¨</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fa fa-random"></i><span> éšæœºæ–‡ç« </span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-large" aria-hidden="true"></i><span> å½’æ¡£</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tagsnet/"><i class="fa-fw fa fa-connectdevelop"></i><span> å…³ç³»ç½‘</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-send-o" aria-hidden="true"></i><span> å¯¼èˆªæ </span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://xyyum.icu/mypages/OnlyI.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> ä¸»é¡µå¯¼èˆª</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/xkzhdh/Integrated.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-paper-plane-o"></i><span> ç»¼åˆå¯¼èˆª</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/software/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-send"></i><span> è½¯ä»¶åˆ†äº«</span></a></li><li><a class="site-page" href="/sunshineBookshelf/"><i class="fa-fw fa fa-university"></i><span> å‘é˜³ä¹¦æ¶</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> åˆ—è¡¨</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> ä¹¦ç±</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> æ¸¸æˆ</span></a></li><li><a class="site-page" href="/bilibili/"><i class="fa-fw fa fa-play-circle"></i><span> ç•ªå‰§</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fa fa-play-circle-o"></i><span> å½±è§†</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-link" aria-hidden="true"></i><span> å‹æƒ…é“¾æ¥</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page" href="https://yumuxy.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> æ¡‘æ¦†æœªæ™š</span></a></li><li><a class="site-page" href="https://lllzxqq.gitee.io/" target="_blank" rel="noopener"><i class="fa-fw fa fa-link"></i><span> ååğŸ’–é›¨å­£</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-user-circle-o" aria-hidden="true"></i><span> å…³äºæˆ‘</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="http://www.xbmu.edu.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-graduation-cap"></i><span> æ¯æ ¡</span></a></li><li><a class="site-page" href="/workshop/"><i class="fa-fw fa fa-heartbeat"></i><span> ä½œå“</span></a></li><li><a class="site-page" href="/mybook/"><i class="fa-fw fa fa-book"></i><span> è‡ªä¼ </span></a></li><li><a class="site-page" href="/anires/"><i class="fa-fw fa fa-list-alt"></i><span> ç®€å†</span></a></li><li><a class="site-page" href="/vcard/"><i class="fa-fw fa fa-vcard-o"></i><span> åç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gamepad" aria-hidden="true"></i><span> å¨±ä¹</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="https://playground.z.wiki/typing-game/index.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> æ‰“å­—æ¸¸æˆ</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/GreedySnake/GreedySnake.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-lastfm"></i><span> è´ªåƒè›‡</span></a></li><li><a class="site-page" href="https://xyyum.icu/mypages/nineGridGame/nineGridGame.html" target="_blank" rel="noopener"><i class="fa-fw fa fa-gamepad"></i><span> æŠ½å¥–æ¸¸æˆ</span></a></li><li><a class="site-page" href="/petalage/"><i class="fa-fw fa fa-gamepad"></i><span> è¡¨ç™½æ—¶åˆ»</span></a></li><li><a class="site-page" href="/yszq/"><i class="fa-fw fa fa-gamepad"></i><span> 3Då…ƒç´ </span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-gear (alias)" aria-hidden="true"></i><span> å·¥å…·å¹³å°</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/xkdm/"><i class="fa-fw fa fa-star"></i><span> æ˜Ÿç©ºå¼¹å¹•</span></a></li><li><a class="site-page" href="https://xyym.avosapps.us/" target="_blank" rel="noopener"><i class="fa-fw fa fa-commenting-o"></i><span> è¯„è®ºç®¡ç†</span></a></li><li><a class="site-page" href="https://myhkw.cn/admin/user/login/" target="_blank" rel="noopener"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹åå°</span></a></li><li><a class="site-page" href="https://www.superbed.cn/" target="_blank" rel="noopener"><i class="fa-fw fa fa-area-chart"></i><span> èšåˆå›¾åºŠ</span></a></li><li><a class="site-page" href="/encryptedPages/"><i class="fa-fw fa fa-lock"></i><span> åŠ å¯†è®¿é—®</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> çºªå¿µç©ºé—´</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/3d-gallery/"><i class="fa-fw fa fa-university"></i><span> 3Dç›¸å†Œå±‹</span></a></li><li><a class="site-page" href="/live-photo/"><i class="fa-fw fa fa-photo"></i><span> é’æ˜¥æ ¡å›­</span></a></li><li><a class="site-page" href="/photo-wall/"><i class="fa-fw fa fa-th"></i><span> ç”Ÿæ´»ç…§ç‰‡</span></a></li><li><a class="site-page" href="/video-wall/"><i class="fa-fw fa fa-video-camera"></i><span> åœ¨çº¿è§†é¢‘</span></a></li><li><a class="site-page" href="/mtxx/"><i class="fa-fw fa fa-file-photo-o"></i><span> ç¾å›¾ç§€ç§€</span></a></li><li><a class="site-page" href="/timeStoryline/"><i class="fa-fw fa fa-file-video-o"></i><span> æ—¶é—´æ•…äº‹çº¿</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">ç”µå­è´­ç‰©å•†åŸé¡¹ç›®</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="å‘è¡¨äº 2020-04-15 13:19:00"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2020-04-15</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="æ›´æ–°äº 2024-12-21 18:14:13"><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2024-12-21</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%A1%B9%E7%9B%AE/">é¡¹ç›®</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2020/04/15/%E7%94%B5%E5%AD%90%E8%B4%AD%E7%89%A9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/04/15/%E7%94%B5%E5%AD%90%E8%B4%AD%E7%89%A9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><hr>
<h3 id="é¡¹ç›®å‚»ç“œå¼æµç¨‹"><a href="#é¡¹ç›®å‚»ç“œå¼æµç¨‹" class="headerlink" title="é¡¹ç›®å‚»ç“œå¼æµç¨‹"></a>é¡¹ç›®å‚»ç“œå¼æµç¨‹</h3><blockquote>
<p>GitHubåœ°å€ï¼š<a href="https://github.com/panyongkang/gitRepository/tree/master/e-shop" target="_blank" rel="noopener">https://github.com/panyongkang/gitRepository/tree/master/e-shop</a></p>
</blockquote>
<h4 id="æ¡ˆä¾‹1-ç”¨æˆ·æ³¨å†Œ"><a href="#æ¡ˆä¾‹1-ç”¨æˆ·æ³¨å†Œ" class="headerlink" title="æ¡ˆä¾‹1-ç”¨æˆ·æ³¨å†Œ"></a>æ¡ˆä¾‹1-ç”¨æˆ·æ³¨å†Œ</h4><pre><code>éœ€æ±‚ï¼šåœ¨register.jspé¡µé¢å¡«å†™æ•°æ®ä¿¡æ¯ï¼Œç‚¹å‡»ä¿å­˜ï¼Œå°†æ•°æ®ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚  
æ­¥éª¤åˆ†æï¼š  
1.ç‚¹å‡»æ³¨å†Œï¼Œè·³è½¬é“¾æ¥åˆ°register.jspé¡µé¢  
2.åœ¨formè¡¨å•actionä¸­è·³è½¬åˆ°userRegisteræ–¹æ³•  
3.åœ¨userServletä¸­ç¼–å†™userRegisteræ–¹æ³•    
æ–¹æ³•ä¸­æ€è·¯æ­¥éª¤ï¼š  
è·å–å‰å°æ•°æ®å‚æ•°ï¼Œå¹¶å°è£…æˆuserå¯¹è±¡  
æ‰‹åŠ¨å°è£…æ•°æ®  
è°ƒç”¨serviceæ–¹æ³•å®Œæˆæ³¨å†Œ  
æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼Œè·³è½¬æ³¨å†ŒæˆåŠŸé¡µé¢  
4.åœ¨userServiceä¸­ï¼š
è°ƒç”¨daoæ–¹æ³•å®Œæˆæ³¨å†Œ  
å‘é€é‚®ä»¶  
5.åœ¨userDaoä¸­ï¼š  
è·å–æ•°æ®æº  
æ‹¼å†™sqlè¯­å¥ï¼Œæ‰§è¡Œinsertæ“ä½œã€‚  
</code></pre>
<h4 id="æ¡ˆä¾‹2-ç”¨æˆ·æ¿€æ´»"><a href="#æ¡ˆä¾‹2-ç”¨æˆ·æ¿€æ´»" class="headerlink" title="æ¡ˆä¾‹2-ç”¨æˆ·æ¿€æ´»"></a>æ¡ˆä¾‹2-ç”¨æˆ·æ¿€æ´»</h4><pre><code>éœ€æ±‚ï¼šç”¨æˆ·ç™»å½•é‚®ç®±åï¼Œç‚¹å‡»é‚®ç®±ä¸­çš„é“¾æ¥ï¼Œå®Œæˆç”¨æˆ·æ¿€æ´»æ“ä½œ  
æ­¥éª¤åˆ†æï¼š  
1.ç‚¹å‡»é‚®ç®±ä¸­çš„é“¾æ¥ï¼Œå‘å•†åœºuserServletå‘é€ä¸€ä¸ªè¯·æ±‚user?method=activeUser&amp;coed=xxxx  
2.åœ¨userServletä¸­ç¼–å†™activeæ–¹æ³•  
2.1æ¥æ”¶codeå‚æ•°  
2.2è°ƒç”¨serviceæ–¹æ³•å®Œæˆæ¿€æ´»  
2.3ç”Ÿæˆæç¤ºä¿¡æ¯ è½¬å‘  
    3.åœ¨serviceä¸­ç¼–å†™æ¿€æ´»æ–¹æ³•  
        é€šè¿‡codeè·å–ç”¨æˆ·  
            è‹¥æ²¡æœ‰æ‰¾åˆ°ï¼šæç¤ºé‡æ–°æ¿€æ´»æˆ–è€…é‡æ–°æ³¨å†Œ  
            è‹¥æ‰¾åˆ°äº†ï¼š  
                è®¾ç½®æ¿€æ´»çŠ¶æ€ä¸º1  
                å°†codeè®¾ç½®ä¸ºnull  
    4.åœ¨daoä¸­ç¼–å†™ä¸¤ä¸ªæ–¹æ³•  
        GetByCode()  
        Update()  
</code></pre>
<h4 id="æ¡ˆä¾‹3-ç”¨æˆ·ç™»å½•"><a href="#æ¡ˆä¾‹3-ç”¨æˆ·ç™»å½•" class="headerlink" title="æ¡ˆä¾‹3-ç”¨æˆ·ç™»å½•"></a>æ¡ˆä¾‹3-ç”¨æˆ·ç™»å½•</h4><pre><code>éœ€æ±‚ï¼šåœ¨ä¸€ä¸ªç™»å½•é¡µé¢ä¸Šï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»ç™»å½•ï¼Œå®Œæˆç™»å½•æ“ä½œ  
æ­¥éª¤åˆ†æï¼š  
1.åœ¨ingdex.jspä¸­ç‚¹å‡»ç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢login.jsp  
2.åœ¨userServletä¸­ç¼–å†™loginUI  
3.ä¿®æ”¹login.jspè¡¨å•çš„ä¿¡æ¯  
    actionï¼š/user?method=login  
    method  
    ç»™å­æ ‡ç­¾æ·»åŠ nameå±æ€§  
4.ç‚¹å‡»æäº¤å‘é€è¯·æ±‚  
5.åœ¨userServletä¸­ç¼–å†™loginæ–¹æ³•  
è·å–ç”¨æˆ·åå’Œå¯†ç   
è°ƒç”¨serviceå®Œæˆç™»å½• è¿”å›å€¼ï¼šuser  
è‹¥ç™»å½•æˆåŠŸï¼Œè·³è½¬åˆ°index.jspï¼Œå¹¶æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯  
è‹¥ç™»å½•å¤±è´¥ï¼Œè‹¥userä¸ºç©ºï¼šæç¤ºç”¨æˆ·åå’Œå¯†ç ï¼Œè·³è½¬åˆ°login.jsp  
è‹¥userä¸ä¸ºç©ºä½†æ˜¯æœªæ¿€æ´»ï¼šæç¤ºâ€œè¯·å…ˆå»é‚®ç®±æ¿€æ´»ï¼Œåœ¨ç™»å½•â€ è·³è½¬msg.jsp   
6.service,dao  
</code></pre>
<h5 id="login-jspè¡¨å•ç™»å½•ä»£ç "><a href="#login-jspè¡¨å•ç™»å½•ä»£ç " class="headerlink" title="login.jspè¡¨å•ç™»å½•ä»£ç "></a>login.jspè¡¨å•ç™»å½•ä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;form class&#x3D;&quot;form-horizontal&quot; id&#x3D;&quot;loginForm&quot; method&#x3D;&quot;post&quot; action&#x3D;&quot;$&#123;pageContext.request.contextPath &#125;&#x2F;user?method&#x3D;userLogin&quot;&gt;</span><br><span class="line">					&lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">						&lt;label for&#x3D;&quot;username&quot; class&#x3D;&quot;col-sm-2 control-label&quot;&gt;ç”¨æˆ·å&lt;&#x2F;label&gt;</span><br><span class="line">						&lt;div class&#x3D;&quot;col-sm-6&quot;&gt;</span><br><span class="line">							&lt;input type&#x3D;&quot;text&quot; class&#x3D;&quot;form-control&quot; id&#x3D;&quot;username&quot; name&#x3D;&quot;username&quot; </span><br><span class="line">								placeholder&#x3D;&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;&gt;</span><br><span class="line">						&lt;&#x2F;div&gt;</span><br><span class="line">						&lt;label id&#x3D;&quot;username-error&quot; class&#x3D;&quot;error&quot; for&#x3D;&quot;username&quot;&gt; &lt;&#x2F;label&gt;</span><br><span class="line">					&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">						&lt;label for&#x3D;&quot;inputPassword3&quot; class&#x3D;&quot;col-sm-2 control-label&quot;&gt;å¯†ç &lt;&#x2F;label&gt;</span><br><span class="line">						&lt;div class&#x3D;&quot;col-sm-6&quot;&gt;</span><br><span class="line">							&lt;input type&#x3D;&quot;password&quot; class&#x3D;&quot;form-control&quot; id&#x3D;&quot;password&quot; name&#x3D;&quot;password&quot;</span><br><span class="line">								placeholder&#x3D;&quot;è¯·è¾“å…¥å¯†ç &quot;&gt;</span><br><span class="line">						&lt;&#x2F;div&gt;</span><br><span class="line">						&lt;label id&#x3D;&quot;password-error&quot; class&#x3D;&quot;error&quot; for&#x3D;&quot;password&quot;&gt; &lt;&#x2F;label&gt;</span><br><span class="line">					&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">						&lt;label for&#x3D;&quot;inputPassword3&quot; class&#x3D;&quot;col-sm-2 control-label&quot;&gt;éªŒè¯ç &lt;&#x2F;label&gt;</span><br><span class="line">						&lt;div class&#x3D;&quot;col-sm-3&quot;&gt;</span><br><span class="line">							&lt;input type&#x3D;&quot;text&quot; class&#x3D;&quot;form-control&quot; id&#x3D;&quot;checkCode&quot; name&#x3D;&quot;checkCode&quot;</span><br><span class="line">								placeholder&#x3D;&quot;è¯·è¾“å…¥éªŒè¯ç &quot;&gt;</span><br><span class="line">						&lt;&#x2F;div&gt;</span><br><span class="line">						&lt;div class&#x3D;&quot;col-sm-3&quot;&gt;</span><br><span class="line">							&lt;img src&#x3D;&quot;$&#123;pageContext.request.contextPath &#125;&#x2F;checkImg&quot; onclick&#x3D;&quot;changeCheckImg(this)&quot; &#x2F;&gt;</span><br><span class="line">						&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">						&lt;div class&#x3D;&quot;col-sm-offset-2 col-sm-10&quot;&gt;</span><br><span class="line">							&lt;div class&#x3D;&quot;checkbox&quot;&gt;</span><br><span class="line">								&lt;label&gt; &lt;input type&#x3D;&quot;checkbox&quot;&gt; è‡ªåŠ¨ç™»å½•</span><br><span class="line">								&lt;&#x2F;label&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;label&gt; </span><br><span class="line">								&lt;input type&#x3D;&quot;checkbox&quot; name&#x3D;&quot;savename&quot; value&#x3D;&quot;ok&quot; &gt; è®°ä½ç”¨æˆ·å</span><br><span class="line">								&lt;&#x2F;label&gt;</span><br><span class="line">							&lt;&#x2F;div&gt;</span><br><span class="line">						&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">						&lt;div class&#x3D;&quot;col-sm-offset-2 col-sm-10&quot;&gt;</span><br><span class="line">							&lt;input type&#x3D;&quot;submit&quot; width&#x3D;&quot;100&quot; value&#x3D;&quot;ç™»å½•&quot; name&#x3D;&quot;submit&quot;</span><br><span class="line">								style&#x3D;&quot;background: url(&#39;.&#x2F;images&#x2F;login.gif&#39;) no-repeat scroll 0 0 rgba(0, 0, 0, 0); height: 35px; width: 100px; color: white;&quot;&gt;</span><br><span class="line">						&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;&#x2F;div&gt;</span><br><span class="line">					&lt;div id&#x3D;&quot;loginInfo&quot; style&#x3D;&quot;padding-left: 50px; color: red;&quot;&gt;</span><br><span class="line">						&lt;c:if test&#x3D;&quot;$&#123;loginInfo&#x3D;&#x3D;&#39;false&#39; &#125;&quot;&gt;</span><br><span class="line">							ç”¨æˆ·åæˆ–å¯†ç è¾“å…¥é”™è¯¯</span><br><span class="line">						&lt;&#x2F;c:if&gt;</span><br><span class="line">						&lt;c:if test&#x3D;&quot;$&#123;loginInfo&#x3D;&#x3D;&#39;notActive&#39; &#125;&quot;&gt;</span><br><span class="line">							ç”¨æˆ·å°šæœªæ¿€æ´»</span><br><span class="line">						&lt;&#x2F;c:if&gt;</span><br><span class="line">					&lt;&#x2F;div&gt;</span><br><span class="line">				&lt;&#x2F;form&gt;</span><br></pre></td></tr></table></figure>
<h5 id="JséªŒè¯ä¿¡æ¯ä»£ç "><a href="#JséªŒè¯ä¿¡æ¯ä»£ç " class="headerlink" title="JséªŒè¯ä¿¡æ¯ä»£ç "></a>JséªŒè¯ä¿¡æ¯ä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ç™»å½•è¡¨å•éªŒè¯</span><br><span class="line">$(&quot;#loginForm&quot;).validate(&#123;</span><br><span class="line">	rules:&#123;</span><br><span class="line">		username:&#123;</span><br><span class="line">			required:true</span><br><span class="line">		&#125;,</span><br><span class="line">		password:&#123;</span><br><span class="line">			required:true</span><br><span class="line">		&#125;,</span><br><span class="line">		checkCode:&#123;</span><br><span class="line">			required:true,</span><br><span class="line">			isRight:true</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;,</span><br><span class="line">	messages:&#123;</span><br><span class="line">		username:&#123;</span><br><span class="line">			required:&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		password:&#123;</span><br><span class="line">			required:&quot;è¯·è¾“å…¥å¯†ç &quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		checkCode:&#123;</span><br><span class="line">			required:&quot;è¯·è¾“å…¥éªŒè¯ç &quot;,</span><br><span class="line">			isRight:&quot;éªŒè¯ç ä¸æ­£ç¡®&quot;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="UserServlet-javaä»£ç "><a href="#UserServlet-javaä»£ç " class="headerlink" title="UserServlet.javaä»£ç "></a>UserServlet.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * ç”¨æˆ·ç™»å½•</span><br><span class="line"> * @param request</span><br><span class="line"> * @param response</span><br><span class="line"> * @throws IOException</span><br><span class="line"> *&#x2F;</span><br><span class="line">public void userLogin(HttpServletRequest request, HttpServletResponse response) throws IOException &#123;</span><br><span class="line">	Map&lt;String, String[]&gt; properties &#x3D; request.getParameterMap();</span><br><span class="line">	User loginUser &#x3D; new User();</span><br><span class="line">	try &#123;</span><br><span class="line">		BeanUtils.populate(loginUser, properties);</span><br><span class="line">	&#125; catch (IllegalAccessException | InvocationTargetException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">	UserService service &#x3D; new UserService();</span><br><span class="line">	User user &#x3D; service.login(loginUser);</span><br><span class="line">	if (user &#x3D;&#x3D; null) &#123;</span><br><span class="line">		&#x2F;&#x2F; è¡¨ç¤ºç”¨æˆ·ä¸å­˜åœ¨</span><br><span class="line">		request.getSession().setAttribute(&quot;loginInfo&quot;, &quot;false&quot;); &#x2F;&#x2F; å°†ç™»é™†ä¿¡æ¯å­˜åˆ°sessionä¸­</span><br><span class="line">		response.sendRedirect(request.getContextPath() + &quot;&#x2F;login.jsp&quot;);</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		if (user.getState() &#x3D;&#x3D; 0) &#123;</span><br><span class="line">			&#x2F;&#x2F; è¡¨ç¤ºç”¨æˆ·å°šæœªæ¿€æ´»</span><br><span class="line">			request.getSession().setAttribute(&quot;loginInfo&quot;, &quot;notActive&quot;);</span><br><span class="line">			response.sendRedirect(request.getContextPath() + &quot;&#x2F;login.jsp&quot;);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			&#x2F;&#x2F; è¡¨ç¤ºç™»é™†æˆåŠŸ</span><br><span class="line">			request.getSession().setAttribute(&quot;user&quot;, user);</span><br><span class="line">			</span><br><span class="line">&#x2F;************************è®°ä½ç”¨æˆ·åï¼šåˆ¤æ–­æ˜¯å¦å‹¾é€‰äº†è®°ä½ç”¨æˆ·å**************&#x2F;</span><br><span class="line">			if(Constant.SAVE_NAME.equals(request.getContextPath())) &#123;</span><br><span class="line">				Cookie c&#x3D; new Cookie(&quot;saveName&quot;, java.net.URLEncoder.encode(user.getUsername(), &quot;utf-8&quot;));</span><br><span class="line">				c.setMaxAge(Integer.MAX_VALUE);&#x2F;&#x2F;è®¾ç½®ä¿å­˜æ—¶é—´</span><br><span class="line">				c.setPath(request.getContextPath()+&quot;&#x2F;&quot;);&#x2F;&#x2F;æŒ‡å®šä¸€ä¸ªè·¯å¾„</span><br><span class="line">				response.addCookie(c);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			response.sendRedirect(request.getContextPath());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="UserService-javaä»£ç "><a href="#UserService-javaä»£ç " class="headerlink" title="UserService.javaä»£ç "></a>UserService.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">	&#x2F;**</span><br><span class="line">	 * ç”¨æˆ·ç™»é™†</span><br><span class="line">	 * @param user</span><br><span class="line">	 * @return</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public User login(User loginUser) &#123;</span><br><span class="line">		UserDao dao &#x3D; new UserDao();</span><br><span class="line">		User user &#x3D; null;</span><br><span class="line">		try &#123;</span><br><span class="line">			user &#x3D; dao.isRight(loginUser);</span><br><span class="line">		&#125; catch (SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		return user;</span><br><span class="line">	&#125;</span><br><span class="line">UserDao.javaä»£ç ï¼š</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®</span><br><span class="line">	 * @param user</span><br><span class="line">	 * @return</span><br><span class="line">	 * @throws SQLException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public User isRight(User user) throws SQLException &#123;</span><br><span class="line">		QueryRunner runner &#x3D; new QueryRunner(DataSourceUtils.getDataSource());</span><br><span class="line">		String sql &#x3D; &quot;select * from user where username&#x3D;? and password&#x3D;?&quot;;</span><br><span class="line">		return runner.query(sql, new BeanHandler&lt;User&gt;(User.class), user.getUsername(),user.getPassword());</span><br><span class="line">	&#125;</span><br><span class="line">Login.jspéªŒè¯ç éªŒè¯ä»£ç ï¼š</span><br><span class="line">	&lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">							&lt;label for&#x3D;&quot;inputPassword3&quot; class&#x3D;&quot;col-sm-2 control-label&quot;&gt;éªŒè¯ç &lt;&#x2F;label&gt;</span><br><span class="line">							&lt;div class&#x3D;&quot;col-sm-3&quot;&gt;</span><br><span class="line">								&lt;input type&#x3D;&quot;text&quot; class&#x3D;&quot;form-control&quot; id&#x3D;&quot;checkCode&quot; name&#x3D;&quot;checkCode&quot;</span><br><span class="line">									placeholder&#x3D;&quot;è¯·è¾“å…¥éªŒè¯ç &quot;&gt;</span><br><span class="line">							&lt;&#x2F;div&gt;</span><br><span class="line">							&lt;div class&#x3D;&quot;col-sm-3&quot;&gt;</span><br><span class="line">								&lt;img src&#x3D;&quot;$&#123;pageContext.request.contextPath &#125;&#x2F;checkImg&quot; onclick&#x3D;&quot;changeCheckImg(this)&quot; &#x2F;&gt;</span><br><span class="line">							&lt;&#x2F;div&gt;</span><br><span class="line">Jséƒ¨åˆ†ä»£ç ï¼š</span><br><span class="line">		&#x2F;&#x2F;æ›´æ¢éªŒè¯ç </span><br><span class="line">	function changeCheckImg(obj) &#123;</span><br><span class="line">		$(obj).attr(&quot;src&quot;,&quot;$&#123;pageContext.request.contextPath &#125;&#x2F;checkImg?date&#x3D;&quot;+new Date());</span><br><span class="line">	&#125;</span><br><span class="line">	$(function()&#123;</span><br><span class="line">		&#x2F;&#x2F;è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™------éªŒè¯ç æ˜¯å¦æ­£ç¡®</span><br><span class="line">		$.validator.addMethod(&quot;isRight&quot;,function(value,element,params)&#123;</span><br><span class="line">			var varify &#x3D; false;</span><br><span class="line">			$.ajax(&#123;</span><br><span class="line">				&#x2F;&#x2F;è®¾ç½®ä¸ºåŒæ­¥æ ¡éªŒï¼Œï¼ˆåŒæ­¥å°±æ˜¯å¤šä»»åŠ¡ä¸²è¡Œï¼ŒæœåŠ¡å™¨æ²¡æœ‰å“åº”ä¹‹å‰ï¼Œä¸å…è®¸è¿›è¡Œå…¶ä»–æ“ä½œï¼‰</span><br><span class="line">				async:false,</span><br><span class="line">				dataType:&quot;json&quot;,</span><br><span class="line">				type:&quot;POST&quot;,</span><br><span class="line">				data:&#123;&quot;checkCode&quot;:value&#125;,</span><br><span class="line">				url:&quot;$&#123;pageContext.request.contextPath &#125;&#x2F;user?method&#x3D;checkCodeVarify&quot;,</span><br><span class="line">				success:function(data)&#123;</span><br><span class="line">					varify &#x3D; data.isRight;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">			return varify;</span><br><span class="line">		&#125;);</span><br><span class="line">è¿›å…¥CheckImgServlet.javaä¸­æ‰§è¡ŒéªŒè¯ç ç”Ÿæˆç¨‹åºä»£ç ï¼š</span><br><span class="line">ç”ŸæˆéªŒè¯ç åï¼Œè¾“å…¥éªŒè¯ç ï¼ŒéªŒè¯ç æ˜¯å¦æ­£ç¡®</span><br><span class="line">	è¿›å…¥UserServlet.javaä¸­æ‰§è¡Œæ–¹æ³•:</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * éªŒè¯ç éªŒè¯</span><br><span class="line">	 * @param request</span><br><span class="line">	 * @param response</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public void checkCodeVarify(HttpServletRequest request, HttpServletResponse response) throws IOException &#123;</span><br><span class="line">		String checkCode &#x3D; (String) request.getParameter(&quot;checkCode&quot;);</span><br><span class="line">		Boolean isRight &#x3D; checkCode.equals(request.getSession().getAttribute(&quot;checkcode_session&quot;));</span><br><span class="line">		response.getWriter().write(&quot;&#123;\&quot;isRight\&quot;:&quot; + isRight + &quot;&#125;&quot;);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ¡ˆä¾‹4-ç”¨æˆ·é€€å‡º"><a href="#æ¡ˆä¾‹4-ç”¨æˆ·é€€å‡º" class="headerlink" title="æ¡ˆä¾‹4-ç”¨æˆ·é€€å‡º"></a>æ¡ˆä¾‹4-ç”¨æˆ·é€€å‡º</h4><pre><code>éœ€æ±‚ï¼šç‚¹å‡»index.jspä¸Š é€€å‡ºé“¾æ¥ï¼Œé€€å‡ºå½“å‰ç”¨æˆ·ï¼Œè·³è½¬index.jsp  
æ­¥éª¤åˆ†æï¼š  
1.ç‚¹å‡»index.jsp é€€å‡ºé“¾æ¥  
/user?method=logout  
2.åœ¨userservletä¸­ç¼–å†™logoutæ–¹æ³•  
é”€æ¯session  
é‡å®šå‘åˆ°index.jsp  
</code></pre>
<h5 id="Header-jspä»£ç å±•ç¤º"><a href="#Header-jspä»£ç å±•ç¤º" class="headerlink" title="Header.jspä»£ç å±•ç¤º"></a>Header.jspä»£ç å±•ç¤º</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;&lt;a href&#x3D;&quot;$&#123;pageContext.request.contextPath &#125;&#x2F;user?method&#x3D;quitUser&quot;&gt;é€€å‡º&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>

<h5 id="è¿›å…¥UserServlet-javaä»£ç "><a href="#è¿›å…¥UserServlet-javaä»£ç " class="headerlink" title="è¿›å…¥UserServlet.javaä»£ç "></a>è¿›å…¥UserServlet.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public String quitUser(HttpServletRequest request, HttpServletResponse response) throws IOException &#123;</span><br><span class="line">	request.getSession().invalidate();&#x2F;&#x2F;ç”¨äºæ¸…é™¤sessionçš„æ‰€æœ‰ä¿¡æ¯ã€‚</span><br><span class="line">	response.sendRedIrect(request.getContextPath());</span><br><span class="line">	return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="æ‰©å±•æ¡ˆä¾‹-è®°ä½ç”¨æˆ·å"><a href="#æ‰©å±•æ¡ˆä¾‹-è®°ä½ç”¨æˆ·å" class="headerlink" title="æ‰©å±•æ¡ˆä¾‹-è®°ä½ç”¨æˆ·å"></a>æ‰©å±•æ¡ˆä¾‹-è®°ä½ç”¨æˆ·å</h4><pre><code>éœ€æ±‚ï¼šç™»å½•æˆåŠŸåï¼Œè‹¥å‹¾é€‰äº†è®°ä½ç”¨æˆ·åï¼Œä¸‹æ¬¡åœ¨ç™»å½•çš„æ—¶å€™ï¼Œä¼šå±•ç¤ºå‡ºæ¥ç”¨æˆ·å  
æ­¥éª¤åˆ†æï¼š  
    ä¿®æ”¹loginæ–¹æ³•çš„é€»è¾‘  
        ç™»å½•æˆåŠŸåï¼Œåˆ¤æ–­æ˜¯å¦å‹¾é€‰äº†è®°ä½ç”¨æˆ·å  
        è‹¥å‹¾é€‰äº†ï¼Œå°†ç”¨æˆ·åï¼ˆå°†ç”¨æˆ·åç¼–ç ï¼‰ä¿å­˜åˆ°cookieä¸­  
    åœ¨login.jspåŠ è½½æˆåŠŸçš„æ—¶å€™éœ€è¦ä»cookieä¸­è·å–ç”¨æˆ·åä¸”å±•ç¤ºå‡ºæ¥  
</code></pre>
<h5 id="Login-jspä»£ç å±•ç¤º"><a href="#Login-jspä»£ç å±•ç¤º" class="headerlink" title="Login.jspä»£ç å±•ç¤º"></a>Login.jspä»£ç å±•ç¤º</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type&#x3D;â€checkboxâ€ name&#x3D;â€savenameâ€ value&#x3D;â€okâ€&gt;è®°ä½ç”¨æˆ·å</span><br></pre></td></tr></table></figure>
<h5 id="è¿›å…¥UserServlet-javaä»£ç -1"><a href="#è¿›å…¥UserServlet-javaä»£ç -1" class="headerlink" title="è¿›å…¥UserServlet.javaä»£ç "></a>è¿›å…¥UserServlet.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	Request.getSession().setAttribute(â€œuserâ€,user);</span><br><span class="line">		&#x2F;&#x2F;åˆ¤æ–­æ˜¯å¦å‹¾é€‰äº†è®°ä½ç”¨æˆ·å</span><br><span class="line">	If(Constant.SAVE_NAME.equals(request.getContextPath)))&#123;</span><br><span class="line">Cookie c&#x3D;new Cookie(â€œsaveNameâ€,java.net.URLEncoder.encode(user.getUsername(),â€utf-8));</span><br><span class="line">		c.setMaxAge(Integer.MAX_VALUE);</span><br><span class="line">		c.setPath(request.getContextPath()+â€&#x2F;â€);</span><br><span class="line">		response.addCookie(c);</span><br><span class="line">	&#125;</span><br><span class="line">response.sendRedirect(request.getContextPath());</span><br></pre></td></tr></table></figure>
<h5 id="Constant-javaä»£ç "><a href="#Constant-javaä»£ç " class="headerlink" title="Constant.javaä»£ç "></a>Constant.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;è®°ä½ç”¨æˆ·åå¸¸é‡ï¼Œå’Œvalueå€¼ä¸€è‡´</span><br><span class="line">String SAVE_NAME&#x3D;&quot;ok&quot;;</span><br></pre></td></tr></table></figure>
<h4 id="æ¡ˆä¾‹5-å‰å°åˆ†ç±»ä¿¡æ¯å±•ç¤º"><a href="#æ¡ˆä¾‹5-å‰å°åˆ†ç±»ä¿¡æ¯å±•ç¤º" class="headerlink" title="æ¡ˆä¾‹5-å‰å°åˆ†ç±»ä¿¡æ¯å±•ç¤º"></a>æ¡ˆä¾‹5-å‰å°åˆ†ç±»ä¿¡æ¯å±•ç¤º</h4><pre><code>éœ€æ±‚ï¼šè®¿é—®ä»»æ„é¡µé¢çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å°†åˆ†ç±»çš„ä¿¡æ¯å±•ç¤ºå‡ºæ¥  
æŠ€æœ¯åˆ†æ:    
    åŒ…å«ï¼ˆé™æ€åŒ…å«å’ŒåŠ¨æ€åŒ…å«ï¼‰  
    AjaxæŠ€æœ¯  
æ­¥éª¤åˆ†æï¼š  
1.åˆ›å»ºåˆ†ç±»è¡¨  
2.æŠ½å–æ‰€æœ‰é¡µé¢ä¸Šï¼Œlogoå’Œèœå•éƒ¨åˆ†ï¼ˆhead.jspï¼‰  
é¡µé¢åŠ è½½çš„æ—¶å€™  
</code></pre>
<h5 id="Header-jspä»£ç "><a href="#Header-jspä»£ç " class="headerlink" title="Header.jspä»£ç "></a>Header.jspä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul class&#x3D;&quot;nav navbar-nav&quot; id&#x3D;&quot;categoryUl&quot;&gt;&lt;&#x2F;ul&gt;</span><br></pre></td></tr></table></figure>
<pre><code>ç¼–å†™å‡½æ•°  
        å‘é€ajaxè¯·æ±‚ï¼Œ$.post(url,param,fn,type);  
                url:/store/category  
                params:method=findAll  
                fn:å°†è¿”å›å€¼éå†ï¼Œæ¯ä¸€ä¸ªåˆ†ç±»å°è£…æˆliæ ‡ç­¾ï¼Œæ’å…¥åˆ°ulæ ‡ç­¾å†…éƒ¨  
                type:json  
Ajaxè¯¦æƒ…é“¾æ¥ï¼šhttps://blog.csdn.net/huileiforever/article/details/12163385  
</code></pre>
<h5 id="Header-jspä»£ç -1"><a href="#Header-jspä»£ç -1" class="headerlink" title="Header.jspä»£ç "></a>Header.jspä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ä½¿ç”¨JSONå®Œæˆå¯¼èˆªæ ï¼Œç„¶ååˆ©ç”¨jsç”Ÿæˆçš„liæ’å…¥ulå†…éƒ¨</span><br><span class="line">	$(function()&#123;</span><br><span class="line">		&#x2F;&#x2F;å‘é€ajaxè¯·æ±‚ï¼ŒæŸ¥è¯¢æ‰€æœ‰åˆ†ç±»</span><br><span class="line">		&#x2F;&#x2F;dataType:&quot;json&quot; - ä»¥ JSON è¿è¡Œå“åº”ï¼Œå¹¶ä»¥ JavaScript å¯¹è±¡è¿”å›</span><br><span class="line">		$.post(</span><br><span class="line">			&quot;$&#123;pageContext.request.contextPath &#125;&#x2F;product?method&#x3D;productCategory&quot;,</span><br><span class="line">			function(data)&#123;</span><br><span class="line">				var content &#x3D;&quot;&quot;;</span><br><span class="line">				for (var i &#x3D; 0; i &lt; data.length; i++) &#123;&#x2F;&#x2F;éå†jsonåˆ—è¡¨ï¼Œè·å–æ¯ä¸€ä¸ªåˆ†ç±»ï¼ŒåŒ…è£…æˆliæ ‡ç­¾</span><br><span class="line">					content +&#x3D;&quot;&lt;li&gt;&lt;a href&#x3D;&#39;$&#123;pageContext.request.contextPath&#125;&#x2F;product?method&#x3D;product_list&amp;cid&#x3D;&quot;+data[i].cid+&quot;&#39;&gt;&quot;+data[i].cname+&quot;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">				&#x2F;&#x2F;æ’å…¥åˆ°ulå†…éƒ¨</span><br><span class="line">				$(&quot;#categoryUl&quot;).html(content);</span><br><span class="line">				</span><br><span class="line">			&#125;,</span><br><span class="line">			&quot;json&quot;</span><br><span class="line">		);</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>
<pre><code>ç¼–å†™ProductServlet,ç»§æ‰¿baseservlet,ç¼–å†™productCategoryæ–¹æ³•  
        è°ƒç”¨service,æŸ¥è¯¢æ‰€æœ‰çš„åˆ†ç±»  
        åˆ†ç±»åˆ—è¡¨çš„jsonå­—ç¬¦ä¸²ï¼ˆStringï¼‰  
        å†™å›é¡µé¢  
</code></pre>
<h5 id="ProductServlet-javaä»£ç "><a href="#ProductServlet-javaä»£ç " class="headerlink" title="ProductServlet.javaä»£ç "></a>ProductServlet.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">	 * æŸ¥è¯¢å•†å“åˆ†ç±»</span><br><span class="line">	 * @param request</span><br><span class="line">	 * @param response</span><br><span class="line">	 * @throws ServletException</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public void productCategory(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">		ProductService service &#x3D; new ProductService();</span><br><span class="line">		&#x2F;&#x2F;æŸ¥è¯¢æ‰€æœ‰å•†å“ç±»åˆ«</span><br><span class="line">		List&lt;Category&gt; categoryList &#x3D; service.findAllCategory();</span><br><span class="line">		&#x2F;&#x2F;å°†categoryListè½¬ä¸ºjsonå­—ç¬¦ä¸²</span><br><span class="line">		Gson gson &#x3D; new Gson();</span><br><span class="line">		String json &#x3D; gson.toJson(categoryList);</span><br><span class="line">		response.setContentType(&quot;text&#x2F;html; charset&#x3D;UTF-8&quot;);</span><br><span class="line">		response.getWriter().write(json);</span><br><span class="line">	&#125;</span><br><span class="line">		ProductServiceä¸­çš„æ“ä½œ</span><br><span class="line">			è°ƒç”¨dao,è·å–æ‰€æœ‰çš„åˆ†ç±»</span><br><span class="line">			å°†listè½¬æˆjsonè¿”å›</span><br></pre></td></tr></table></figure>

<h5 id="ProductService-javaä»£ç "><a href="#ProductService-javaä»£ç " class="headerlink" title="ProductService.javaä»£ç "></a>ProductService.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">	 * æ‰¾æ‰€æœ‰å•†å“ç±»åˆ«</span><br><span class="line">	 * @return</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public List&lt;Category&gt; findAllCategory() &#123;</span><br><span class="line">		ProductDao dao &#x3D; new ProductDao();</span><br><span class="line">		List&lt;Category&gt; categoryList &#x3D; null;</span><br><span class="line">		try &#123;</span><br><span class="line">			categoryList &#x3D; dao.findCategory();</span><br><span class="line">		&#125; catch (SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		return categoryList;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ProductDao-javaä»£ç "><a href="#ProductDao-javaä»£ç " class="headerlink" title="ProductDao.javaä»£ç "></a>ProductDao.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">	 * æŸ¥è¯¢æ‰€æœ‰å•†å“ç±»åˆ«</span><br><span class="line">	 * @return</span><br><span class="line">	 * @throws SQLException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public List&lt;Category&gt; findCategory() throws SQLException &#123;</span><br><span class="line">		QueryRunner runner &#x3D; new QueryRunner(DataSourceUtils.getDataSource());</span><br><span class="line">		String sql &#x3D; &quot;select * from category&quot;;</span><br><span class="line">		return runner.query(sql, new BeanListHandler&lt;Category&gt;(Category.class));</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>3.åœ¨æ‰€æœ‰çš„é¡µé¢é‡Œå°†head.jspåŒ…å«è¿›å»  </p>
<pre><code>è·å–è¿”å›å€¼ï¼ˆjsonå­—ç¬¦ä¸²ï¼‰  
éå†è¿”å›å€¼  
æ¯ä¸€ä¸ªåˆ†ç±»å°è£…æˆliæ ‡ç­¾ï¼Œæ’å…¥åˆ°ulæ ‡ç­¾å†…éƒ¨  
    å¦ä¸€ç§æ–¹æ³•ï¼šå¯ä½¿ç”¨redisè¿›è¡Œä¼˜åŒ–ï¼ˆç†è§£ï¼šå› ä¸ºæ¯ä¸€ä¸ªåˆ†ç±»çš„æ•°æ®ï¼Œæ¯ç‚¹ä¸€æ¬¡éœ€è¦è¿›è¡Œæ•°æ®åº“è®¿é—®ï¼Œrediså¯ä»¥å°†æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸ç”¨ä¸€ç›´è®¿é—®æ•°æ®åº“ï¼‰  
        ä¿®æ”¹serviceå±‚çš„ä»£ç   
            è·å–çš„æ—¶å€™,å»redisä¸­è·å–  
                è‹¥è·å–åˆ°äº†è¿”å›
                è‹¥æ²¡æœ‰è·å–åˆ°,å…ˆå»Mysqlæ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥ï¼Œå°†listè½¬æˆjsonæ”¾å…¥redisä¸­å³å¯
</code></pre>
<h4 id="æ¡ˆä¾‹6-æœ€æ–°å•†å“å’Œçƒ­é—¨å•†å“å±•ç¤º"><a href="#æ¡ˆä¾‹6-æœ€æ–°å•†å“å’Œçƒ­é—¨å•†å“å±•ç¤º" class="headerlink" title="æ¡ˆä¾‹6-æœ€æ–°å•†å“å’Œçƒ­é—¨å•†å“å±•ç¤º"></a>æ¡ˆä¾‹6-æœ€æ–°å•†å“å’Œçƒ­é—¨å•†å“å±•ç¤º</h4><pre><code>éœ€æ±‚ï¼š  
    è®¿é—®é¦–é¡µæ—¶ï¼Œéœ€è¦å°†æœ€æ–°å•†å“å’Œçƒ­é—¨å•†å“å±•ç¤ºå‡ºæ¥  
æŠ€æœ¯åˆ†æï¼š  
    æ–¹å¼1ï¼šajaxå¼‚æ­¥ï¼ˆéº»çƒ¦ï¼Œå¯¼èˆªæ å°±æ˜¯å¼‚æ­¥ï¼‰  
    æ–¹å¼2ï¼šåŒæ­¥  

é‡‡ç”¨åŒæ­¥æ–¹æ³•çš„æ­¥éª¤åˆ†æï¼ˆè¯·æ±‚è½¬å‘ï¼šå› ä¸ºè·¯å¾„ä¸å˜ï¼Œæ•°æ®æ”¹å˜ï¼‰  

    0.åˆ›å»ºå•†å“è¡¨

CREATE TABLE `product` (
  `pid` varchar(32) NOT NULL,
  `pname` varchar(50) DEFAULT NULL,
  `market_price` double DEFAULT NULL,
  `shop_price` double DEFAULT NULL,
  `pimage` varchar(200) DEFAULT NULL,
  `pdate` date DEFAULT NULL,
  `is_hot` int(11) DEFAULT NULL,
  `pdesc` varchar(255) DEFAULT NULL,
  `pflag` int(11) DEFAULT NULL,
  `cid` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`pid`),
  KEY `sfk_0001` (`cid`),
  CONSTRAINT `sfk_0001` FOREIGN KEY (`cid`) REFERENCES `category` (`cid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
æ’å…¥æ•°æ®ï¼š
INSERT INTO `product` VALUES (&#39;1&#39;,&#39;å°ç±³ 4c æ ‡å‡†ç‰ˆ&#39;,1399,1299,&#39;products/1/c_0001.jpg&#39;,&#39;2015-11-02&#39;,1,&#39;å°ç±³ 4c æ ‡å‡†ç‰ˆ å…¨ç½‘é€š ç™½è‰² ç§»åŠ¨è”é€šç”µä¿¡4Gæ‰‹æœº åŒå¡åŒå¾…&#39;,0,&#39;1&#39;),ï¼ˆâ€¦ä¸€å…±50æ¡ä¸åŒè®°å½•ï¼‰ï¼›

1.è®¿é—®é¡¹ç›®é¦–é¡µï¼Œè¯·æ±‚è½¬å‘indexservlet
2.Indexservletä¸­ä½¿ç”¨é»˜è®¤indexå¤„ç†
    è°ƒç”¨productserviceæŸ¥è¯¢çƒ­é—¨å•†å“å’Œæœ€æ–°å•†å“ï¼Œæ¯ä¸€ä¸ªéƒ½è¿”å›ä¸€ä¸ªlist
    å°†ä¸¤ä¸ªlistæ”¾å…¥requeståŸŸä¸­ï¼Œè¯·æ±‚è½¬å‘åˆ°index.jspä¸­
3.åœ¨é¡µé¢ä¸­å°†æ•°æ®éå†å‡ºæ¥
</code></pre>
<h4 id="æ¡ˆä¾‹7-å•ä¸ªå•†å“è¯¦æƒ…"><a href="#æ¡ˆä¾‹7-å•ä¸ªå•†å“è¯¦æƒ…" class="headerlink" title="æ¡ˆä¾‹7-å•ä¸ªå•†å“è¯¦æƒ…"></a>æ¡ˆä¾‹7-å•ä¸ªå•†å“è¯¦æƒ…</h4><pre><code>éœ€æ±‚ï¼šåœ¨é¦–é¡µä¸Šç‚¹å‡»æ¯ä¸ªå•†å“ï¼Œå°†è¿™ä¸ªå•†å“çš„è¯¦ç»†ä¿¡æ¯å±•ç¤ºåœ¨é¡µé¢ï¼ˆproduct_info.jspï¼‰  
æ­¥éª¤åˆ†æï¼š  
1.ç»™æ¯ä¸ªå•†å“æ·»åŠ è¶…é“¾æ¥  
2.ç¼–å†™productservlet,ç»§æ‰¿baseservlet,ç¼–å†™getById  
è·å–å•†å“çš„pid  
è°ƒç”¨serviceè·å–ä¸€ä¸ªå•†å“ï¼Œè¿”å›å€¼ï¼šproduct  
è¯·æ±‚è½¬å‘åˆ°product_info.jsp  
3.service,dao  
4.åœ¨product_info.jspä¸­å±•ç¤ºå•†å“  
</code></pre>
<h4 id="æ¡ˆä¾‹8-åˆ†ç±»å•†å“çš„åˆ†é¡µå±•ç¤º"><a href="#æ¡ˆä¾‹8-åˆ†ç±»å•†å“çš„åˆ†é¡µå±•ç¤º" class="headerlink" title="æ¡ˆä¾‹8-åˆ†ç±»å•†å“çš„åˆ†é¡µå±•ç¤º"></a>æ¡ˆä¾‹8-åˆ†ç±»å•†å“çš„åˆ†é¡µå±•ç¤º</h4><pre><code>éœ€æ±‚ï¼šç‚¹å‡»èœå•æ ä¸ŠæŸä¸€ä¸ªåˆ†ç±»çš„æ—¶å€™ï¼Œå°†è¯¥åˆ†ç±»ä¸‹çš„å•†å“ï¼Œåˆ†é¡µå±•ç¤ºå‡ºæ¥ï¼ˆé»˜è®¤ç¬¬ä¸€é¡µï¼‰  
æŠ€æœ¯åˆ†æï¼š  
    åˆ†é¡µ:  
        é¡µé¢ä¸Šéœ€è¦çš„æ•°æ®  
        å½“å‰é¡µæ•°æ®  
        å½“å‰é¡µ  
        æ€»é¡µæ•°  
        æ€»è®°å½•æ•°  
        æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°  
    Limit m,n  
        Limit(å½“å‰é¡µ-1)*æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°ï¼Œæ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°  
æ­¥éª¤åˆ†æï¼š  
1.ä¿®æ”¹head.jspä¸Šçš„æ¯ä¸ªåˆ†é¡µçš„è¶…é“¾æ¥  
2.åœ¨cateservletä¸­ç¼–å†™findByPageæ–¹æ³•  
è·å–å‚æ•°  
è·å–cid  
è®¾ç½®pageSize  
è°ƒç”¨serviceè·å–åˆ†é¡µçš„æ•°æ®ï¼Œè¿”å›å€¼ï¼šPageBean  
å°†pagebeanæ”¾å…¥requeståŸŸä¸­ï¼Œè¯·æ±‚è½¬å‘  
3.ç¼–å†™service  
è¿”å›å€¼ï¼špagebean  
åˆ›å»ºä¸€ä¸ªpagebean  
è®¾ç½®å½“å‰é¡µéœ€è¦çš„æ•°æ®  
    è°ƒç”¨dao  
è®¾ç½®æ€»è®°å½•æ•°  
    è°ƒç”¨dao  
4.dao  
5.åœ¨product_list.jspä¸Šå±•ç¤ºå•†å“  
</code></pre>
<h4 id="æ¡ˆä¾‹9-æ·»åŠ åˆ°è´­ç‰©è½¦"><a href="#æ¡ˆä¾‹9-æ·»åŠ åˆ°è´­ç‰©è½¦" class="headerlink" title="æ¡ˆä¾‹9-æ·»åŠ åˆ°è´­ç‰©è½¦"></a>æ¡ˆä¾‹9-æ·»åŠ åˆ°è´­ç‰©è½¦</h4><pre><code>éœ€æ±‚ï¼šåœ¨å•†å“çš„è¯¦æƒ…é¡µé¢è¾“å…¥è´­ä¹°æ•°é‡ï¼Œç‚¹å‡»åŠ å…¥è´­ç‰©è½¦ï¼Œå°†è¯¥å•†å“æ·»åŠ åˆ°è´­ç‰©è½¦
æŠ€æœ¯åˆ†æï¼š  
    Session  
æ¶‰åŠåˆ°å®ä½“ï¼š  
    è´­ç‰©è½¦ï¼ˆcartï¼‰  
            å±æ€§ï¼š  
                è´­ç‰©é¡¹ï¼ˆå•†å“è´­ä¹°ä¿¡æ¯ï¼‰çš„é›†åˆ  
                    Map&lt;String,CartItem&gt;  
                æ€»é‡‘é¢(total)  
            æ–¹æ³•ï¼š  
                åŠ å…¥è´­ç‰©è½¦  
                    Add2Cart(Cartem,item){
                            //1.åˆ¤æ–­è´­ç‰©è½¦æ˜¯å¦æœ‰è¯¥å•†å“
                            æœ‰ï¼š
                                ä¿®æ”¹è´­ä¹°æ•°é‡ï¼ˆåŸæ¥çš„æ•°é‡+item.getCount()ï¼‰
                                ä¿®æ”¹æ€»é‡‘é¢ï¼ˆåŸæ¥çš„é‡‘é¢+item.getSubtotal()ï¼‰
                            æ— ï¼šç›´æ¥putè¿›å»
                                ä¿®æ”¹æ€»é‡‘é¢ï¼ˆåŸæ¥é‡‘é¢+item.getSubtotal()ï¼‰
                         }
                ä»è´­ç‰©è½¦ç§»é™¤  
                    removeFromCart(pid){ 
                            ä»mapä¸­ç§»é™¤æŒ‡å®šè´­ç‰©é¡¹
                            ä¿®æ”¹æ€»é‡‘é¢
                        }
                æ¸…ç©ºè´­ç‰©è½¦  
                    clearCart(){ 
                            æ¸…ç©ºmap
                            ä¿®æ”¹æ€»é‡‘é¢=0.0
                        }
    è´­ç‰©é¡¹ï¼ˆCartItemï¼‰  
        å±æ€§ï¼š  
            å•†å“å¯¹è±¡(product)  
            è´­ä¹°æ•°é‡(count)  
            å°è®¡(subtotal)  
        æ–¹æ³•ï¼š  
            é‡æ–°ç¼–å†™getSubtoal(){
                    Return product.getShop_price*count
                }
</code></pre>
<h5 id="æ­¥éª¤åˆ†æ"><a href="#æ­¥éª¤åˆ†æ" class="headerlink" title="æ­¥éª¤åˆ†æ"></a>æ­¥éª¤åˆ†æ</h5><pre><code>1.ä¿®æ”¹å•†å“è¯¦æƒ…é¡µé¢ï¼ˆproduct_info.jspï¼‰  
æ·»åŠ ä¸€ä¸ªè¡¨å•ï¼š  
        è¦æ‰§è¡Œæ–¹æ³•ï¼šonclick=&quot;addToCart()â€	  	
        å•†å“çš„pid:pid=xxx  
        å•†å“çš„è´­ä¹°æ•°é‡ï¼šcount=xxx  
    ç‚¹å‡»â€œåŠ å…¥è´­ç‰©è½¦â€,å°†è¡¨å•æäº¤/store/cart  
    2.ç¼–å†™cartServlet	ç»§æ‰¿baseservlet,ç¼–å†™add2cart  
        è·å–å•†å“çš„pidå’Œcount  
        å°è£…cartitem  
            New cartitem(Product,count)  
        å°†cartitemåŠ å…¥è´­ç‰©è½¦  
        è·å–è´­ç‰©è½¦ï¼ˆsessionä¸­è·å–ï¼‰  
        è°ƒç”¨è´­ç‰©è½¦çš„add2cartæ–¹æ³•å³å¯  
é‡å®šå‘cart.jspä¸Š  
</code></pre>
<h5 id="Product-info-jspéƒ¨åˆ†ä»£ç "><a href="#Product-info-jspéƒ¨åˆ†ä»£ç " class="headerlink" title="Product_info.jspéƒ¨åˆ†ä»£ç "></a>Product_info.jspéƒ¨åˆ†ä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href&#x3D;â€javascript:void(0)â€ onclick&#x3D;â€addToCart()â€&gt;</span><br><span class="line">	&lt;input style&#x3D;&quot;background: url(&#39;.&#x2F;images&#x2F;product.gif&#39;) no-repeat scroll 0 -600px rgba(0, 0, 0, 0); height: 36px; width: 127px;&quot; value&#x3D;â€åŠ å…¥è´­ç‰©è½¦â€ type&#x3D;â€buttonâ€&gt;&lt;&#x2F;a&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type&#x3D;â€text&#x2F;javascriptâ€&gt;</span><br><span class="line">	Function addToCart()&#123;</span><br><span class="line">		Var proNum&#x3D;$.(â€œ#proNumâ€).val();&#x2F;&#x2F;è·å–å•†å“æ•°é‡</span><br><span class="line">		Window.loacation&#x3D;â€$&#123;pageContext.request.contextPath&#125;&#x2F;cart?method&#x3D;addToCart&amp;pid&#x3D;$&#123;product.pid&#125;&amp;proNum&#x3D;â€+proNum;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>


<h5 id="CartServlet-javaä»£ç "><a href="#CartServlet-javaä»£ç " class="headerlink" title="CartServlet.javaä»£ç "></a>CartServlet.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">	&#x2F;&#x2F;æ·»åŠ åˆ°è´­ç‰©è½¦æ–¹æ³•</span><br><span class="line">	public void addToCart(HttpServletRequest request, HttpServletResponse response) throws IOException &#123;</span><br><span class="line">	String pid&#x3D;request.getParameter(â€œpidâ€);</span><br><span class="line">	ProductService service &#x3D; new ProductService();</span><br><span class="line">	Product product &#x3D;service.findProductByPid(pid);</span><br><span class="line">	Int proNum&#x3D;Integer.parseInt(request.getParameter(â€œproNumâ€));</span><br><span class="line">	HttpSession session&#x3D;request.getSession();</span><br><span class="line">	&#x2F;&#x2F;æ›´æ–°sessionåŸŸä¸­çš„è´­ç‰©è½¦å¯¹è±¡</span><br><span class="line">	Cart cart&#x3D;(Cart) session.getAtrribute(â€œcartâ€);</span><br><span class="line">	If(cart&#x3D;&#x3D;null)&#123;</span><br><span class="line">		cart&#x3D;new Cart();</span><br><span class="line">	&#125;</span><br><span class="line">	Map&lt;String,CartItem&gt; cartMap&#x3D;cart.getCartMap();</span><br><span class="line">	&#x2F;&#x2F;åˆ¤æ–­å•†å“çš„pid</span><br><span class="line">	If(cartMap.containsKey(pid)&#123;</span><br><span class="line">		&#x2F;&#x2F;æœ‰ï¼šåŸæ¥çš„è´­ç‰©é¡¹+æ–°å¢çš„å€¼</span><br><span class="line">		CartItem cartItem &#x3D;cartMap.get(pid);</span><br><span class="line">		&#x2F;&#x2F;è´­ç‰©è½¦ä¸­å·²ç»åŒ…å«äº†è¯¥å•†å“:æ–°åŠ çš„æ•°é‡+åŸæ¥çš„æ•°é‡</span><br><span class="line">		cartItem.setProNum(cartItem.getProductNum()+proNum);</span><br><span class="line">		&#x2F;&#x2F;è®¾ç½®ï¼šå°è®¡çš„ä»·æ ¼&#x3D;æ–°åŠ çš„ä»·æ ¼+è´­ç‰©è½¦åŸæ¥çš„ä»·æ ¼</span><br><span class="line">		cartItem.setSubTotal(cartItem.getSubTotal()+product.getShop_price()*proNum);</span><br><span class="line">		cartMap.put(pid,cartItem);&#x2F;&#x2F;å°†valueå€¼è¦†ç›–</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		&#x2F;&#x2F;è´­ç‰©è½¦ä¸­æ²¡æœ‰è¯¥å•†å“ï¼Œæ–°å¢è¯¥è´­ç‰©å•†å“é¡¹</span><br><span class="line">		CartItem cartItem&#x3D;new CartItem();</span><br><span class="line">		cartItem.setProNum(proNum);</span><br><span class="line">		cartItem.setProduct(product);</span><br><span class="line">		cartItem.setSubToal(product.getShop_price()*proNum);</span><br><span class="line">		cartMap.put(pid,cartItem);</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;ä¿®æ”¹å½“å‰è´­ç‰©è½¦æ€»é‡‘é¢</span><br><span class="line">	Cart.setToal(cart.getTotal()+product.getShop_price()*proNum);</span><br><span class="line">	Cart.setCartMap(cartMap);</span><br><span class="line">	Session.setAttribute(â€œcartâ€,cart);</span><br><span class="line">	&#x2F;&#x2F;é‡å®šå‘åˆ°cart.jspé¡µé¢</span><br><span class="line">	response.sendRedirect(request.getContextPath()+â€&#x2F;cart.jspâ€);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ProductService-javaä»£ç -1"><a href="#ProductService-javaä»£ç -1" class="headerlink" title="ProductService.javaä»£ç "></a>ProductService.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">	  * å•ä¸ªå•†å“æŸ¥è¯¢</span><br><span class="line">	  * æ ¹æ®å•†å“idæ‰¾åˆ°å•†å“</span><br><span class="line">	 * @param pid</span><br><span class="line">	 * @return</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public Product findProductByPid(String pid) &#123;</span><br><span class="line">		ProductDao dao &#x3D; new ProductDao();</span><br><span class="line">		Product product &#x3D; null;</span><br><span class="line">		try &#123;</span><br><span class="line">			product &#x3D; dao.findProductByPid(pid);</span><br><span class="line">		&#125; catch (SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		return product;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ProductDao-javaä»£ç -1"><a href="#ProductDao-javaä»£ç -1" class="headerlink" title="ProductDao.javaä»£ç "></a>ProductDao.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">	  * æŸ¥è¯¢å•ä¸ªå•†å“</span><br><span class="line">	 * @param pid</span><br><span class="line">	 * @return</span><br><span class="line">	 * @throws SQLException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public Product findProductByPid(String pid) throws SQLException &#123;</span><br><span class="line">		QueryRunner runner&#x3D;new QueryRunner(DataSourceUtils.getDataSource());</span><br><span class="line">		String sql&#x3D;â€select * from prduct where pid&#x3D;?â€;</span><br><span class="line">		Return runner.query(sql,new BeanHandler&lt;Product&gt;(Product.class),pid);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ¡ˆä¾‹10-ä»è´­ç‰©è½¦ç§»é™¤ä¸€ä¸ªå•†å“"><a href="#æ¡ˆä¾‹10-ä»è´­ç‰©è½¦ç§»é™¤ä¸€ä¸ªå•†å“" class="headerlink" title="æ¡ˆä¾‹10-ä»è´­ç‰©è½¦ç§»é™¤ä¸€ä¸ªå•†å“"></a>æ¡ˆä¾‹10-ä»è´­ç‰©è½¦ç§»é™¤ä¸€ä¸ªå•†å“</h4><pre><code>éœ€æ±‚ï¼šåœ¨cart.jspä¸Šï¼Œç‚¹å‡»ä¸€ä¸ªå•†å“çš„åˆ é™¤ï¼Œå¼¹å‡ºä¸€ä¸ªæç¤ºä¿¡æ¯ï¼Œç‚¹å‡»ç¡®å®šï¼Œä»è´­ç‰©è½¦ä¸­ç§»é™¤ï¼Œå¦åˆ™ä¸åˆ   
æ­¥éª¤åˆ†æï¼š  
1.ç»™â€œåˆ é™¤â€æ·»åŠ é“¾æ¥  
2.åœ¨cartservletä¸­ç¼–å†™deleteCartæ–¹æ³•  
è·å–pid  
è·å–cart,æ‰§è¡Œremoveæ–¹æ³•  
é‡å®šå‘åˆ°cart.jsp  
</code></pre>
<h5 id="Cart-jspä»£ç "><a href="#Cart-jspä»£ç " class="headerlink" title="Cart.jspä»£ç "></a>Cart.jspä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;td class&#x3D;â€text-centerâ€&gt;</span><br><span class="line">	&lt;a href&#x3D;â€javascript:void(0);â€ onclick&#x3D;â€deleteCartItem(â€˜$&#123;entry.value.product.pid&#125;â€™)â€ class&#x3D;â€btn btn-danger deleteâ€&gt;åˆ é™¤&lt;&#x2F;a&gt;</span><br><span class="line">&lt;&#x2F;td&gt;</span><br><span class="line">Function deleteCartItem(pid)&#123;</span><br><span class="line">	If(confirm(â€œæ‚¨ç¡®å®šä¸è¦å®å®äº†å—ï¼Ÿäº²ï¼â€))&#123;</span><br><span class="line">		Window.location&#x3D;â€$&#123;pageContext.request.contextPath&#125;&#x2F;cart?method&#x3D;deleteCartItem&amp;pid&#x3D;â€+pid;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h5 id="CartServlet-javaä»£ç -1"><a href="#CartServlet-javaä»£ç -1" class="headerlink" title="CartServlet.javaä»£ç "></a>CartServlet.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">	 * åˆ é™¤è´­ç‰©è½¦å•†å“</span><br><span class="line">	 * @param request</span><br><span class="line">	 * @param response</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">public void deleteCart(HttpServletRequest request, HttpServletResponse response) throws IOException &#123;</span><br><span class="line">	String pid&#x3D;request.getParameter(â€œpidâ€);</span><br><span class="line">	HttpSession session &#x3D; request.getSession();</span><br><span class="line">	Cart cart&#x3D;(cart) session.getAttribute(â€œcartâ€);</span><br><span class="line">	Map&lt;String,CartItem&gt; cartMap&#x3D;cart.getCartMap();</span><br><span class="line">	If(cartMap.containsKey(pid)&#123;</span><br><span class="line">		&#x2F;&#x2F;æ ¹æ®è´­ç‰©è½¦é¡¹çš„pidåˆ é™¤å•†å“</span><br><span class="line">		CartItem cartItem &#x3D;cartMap.get(pid);</span><br><span class="line">		cartMap.remove(pid);</span><br><span class="line">		&#x2F;&#x2F;è®¾ç½®è´­ç‰©è½¦åˆ é™¤å•†å“åçš„ä»·æ ¼&#x3D;æ€»ä»·æ ¼-åˆ é™¤å•†å“ä»·æ ¼</span><br><span class="line">		cart.setTotal(cart.getTotal()-cartItem.getSubToal());</span><br><span class="line">		&#x2F;&#x2F;è®¾ç½®è´­ç‰©è½¦åˆ é™¤åçš„å•†å“é¡¹çš„é›†åˆ</span><br><span class="line">		cart.setCartMap(cartMap);</span><br><span class="line">		session.setAttribute(â€œcartâ€,cart);</span><br><span class="line">	&#125;</span><br><span class="line">	response.sendRedirect(request.getContextPath()+&quot;&#x2F;cart.jsp&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ¡ˆä¾‹11-æ¸…ç©ºè´­ç‰©è½¦"><a href="#æ¡ˆä¾‹11-æ¸…ç©ºè´­ç‰©è½¦" class="headerlink" title="æ¡ˆä¾‹11-æ¸…ç©ºè´­ç‰©è½¦"></a>æ¡ˆä¾‹11-æ¸…ç©ºè´­ç‰©è½¦</h4><pre><code>éœ€æ±‚ï¼šç‚¹å‡»cart.jspä¸Šçš„æ¸…ç©ºè´­ç‰©è½¦ï¼Œéœ€è¦å°†è´­ç‰©è½¦æ‰€æœ‰å•†å“éƒ½åˆ é™¤æ‰  
æ­¥éª¤åˆ†æï¼š  
    ä¿®æ”¹æ¸…ç©ºè´­ç‰©è½¦çš„é“¾æ¥  
        /cart?method=cleat  
    ç¼–å†™clearæ–¹æ³•  
        è·å–è´­ç‰©è½¦ï¼Œæ‰§è¡ŒclearCartæ–¹æ³•  
        é‡å®šå‘åˆ°cart.jsp  
        åˆ¤æ–­è´­ç‰©è½¦ä¸­æ˜¯å¦æœ‰å•†å“ï¼Œ  
            æœ‰åˆ™å±•ç¤º,æ— åˆ™æç¤º  
</code></pre>
<h5 id="Cart-jspéƒ¨åˆ†ä»£ç "><a href="#Cart-jspéƒ¨åˆ†ä»£ç " class="headerlink" title="Cart.jspéƒ¨åˆ†ä»£ç "></a>Cart.jspéƒ¨åˆ†ä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href&#x3D;&quot;javascript:void(0);&quot; id&#x3D;&quot;clear&quot; class&#x3D;&quot;clear&quot; onclick&#x3D;&quot;clearCart()&quot;&gt;æ¸…ç©ºè´­ç‰©è½¦&lt;&#x2F;a&gt;</span><br><span class="line"></span><br><span class="line">function clearCart()&#123;</span><br><span class="line">		if(confirm(&quot;æ‚¨ç¡®å®šè¦æ¸…ç©ºè´­ç‰©è½¦å—ï¼Ÿ&quot;))&#123;</span><br><span class="line">			window.location &#x3D;  &quot;$&#123;pageContext.request.contextPath&#125;&#x2F;cart?method&#x3D;clearCart&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>


<h5 id="CartServlet-javaä»£ç -2"><a href="#CartServlet-javaä»£ç -2" class="headerlink" title="CartServlet.javaä»£ç "></a>CartServlet.javaä»£ç </h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * æ¸…ç©ºè´­ç‰©è½¦</span><br><span class="line"> * @param request</span><br><span class="line"> * @param response</span><br><span class="line"> * @throws IOException</span><br><span class="line"> *&#x2F;</span><br><span class="line">public void clearCart(HttpServletRequest request, HttpServletResponse response) throws IOException &#123;</span><br><span class="line">	&#x2F;*********æ¸…ç©ºsessionä¸­çš„cart**********&#x2F;</span><br><span class="line">	HttpSession session&#x3D;request.getSession();</span><br><span class="line">	Cart cart&#x3D;(Cart)session.getAttribute(â€œcartâ€);</span><br><span class="line">	Map&lt;String,CartItem&gt; cartMap&#x3D;cart.getCartMap();</span><br><span class="line">	cartMap.clear();</span><br><span class="line">	cart.setCartMap(cartMap);</span><br><span class="line">	session.setAttribute(â€œcartâ€,cart);</span><br><span class="line">	response.sendRedirect(request.getContextPath()+â€&#x2F;cart.jspâ€);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ¡ˆä¾‹12-ç”Ÿæˆè®¢å•"><a href="#æ¡ˆä¾‹12-ç”Ÿæˆè®¢å•" class="headerlink" title="æ¡ˆä¾‹12-ç”Ÿæˆè®¢å•"></a>æ¡ˆä¾‹12-ç”Ÿæˆè®¢å•</h4><pre><code>éœ€æ±‚ï¼šåœ¨cart.jspä¸Šç‚¹å‡»â€œæäº¤è®¢å•â€ï¼Œå°†è´­ç‰©è½¦çš„å•†å“ä¿å­˜åˆ°æ•°æ®åº“ä¸­  
å®ä½“åˆ†æï¼š  
    ç”¨æˆ·  
    è®¢å•  
    å•†å“  
    ç”¨æˆ·å’Œè®¢å•ï¼šä¸€å¯¹å¤š  
    è®¢å•å’Œå•†å“ï¼šå¤šå¯¹å¤š  
è¡¨åˆ†æï¼š  
    ç”¨æˆ·è¡¨  
    å•†å“è¡¨  
    è®¢å•è¡¨  

    ç”¨æˆ·å’Œè®¢å•æ˜¯ä¸€å¯¹å¤šï¼Œåœ¨è®¢å•è¡¨ä¸­æ·»åŠ å¤–é”®  
    è®¢å•å’Œå•†å“æ˜¯å¤šå¯¹å¤šï¼Œå¼•å…¥ä¸€å¼ ä¸­é—´è¡¨ï¼ˆorderitemï¼‰  

    è®¢å•è¡¨ï¼š  
        Id  
        è®¢å•çŠ¶æ€  
        è®¢å•é‡‘é¢  
        ä¸‹å•æ—¶é—´  
        æ”¶è´§äººä¿¡æ¯  
        User_id  
    è®¢å•é¡¹è¡¨ï¼š  
        Pid  
        Oid  
        Itemid  
        æŸä¸ªå•†å“è´­ä¹°æ•°é‡  
        å°è®¡  
å®ä½“å…·ä½“åˆ†æï¼š  
    è®¢å•å±æ€§ï¼š  
        Id  
        è®¢å•é‡‘é¢  
        ä¸‹å•æ—¶é—´  
        æ”¶è´§äººä¿¡æ¯  
        Userå¯¹è±¡  
        è®¢å•é¡¹åˆ—è¡¨  
            List&lt;OrderTiem&gt; list  
    è®¢å•é¡¹å±æ€§ï¼š  
        Productå¯¹è±¡  
        Order  
        Itemid  
        æŸä¸ªå•†å“çš„è´­ä¹°æ•°é‡(count)  
        å°è®¡ï¼ˆsubtotalï¼‰  
</code></pre>
<h5 id="æ­¥éª¤åˆ†æï¼š"><a href="#æ­¥éª¤åˆ†æï¼š" class="headerlink" title="æ­¥éª¤åˆ†æï¼š"></a>æ­¥éª¤åˆ†æï¼š</h5><pre><code>    1.åœ¨cart.jspä¸Šï¼Œç‚¹å‡»æäº¤è®¢å•	å‘é€è¯·æ±‚  
        è·¯å¾„ï¼š/order?method=submitOrder  
    2.ç¼–å†™orderservlet,ç¼–å†™submitOrderæ–¹æ³•  
        å°è£…è®¢å•å¯¹è±¡  
            è®¾ç½®Id  
            è®¾ç½®è®¢å•é‡‘é¢  
            è®¾ç½®ä¸‹å•æ—¶é—´  
            è®¾ç½®æ”¶è´§äººä¿¡æ¯  
            è®¾ç½®Userå¯¹è±¡  
            è®¾ç½®è®¢å•é¡¹åˆ—è¡¨  
                List&lt;OrderTiem&gt; list  
                éå†è´­ç‰©è½¦ä¸­è´­ç‰©é¡¹ï¼Œè·å–æ¯ä¸€ä¸ªè´­ç‰©é¡¹  
                å°è£…æˆorderitem  
                    è®¾ç½®Productå¯¹è±¡  
                        è´­ç‰©ä¸­è·å–product  
                    è®¾ç½®Order  
                    è®¾ç½®Itemid  
                        UUIDUtils  
                    è®¾ç½®æŸä¸ªå•†å“çš„è´­ä¹°æ•°é‡(count)  
                        è´­ç‰©é¡¹ä¸­è·å–  
                    è®¾ç½®å°è®¡ï¼ˆsubtotalï¼‰  
                        è´­ç‰©é¡¹ä¸­è·å–  

        è°ƒç”¨orderservice,æ‰§è¡Œä¿å­˜æ“ä½œ  
        è¯·æ±‚è½¬å‘åˆ°è®¢å•è¯¦æƒ…é¡µé¢  
3.	ç¼–å†™service:	å¼€å¯äº‹åŠ¡  
        å‘ordersä¿å­˜ä¸€æ¡  
        å‘orderitemä¸­ä¿å­˜å¤šæ¡  
</code></pre>
<h4 id="æ¡ˆä¾‹13-æˆ‘çš„è®¢å•"><a href="#æ¡ˆä¾‹13-æˆ‘çš„è®¢å•" class="headerlink" title="æ¡ˆä¾‹13-æˆ‘çš„è®¢å•"></a>æ¡ˆä¾‹13-æˆ‘çš„è®¢å•</h4><pre><code>éœ€æ±‚ï¼šåœ¨ä»»æ„é¡µé¢ä¸Šï¼Œç‚¹å‡»â€œæˆ‘çš„è®¢å•â€ï¼Œå°†å½“å‰ç”¨æˆ·çš„è®¢å•ï¼ˆåŒ…å«è®¢å•é¡¹åˆ—è¡¨ï¼‰åˆ†é¡µå±•ç¤ºå‡ºæ¥  
æ­¥éª¤åˆ†æï¼š  
1.ä¿®æ”¹head.jspä¸Šâ€œæˆ‘çš„è®¢å•â€çš„è¿æ¥  
2.åœ¨orderservletä¸­ç¼–å†™findMyOrdersByPage  
è·å–pagenumberè®¾ç½®pagesize,è·å–å½“å‰ç”¨æˆ·id  
è°ƒç”¨serviceå®Œæˆåˆ†é¡µæŸ¥è¯¢æ“ä½œï¼Œè¿”å›pagebean  
å°†pagebeanæ”¾å…¥requeståŸŸä¸­ï¼Œè¯·æ±‚è½¬å‘order_list.jsp  
3.serviceæ“ä½œ  
åˆ›å»ºpagebean  
è®¾ç½®æ€»æ¡æ•°  
è®¾ç½®å½“å‰é¡µæ•°æ®  
4.daoæ“ä½œï¼š  
è·å–å½“å‰é¡µè®¢å•æ•°æ®  
   Sql:åªèƒ½æŸ¥è¯¢è®¢å•çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ²¡æœ‰è®¢å•é¡¹  
   Select * from orders where uid=? Order by orderitem desc limit ?,?
æ‰§è¡Œä¸Šé¢çš„sqlï¼Œè¿”å›çš„List&lt;Order&gt;éå†orderListé›†åˆï¼Œè·å–åˆ°æ¯ä¸€ä¸ªè®¢å•ï¼Œå…³è”æŸ¥è¯¢è®¢å•é¡¹å’Œå•†å“é¡¹ï¼Œå°†è¯¥è®¢å•ä¸‹çš„æ‰€æœ‰ä¿¡æ¯æŸ¥è¯¢å‡ºæ¥ï¼Œå°è£…æˆorderitemï¼Œ
å°†æ¯ä¸€ä¸ªorderitemæ”¾å…¥å½“å‰orderçš„è®¢å•é¡¹åˆ—è¡¨ä¸­Select*from orderitem oi,product p where oi.pid=p.pid AND oi.oid=â€™ 2d6f53ee-c7b3-4836-8d53-e3a0cfcde739â€™;  
ä¸Šé¢çš„ç»“æœç”¨ä»€ä¹ˆå°è£…ï¼Ÿï¼Ÿï¼Ÿ  
   ä½¿ç”¨maplisthandlerå°è£…ï¼Œå°†æŸ¥è¯¢ç»“æœçš„æ¯ä¸€æ¡è®°å½•å°è£…æˆmap(key;å­—æ®µåï¼ˆå’Œbeanå±æ€§åä¸€æ ·ï¼‰ï¼Œvalue:å…·ä½“æŒ‡)ï¼Œ
   å°†æ‰€æœ‰çš„mapæ”¾å…¥listä¸­è¿”å›éå†mapçš„list,è·å–æ¯ä¸€ä¸ªè®¢å•çš„è¯¦æƒ…,ä½¿ç”¨beanutilsè¿›è¡Œå°è£…å³å¯ å°è£…æˆorderitemå’Œproductå¯¹è±¡,
 æœ€åå°†orderitemå¯¹è±¡æ”¾å…¥ï¼Œæœ€åå°†orderitemå¯¹è±¡æ”¾å…¥è®¢å•é¡¹åˆ—è¡¨ä¸­[{itemid=xxxx,pname=åä¸ºï¼Œâ€¦},{itemid=yyyy,pname=ä¸­å…´ï¼Œâ€¦}]  
</code></pre>
<h4 id="æ¡ˆä¾‹14-è®¢å•è¯¦æƒ…"><a href="#æ¡ˆä¾‹14-è®¢å•è¯¦æƒ…" class="headerlink" title="æ¡ˆä¾‹14-è®¢å•è¯¦æƒ…"></a>æ¡ˆä¾‹14-è®¢å•è¯¦æƒ…</h4><pre><code>éœ€æ±‚ï¼šåœ¨è®¢å•åˆ—è¡¨é¡µé¢ä¸Šï¼Œç‚¹å‡»æäº¤è®¢å•æŒ‰é’®ï¼Œå±•ç¤ºå½“å‰çš„è®¢å•è¯¦æƒ…
æ­¥éª¤åˆ†æï¼š
1.ä¿®æ”¹æäº¤è®¢å•è¿æ¥
2.åœ¨orderservletç¼–å†™getByIdæ–¹æ³•
è·å–oid
è°ƒç”¨serviceæŸ¥è¯¢å•ä¸ªè®¢å• è¿”å›å€¼order
å°†orderæ”¾å…¥requeståŸŸä¸­ï¼Œè¯·æ±‚è½¬å‘åˆ°order_info.jsp
3.serviceæ“ä½œ
4.daoæ“ä½œ
å…ˆæŸ¥è¯¢è®¢å•ä¿¡æ¯ï¼ˆæ²¡æœ‰è®¢å•é¡¹ï¼‰
   Select*from orders where oid=?
å†æŸ¥è¯¢å½“å‰è®¢å•çš„è®¢å•é¡¹
   Select*from orderitem oi,product p where oi.pid=p.pid and oi.oid=?
ä½¿ç”¨mapListhandlerè¿›è¡Œå°è£…
   è·å–æ¯ä¸€ä¸ªè®¢å•é¡¹è¯¦æƒ…ï¼Œå°è£…æˆorderitemï¼Œæœ€åå°†orderitemæ·»åŠ åˆ°è®¢å•çš„è®¢å•é¡¹åˆ—è¡¨å³å¯
</code></pre>
<hr>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">PanXiaoKang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://example.com/2020/04/15/%E7%94%B5%E5%AD%90%E8%B4%AD%E7%89%A9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/">http://example.com/2020/04/15/%E7%94%B5%E5%AD%90%E8%B4%AD%E7%89%A9%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://example.com" target="_blank">å‘é˜³æ¦†æœ¨</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%94%B5%E5%AD%90%E8%B4%AD%E7%89%A9/">ç”µå­è´­ç‰©</a><a class="post-meta__tags" href="/tags/%E5%95%86%E5%9F%8E/">å•†åŸ</a></div><div class="post_share"><div class="social-share" data-image="https://mpimg.cn/view.php/58dfeb8921e8fb4a93de3dae7d99a816.jpg" data-sites="qq,wechat,facebook,twitter,weibo"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://s1.ax1x.com/2020/06/09/t40mLD.th.png" alt="å¾®ä¿¡"/><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://s1.ax1x.com/2020/06/09/t4czVK.th.jpg" alt="æ”¯ä»˜å®"/><div class="post-qr-code__desc">æ”¯ä»˜å®</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/04/15/windows%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C/"><img class="prev_cover lazyload" data-src="/img/butterfly.jpg" onerror="onerror=null;src='/img/404.png'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">windowsç³»ç»Ÿæ“ä½œ</div></div></a></div><div class="next-post pull_right"><a href="/2020/04/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%90%86%E8%AE%BA/"><img class="next_cover lazyload" data-src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=228400941,1528450213&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.png'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æ•°æ®åº“ç†è®º</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/04/16/ç™¾è„‘ç§‘æŠ€å•†åŸé¡¹ç›®/" title="ç™¾è„‘ç§‘æŠ€å•†åŸé¡¹ç›®"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/panyongkang/MyImgBed/img/%E7%A8%8B%E5%BA%8F%E5%91%98.gif"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-16</div><div class="relatedPosts_title">ç™¾è„‘ç§‘æŠ€å•†åŸé¡¹ç›®</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: true,
  verify: true,
  appId: 'z2GwNsG7RRpWpx5rt7psedl5-MdYXbMMI',
  appKey: 'gI6Yhfwz4JiUIv9546gepko8',
  placeholder: 'æ¥å§ï¼Œé€ ä½œå§ï¼Œå¿«æ´»å§ï¼Œè‚†æ— å¿Œæƒ®å§ï¼(ï½ï¿£â–½ï¿£)ï½',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2026 By PanXiaoKang</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">å°ä¼™ä¼´ä»¬å¥½ï¼æ¬¢è¿æ¥åˆ°<a href="https://panyongkang.github.io/" target="_blank" rel="noopener">å‘é˜³æ¦†æœ¨</a>çš„åšå®¢ï¼</div><div class="icp"><a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>é»”ICPå¤‡54587259å·</span></a></div><div id="running-time"></div><script>setInterval(()=>{let create_time=Math.round(new Date(Date.UTC(2020,01,01,0,0,0)).getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='æœ¬ç«™å·²å®‰å…¨è¿è¡Œ '+time[0]+' å¹´ '+time[1]+' å¤© '+time[2]+' æ—¶ '+time[3]+' åˆ† '+time[4]+' ç§’';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script><script src="/js/search/local-search.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/platelet.model.json"},"display":{"position":"right","width":200,"height":500},"mobile":{"show":true},"log":false});</script></body></html>