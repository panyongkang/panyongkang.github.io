//////////////////////////////////////////////////////////////////////
// Pano2VR 5.2.0/15969 HTML5/CSS3 & WebGL Panorama Player           //
// License: Karl Harris                                             //
// (c) 2017, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

function G(){var m="perspective",g=["Webkit","Moz","O","ms","Ms"],h;for(h=0;h<g.length;h++)"undefined"!==typeof document.documentElement.style[g[h]+"Perspective"]&&(m=g[h]+"Perspective");"undefined"!==typeof document.documentElement.style[m]?"webkitPerspective"in document.documentElement.style?(m=document.createElement("style"),g=document.createElement("div"),h=document.head||document.getElementsByTagName("head")[0],m.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",h.appendChild(m),
g.id="ggswhtml5",document.documentElement.appendChild(g),h=5===g.offsetHeight,m.parentNode.removeChild(m),g.parentNode.removeChild(g)):h=!0:h=!1;return h}function N(){var m;if(m=!!window.WebGLRenderingContext)try{var g=document.createElement("canvas");g.width=100;g.height=100;var h=g.getContext("webgl");h||(h=g.getContext("experimental-webgl"));m=!!h}catch(b){m=!1}return m}
var __extends=this&&this.__extends||function(m,g){function h(){this.constructor=m}for(var b in g)g.hasOwnProperty(b)&&(m[b]=g[b]);m.prototype=null===g?Object.create(g):(h.prototype=g.prototype,new h)},ggP2VR;
(function(m){var g=function(){function b(a){this.h=null;this.yf=this.Vj=this.xb=!1;this.mb=this.Ea=this.wa=0;this.f=70;this.Sa=0;this.autoplay=this.Cf=!1;this.id="";this.j=this.pan=0;this.h=a;this.Sc=this.Ac=100;this.jd=1}b.prototype.Db=function(a){var d;if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("pan"))this.pan=Number(d.nodeValue);if(d=a.getAttributeNode("tilt"))this.j=Number(d.nodeValue)};b.prototype.pl=function(a){var d="",c=this.h,b=!0;if(c.Gf){var f=
new m.sa(0,0,-100);f.wa(-this.j*Math.PI/180);f.Ea(this.pan*Math.PI/180);f.Ea(-c.pan.c*Math.PI/180);f.wa(c.j.c*Math.PI/180);f.mb(c.M.c*Math.PI/180);.01<=f.z&&(b=!1)}c.tc&&(d+="perspective("+a+"px) ");d=d+("translate3d(0px,0px,"+a+"px) ")+("rotateZ("+c.M.c.toFixed(10)+"deg) ");d+="rotateX("+c.j.c.toFixed(10)+"deg) ";d+="rotateY("+(-c.pan.c).toFixed(10)+"deg) ";d+="rotateY("+this.pan.toFixed(10)+"deg) ";d+="rotateX("+(-this.j).toFixed(10)+"deg) ";a=1E4;var f=this.a.videoWidth,l=this.a.videoHeight;if(0==
f||0==l)f=640,l=480;0<this.Ac&&(f=this.Ac);0<this.Sc&&(l=this.Sc);0<f&&0<l&&(this.a.width=f,this.a.height=l,this.a.style.width=f+"px",this.a.style.height=l+"px");0<this.f&&(a=f/(2*Math.tan(this.f/2*Math.PI/180)));d+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";d+="rotateZ("+this.mb.toFixed(10)+"deg) ";d+="rotateY("+(-this.Ea).toFixed(10)+"deg) ";d+="rotateX("+this.wa.toFixed(10)+"deg) ";this.jd&&1!=this.jd&&(d+="scaleY("+this.jd+") ");d+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ";this.a.style[c.Va+
"Origin"]="0% 0%";this.xb&&(d="",1==this.Sa&&(d+="scale("+Math.min(c.m.width/f,c.m.height/l)+") "),d+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ");this.Sm!=d&&(this.Sm=d,this.a.style[c.Va]=d,this.a.style.visibility=b?"visible":"hidden",this.yf&&this.Vj==this.xb&&(this.a.style[c.Qc]="all 0s linear 0s"),this.Vj=this.xb)};b.prototype.Xk=function(){this.a&&(this.a.style.visibility="hidden")};b.prototype.te=function(){var a=this.h;a.$?(this.a.style.left=a.m.width/2+"px",this.a.style.top=a.m.height/2+"px"):
(this.a.style.left=a.margin.left+a.m.width/2+"px",this.a.style.top=a.margin.top+a.m.height/2+"px")};return b}();m.Ro=g;var h=function(b){function a(a){b.call(this,a);this.Hi=this.Ig=this.$e=this.ia=!1;this.jf=this.wb=null;this.je=this.hg=0;this.ph=this.Gi=this.le=!1;this.url=[];this.loop=0;this.level=1;this.xc=0;this.mode=1;this.Bj=10;this.th=this.Ab=0;this.ka=1;this.Hc=this.wc=this.vc=this.Gc=0}__extends(a,b);a.prototype.$k=function(){this.ia&&this.ph?this.ph=!1:(!this.ia&&this.h.Gf&&(this.td(),
this.addElement()),0==this.loop?this.ia?(this.wb=null,this.Kc()):this.a.play():0<this.Nc?(this.Nc--,this.ia||(this.a.currentTime=0),this.Ig&&(this.Rc&&0==this.Rc.gain.value||0==this.nc.gain.value&&0==this.qc.gain.value&&0==this.oc.gain.value&&0==this.pc.gain.value)||(this.ia?(this.wb=null,this.Kc()):this.a.play())):this.ia&&(this.wb=null,this.le=!1))};a.prototype.Eh=function(){var a=this.h.Ha;a&&(this.ia||(this.source=a.createMediaElementSource(this.a)),2==this.mode||3==this.mode||5==this.mode?(this.Ae=
a.createChannelSplitter(2),this.nc=a.createGain(),this.oc=a.createGain(),this.pc=a.createGain(),this.qc=a.createGain(),this.mf=a.createChannelMerger(2),this.ia||this.source.connect(this.Ae),this.Ae.connect(this.nc,0),this.Ae.connect(this.oc,0),this.Ae.connect(this.pc,1),this.Ae.connect(this.qc,1),this.nc.connect(this.mf,0,0),this.oc.connect(this.mf,0,1),this.pc.connect(this.mf,0,0),this.qc.connect(this.mf,0,1),this.mf.connect(a.destination)):(this.Rc=a.createGain(),this.ia||this.source.connect(this.Rc),
this.Rc.connect(a.destination)))};a.prototype.bg=function(){var a=this.h.Ha;this.xb||this.Hi||(this.nc.gain.setValueAtTime(this.Gc,a.currentTime),this.qc.gain.setValueAtTime(this.Hc,a.currentTime),this.oc.gain.setValueAtTime(this.vc,a.currentTime),this.pc.gain.setValueAtTime(this.wc,a.currentTime))};a.prototype.yh=function(){var a=this.h,c=this.h.Ha;if(this.a||this.ia){var b,f=this.pan-a.pan.c;for(b=this.j-a.j.c;-180>f;)f+=360;for(;180<f;)f-=360;var l=this.xc,k=this.Bj;0==k&&(k=.01);0>k&&(k=a.f.c);
this.Gb||(this.Gb=new m.sa,this.Gb.Dj(this.pan,this.j));0!=this.mode&&1!=this.mode||!c||this.Rc&&this.Rc.gain.setValueAtTime(this.level*a.V*this.ka,c.currentTime);if(2==this.mode&&c){var w=.5*Math.cos(f*Math.PI/180)+.5;this.Gc=Math.sqrt(w)*this.ka*this.level*a.V;this.Hc=Math.sqrt(w)*this.ka*this.level*a.V;this.vc=Math.sqrt(1-w)*this.ka*this.level*a.V;this.wc=Math.sqrt(1-w)*this.ka*this.level*a.V;this.bg()}if(3==this.mode){0>f?f<-this.Ab?f+=this.Ab:f=0:f=f>this.Ab?f-this.Ab:0;w=this.level;b=Math.abs(b);
b=b<this.th?0:b-this.th;var B=1-b/k;if(Math.abs(f)>k||0>B){var h=w*l*a.V;c?(this.Gc=h*this.ka,this.Hc=h*this.ka,this.wc=this.vc=0,this.bg()):this.a.volume=w*l*a.V}else if(h=1-Math.abs(f/k),c){var g=w*(l+(1-l)*B*h)*a.V,h=w*l*a.V;0<=f?(this.Gc=g*this.ka,this.Hc=h*this.ka):(this.Gc=h*this.ka,this.Hc=g*this.ka);2*Math.abs(f)<k?(h=1-Math.abs(2*f)/k,g=w*(l+(1-l)*B*h)*a.V,h=.5*w*(1-l)*B*(1-h)*a.V,0<=f?(this.Hc=g*this.ka,this.wc=h*this.ka,this.vc=0):(this.Gc=g*this.ka,this.vc=h*this.ka,this.wc=0)):(h=1-(Math.abs(2*
f)-k)/k,g=.5*w*(1-l)*B*h*a.V,0<=f?(this.wc=g*this.ka,this.vc=0):(this.vc=g*this.ka,this.wc=0));this.bg()}else this.a.volume=w*(l+(1-l)*B*h)*a.V}4==this.mode&&(Math.abs(f)<this.Ab&&Math.abs(b)<this.th?this.$e||(this.$e=!0,this.Nc=this.loop-1,this.ia?this.le||this.Kc():this.a.play()):this.$e=!1);5==this.mode&&(b=180*Math.acos(a.Th.fh(this.Gb))/Math.PI,b<this.Ab?c?(this.Gc=this.level*a.V*this.ka,this.Hc=this.level*a.V*this.ka,this.wc=this.vc=0,this.bg()):this.a.volume=this.level*a.V:c?b<this.Ab+k?(0>
f?f=f>-this.Ab?0:f+this.Ab:f=f<this.Ab?0:f-this.Ab,g=1-Math.max(b-this.Ab,0)/k,h=Math.max(1-Math.abs(f)*Math.cos(this.j*Math.PI/180)/k,0),0<f?(this.Gc=this.level*(g*(1-this.xc)+this.xc)*a.V*this.ka,this.Hc=this.level*(g*h*(1-this.xc)+this.xc)*a.V*this.ka,this.vc=0,this.wc=this.level*g*(1-h)*a.V*this.ka):(this.Gc=this.level*(g*h*(1-this.xc)+this.xc)*a.V*this.ka,this.Hc=this.level*(g*(1-this.xc)+this.xc)*a.V*this.ka,this.vc=this.level*g*(1-h)*a.V*this.ka,this.wc=0),this.bg()):(g=this.level*this.xc*
a.V,this.Gc=g*this.ka,this.Hc=g*this.ka,this.wc=this.vc=0):(b-=this.Ab,this.a.volume=b<k&&0<k?this.level*(l+(1-l)*(1-Math.abs(b/k)))*a.V:l*a.V));6==this.mode&&(b=180*Math.acos(a.Th.fh(this.Gb))/Math.PI,Math.abs(b)<this.Ab?this.$e||(this.$e=!0,this.Nc=this.loop-1,this.ia?this.le||this.Kc():this.a.play()):this.$e=!1)}};a.prototype.sj=function(){var a=this;a.wb=this.h.Ha.createBufferSource();a.wb.addEventListener("ended",function(){a.$k()},!1);2==a.mode||3==a.mode||5==a.mode?a.wb.connect(a.Ae):a.wb.connect(a.Rc)};
a.prototype.zn=function(a){var c=this,b=this.h.Ha;c.sj();this.h.O("createBufferSoundSource()");b.decodeAudioData(a,function(a){c.jf=a;c.wb.buffer=a;c.h.O("audio Data decoded");c.Gi&&(c.Kc(),c.Gi=!1)})};a.prototype.Kc=function(){var a=this.h.Ha,c=this.je;this.jf?(null==this.wb&&(this.sj(),this.wb.buffer=this.jf),this.hg=a.currentTime-c,this.je=0,this.le=!0,this.ph=!1,this.wb.start(0,c),this.h.O("buffer Source started")):(this.h.O("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.Gi=!0)};
a.prototype.Lh=function(){var a=this.h.Ha.currentTime-this.hg;this.ze();this.je=a};a.prototype.ze=function(){this.wb&&this.le&&(this.ph=!0,this.wb.disconnect(),this.wb.stop(0),this.wb=null);this.hg=this.je=0;this.le=!1};a.prototype.Sl=function(){var a=this.h.Ha;return this.je?this.je:this.hg?a.currentTime-this.hg:0};a.prototype.Tl=function(a){this.ze();this.je=a;this.Kc()};a.prototype.addElement=function(){var a=-1,c=this,b=this.h,f=this.h.Ha;try{for(var l=!1,k=0;k<b.S.length;k++)b.S[k].id==c.id&&
(a=k,null==b.S[k].a&&!b.S[k].ia||b.S[k].url.join()!=c.url.join()||b.S[k].loop!=c.loop||b.S[k].mode!=c.mode||(l=!0));if(l)b.O("Keep playing "+c.id);else{if(0<=a){var w=b.S[a];if(null!=w.a||w.ia)if(f&&b.Fa.enabled)b.Fa.kg.push(w),1!=b.C.Na&&2!=b.C.Na&&b.Fa.Zh(w);else{try{w.ia?w.Lh():w.a.pause()}catch(h){b.O(h)}try{w.td()}catch(h){b.O(h)}}}if(f&&b.Id&&(2==this.mode||3==this.mode||5==this.mode)){if(0<c.url.length){c.ia=!0;c.Eh();var g=new XMLHttpRequest;g.open("GET",b.Xb(c.url[0]),!0);g.responseType=
"arraybuffer";g.onload=function(){c.zn(g.response)};g.send();c.Ig=!1}}else{c.a=document.createElement("audio");c.a.crossOrigin=b.crossOrigin;c.a.setAttribute("class","ggmedia");b.Je&&c.a.setAttribute("id",b.Je+c.id);for(k=0;k<c.url.length;k++)l=void 0,l=document.createElement("source"),""!=c.url[k]&&"#"!=c.url[k]&&(l.crossOrigin=b.crossOrigin,l.setAttribute("src",b.Xb(c.url[k])),c.a.appendChild(l));c.a.volume=c.level*b.V;0<c.a.childNodes.length&&(b.U.appendChild(c.a),c.a.addEventListener("ended",
function(){c.$k()},!1),f&&(c.Eh(),c.Ig=!1,0==c.loop&&c.source.mediaElement&&(c.source.mediaElement.loop=!0)))}1<=c.loop&&(c.Nc=c.loop-1);0<=a?b.S[a]=c:b.S.push(c);1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||f&&b.Fa.enabled||(c.ia||(c.a.autoplay=!0),c.autoplay=!0);0==c.mode&&0<=c.loop&&(c.autoplay=!0);c.yh()}}catch(h){this.h.O(h)}};a.prototype.td=function(){try{this.h.O("Remove Snd:"+this.id),this.ia||(this.h.U.removeChild(this.a),this.a=null)}catch(a){this.h.O(a)}};a.prototype.Db=function(a){b.prototype.Db.call(this,
a);var c;(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=a.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=a.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=a.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=a.getAttributeNode("field"))this.Bj=Number(c.nodeValue);if(c=a.getAttributeNode("ambientlevel"))this.xc=Number(c.nodeValue);if(c=a.getAttributeNode("pansize"))this.Ab=Number(c.nodeValue);if(c=a.getAttributeNode("tiltsize"))this.th=
Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),a=a.nextSibling};return a}(g);m.Il=h;h=function(b){function a(a){b.call(this,a);this.poster="";this.mb=this.Ea=this.wa=0;this.f=50;this.Sa=0;this.Yc=this.Cf=!1}__extends(a,b);a.prototype.Tc=function(){1!=this.Sa&&4!=this.Sa||this.zf(!this.xb);2==this.Sa&&this.h.Fk(this.id)};a.prototype.zf=function(a){var c=this.h,b=c.Ha;if(1==this.Sa||4==this.Sa)if(this.xb=a,this.h.vb)(c=
c.ha)&&c.activateSound(this.id,this.xb?1:0);else{if(this.xb)this.a.play(),this.a.style.zIndex=(c.rg+8E4).toString(),this.a.style[this.h.Qc]="all 1s ease 0s",c.ke(this.id);else{this.a.style.zIndex=c.rg.toString();this.a.style[this.h.Qc]="all 1s ease 0s";this.Hi=!0;var f=this;setTimeout(function(){f.Hi=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)){var b=b.currentTime,l=this.nc.gain.value,k=this.qc.gain.value,w=this.oc.gain.value,h=this.pc.gain.value;this.xb?(this.nc.gain.linearRampToValueAtTime(l,
b),this.nc.gain.linearRampToValueAtTime(this.level*c.V,b+1),this.qc.gain.linearRampToValueAtTime(k,b),this.qc.gain.linearRampToValueAtTime(this.level*c.V,b+1),this.oc.gain.linearRampToValueAtTime(w,b),this.oc.gain.linearRampToValueAtTime(0,b+1),this.pc.gain.linearRampToValueAtTime(h,b),this.pc.gain.linearRampToValueAtTime(0,b+1)):(this.nc.gain.linearRampToValueAtTime(l,b),this.nc.gain.linearRampToValueAtTime(this.Gc,b+1),this.qc.gain.linearRampToValueAtTime(k,b),this.qc.gain.linearRampToValueAtTime(this.Hc,
b+1),this.oc.gain.linearRampToValueAtTime(w,b),this.oc.gain.linearRampToValueAtTime(this.vc,b+1),this.pc.gain.linearRampToValueAtTime(h,b),this.pc.gain.linearRampToValueAtTime(this.wc,b+1))}this.yf=!0;this.h.ql()}2==this.Sa&&(a?this.h.ke(this.id):this.h.Fi(this.id))};a.prototype.Af=function(){this.yf=!1;this.a.style[this.h.Qc]="none"};a.prototype.Jo=function(){0==this.loop?this.a.play():0<this.Nc?(this.Nc--,this.a.currentTime=0,this.a.play()):this.ik=!1};a.prototype.Db=function(a){b.prototype.Db.call(this,
a);var c;if(c=a.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=a.getAttributeNode("rotx"))this.wa=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ea=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.mb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Ac=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Sc=Number(c.nodeValue);this.jd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=
a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Cf=1==Number(c.nodeValue)};a.prototype.addElement=function(){var a=this,c=this.h;try{a.a=document.createElement("video");a.a.setAttribute("class","ggmedia");a.a.crossOrigin=c.crossOrigin;a.a.hidden=!0;c.Je&&a.a.setAttribute("id",c.Je+a.id);if(c.og)a.a.setAttribute("webkit-playsinline","webkit-playsinline"),a.a.setAttribute("style","display: none; max-width:none;");else if(a.a.setAttribute("style",
"max-width:none;pointer-events:none;"),a.a.setAttribute("webkit-playsinline","webkit-playsinline"),1==a.Sa||4==a.Sa)a.a.addEventListener(c.wl(),function(){a.Af()},!1),a.a.addEventListener("transitionend",function(){a.Af()},!1);var b;for(b=0;b<a.url.length;b++){var f;f=document.createElement("source");f.crossOrigin=c.crossOrigin;f.setAttribute("src",c.Xb(a.url[b]));a.a.appendChild(f)}""!=a.poster&&(a.a.poster=c.Xb(a.poster),0>a.loop&&(a.a.b="none"));a.a.volume=a.level*c.V;1<=a.loop&&(a.Nc=a.loop-1);
(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.a.autoplay=!0,a.ik=!0,a.autoplay=!0);c.J.push(this);c.og?c.U.appendChild(a.a):(a.a.style.position="absolute",a.Ac&&(a.a.width=a.Ac),a.Sc&&(a.a.height=a.Sc),c.B.appendChild(a.a),a.Eh());a.a.onclick=function(){a.Tc()};a.a.addEventListener("ended",function(){a.Jo()},!1)}catch(l){c.O(l)}};a.prototype.registerElement=function(a,c){this.Yc=!0;this.a=c;this.id=a;this.level=1;this.h.J.push(this)};a.prototype.td=function(){var a=this.h;a.og&&(a.H.deleteTexture(this.ic),
this.ic=0,a.U.removeChild(this.a));a.rl&&a.B.removeChild(this.a);this.a=null};return a}(h);m.Sk=h;h=function(b){function a(a){b.call(this,a);this.url="";this.mb=this.Ea=this.wa=0;this.f=50;this.Sa=0;this.Cf=!1;this.Sc=this.Ac=100;this.jd=1}__extends(a,b);a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;if(c=a.getAttributeNode("url"))this.url=c.nodeValue.toString();if(c=a.getAttributeNode("rotx"))this.wa=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ea=Number(c.nodeValue);if(c=
a.getAttributeNode("rotz"))this.mb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Ac=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Sc=Number(c.nodeValue);this.jd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Cf=1==Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&
(this.url=c.nodeValue.toString()),a=a.nextSibling};a.prototype.Af=function(){this.yf=!1;this.a.style[this.h.Qc]="none"};a.prototype.Tc=function(){1!==this.Sa&&4!==this.Sa||this.zf(!this.xb)};a.prototype.zf=function(a){var c=this.h;if(1===this.Sa||4===this.Sa)this.xb=a,this.h.vb?(a=this.h.ha)&&a.activateSound(this.id,this.xb?1:0):(this.a.style.zIndex=this.xb?(c.rg+8E4).toString():c.rg.toString(),this.a.style[c.Qc]="all 1s ease 0s",this.yf=!0,c.ll())};a.prototype.addElement=function(){var a=this,c=
this.h;try{a.a=document.createElement("img");a.a.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.a.setAttribute("class","ggmedia");a.a.hidden=!0;c.Je&&a.a.setAttribute("id",c.Je+a.id);a.a.ondragstart=function(){return!1};if(1===a.Sa||4===a.Sa)a.a.addEventListener(c.wl(),function(){a.Af()},!1),a.a.addEventListener("transitionend",function(){a.Af()},!1);a.a.setAttribute("src",c.Xb(a.url));a.Ac&&(a.a.width=a.Ac);a.Sc&&(a.a.height=a.Sc);c.Xa.push(a);a.a.style.position=
"absolute";a.Tc&&(a.a.onclick=function(){a.Tc()});c.B.appendChild(a.a)}catch(b){c.O("Error addimage:"+b)}};a.prototype.td=function(){this.h.B.removeChild(this.a);this.a=null};return a}(g);m.Gl=h;g=function(b){function a(a){b.call(this,a);this.alpha=this.pj=50;this.type=0;this.color=16777215}__extends(a,b);a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;if(c=a.getAttributeNode("blinding"))this.pj=Number(c.nodeValue);if(c=a.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=
a.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=a.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return a}(g);m.Hl=g;g=function(){function b(a){this.type="empty";this.Zk=this.id=this.target=this.description=this.title=this.url="";this.Bh=100;this.Pg=20;this.Ch=!1;this.a=null;this.fb=this.oa=this.j=this.pan=0;this.Tb=a.w.Tb;this.Qb=a.w.Qb;this.Sb=a.w.Sb;this.Pb=a.w.Pb;this.Ie=a.w.Ie;this.pg=[]}b.prototype.Fe=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.j;this.url=
this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.Zk;this.obj=this.a};b.prototype.Db=function(a){var d;if(d=a.getAttributeNode("url"))this.url=d.nodeValue.toString();if(d=a.getAttributeNode("target"))this.target=d.nodeValue.toString();if(d=a.getAttributeNode("title"))this.title=d.nodeValue.toString();if(d=a.getAttributeNode("description"))this.description=d.nodeValue.toString();if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=
a.getAttributeNode("skinid"))this.Zk=d.nodeValue.toString();if(d=a.getAttributeNode("width"))this.Bh=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.Pg=Number(d.nodeValue);if(d=a.getAttributeNode("wordwrap"))this.Ch=1==Number(d.nodeValue);d=a.getAttributeNode("pan");this.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");this.j=1*(d?Number(d.nodeValue):0);if(d=a.getAttributeNode("bordercolor"))this.Tb=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundcolor"))this.Qb=1*
Number(d.nodeValue);if(d=a.getAttributeNode("borderalpha"))this.Sb=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundalpha"))this.Pb=1*Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.Ie=1==Number(d.nodeValue);for(a=a.firstChild;a;){if("vertex"==a.nodeName){var c={pan:0,j:0};d=a.getAttributeNode("pan");c.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");c.j=1*(d?Number(d.nodeValue):0);this.pg.push(c)}a=a.nextSibling}this.Fe()};return b}();m.Vg=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(b,a){this.x=b;this.y=a}h.prototype.Ya=function(b,a){this.x=b;this.y=a};h.prototype.ld=function(b,a,d){var c=a.y-b.y;this.x=b.x+(a.x-b.x)*d;this.y=b.y+c*d};h.prototype.Rl=function(b,a,d,c,e){var f;f=new h;f.ld(b,d,e);b=new h;b.ld(d,c,e);d=new h;d.ld(c,a,e);a=new h;a.ld(f,b,e);f=new h;f.ld(b,d,e);b=new h;b.ld(a,f,e);this.x=b.x;this.y=b.y};h.prototype.Ih=function(b,a,d,c,e){var f=new h,l=.5,k=.25;do{f.Rl(b,a,d,c,l);var w=f.x-e,l=0<w?l-k:l+k,k=k/2}while(.01<Math.abs(w));
this.x=f.x;this.y=f.y};return h}();m.lc=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(b,a,d,c,e){this.x=b;this.y=a;this.z=d;this.ad=c;this.Gb=e}h.prototype.Ya=function(b,a,d,c,e){this.x=b;this.y=a;this.z=d;this.ad=c;this.Gb=e};h.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.ad+","+this.Gb+")"};h.prototype.wa=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.y,c=this.z;this.y=b*d-a*c;this.z=a*d+b*c};h.prototype.Fn=function(){var b=this.y;this.y=-this.z;this.z=b};h.prototype.En=function(){var b=this.y;
this.y=this.z;this.z=-b};h.prototype.Ea=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.z;this.x=b*d+a*c;this.z=-a*d+b*c};h.prototype.Gn=function(){var b=this.x;this.x=-this.z;this.z=b};h.prototype.mb=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.y;this.x=b*d-a*c;this.y=a*d+b*c};h.prototype.Qk=function(){var b=this.x;this.x=-this.y;this.y=b};h.prototype.me=function(b){return this.wa(b*Math.PI/180)};h.prototype.Wf=function(b){return this.Ea(b*Math.PI/180)};h.prototype.jh=
function(b){return this.mb(b*Math.PI/180)};h.prototype.clone=function(){return new h(this.x,this.y,this.z,this.ad,this.Gb)};h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};h.prototype.normalize=function(){var b=this.length();0<b&&(b=1/b,this.x*=b,this.y*=b,this.z*=b)};h.prototype.fh=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};h.prototype.Dj=function(b,a){var d;d=Math.cos(a*Math.PI/180);this.x=d*Math.sin(b*Math.PI/180);this.y=Math.sin(a*Math.PI/180);
this.z=d*Math.cos(b*Math.PI/180)};h.prototype.Nl=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};h.prototype.Ol=function(){return 180*Math.asin(this.y/this.length())/Math.PI};h.prototype.ld=function(b,a,d){this.x=b.x*d+a.x*(1-d);this.y=b.y*d+a.y*(1-d);this.z=b.z*d+a.z*(1-d);this.ad=b.ad*d+a.ad*(1-d);this.Gb=b.Gb*d+a.Gb*(1-d)};return h}();m.sa=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(){this.Ln()}h.prototype.Ln=function(){this.Yb=1;this.ac=this.$b=this.Zb=0;this.bc=1;this.ec=this.dc=this.cc=0;this.fc=1};h.prototype.clone=function(b){this.Yb=b.Yb;this.Zb=b.Zb;this.$b=b.$b;this.ac=b.ac;this.bc=b.bc;this.cc=b.cc;this.dc=b.dc;this.ec=b.ec;this.fc=b.fc};h.prototype.Vn=function(b){var a=Math.cos(b);b=Math.sin(b);this.Yb=1;this.ac=this.$b=this.Zb=0;this.bc=a;this.cc=-b;this.dc=0;this.ec=b;this.fc=a};h.prototype.Wn=function(b){var a=Math.cos(b);
b=Math.sin(b);this.Yb=a;this.Zb=0;this.$b=b;this.ac=0;this.bc=1;this.cc=0;this.dc=-b;this.ec=0;this.fc=a};h.prototype.Xn=function(b){var a=Math.cos(b);b=Math.sin(b);this.Yb=a;this.Zb=-b;this.$b=0;this.ac=b;this.bc=a;this.ec=this.dc=this.cc=0;this.fc=1};h.prototype.Sn=function(b){this.Vn(b*Math.PI/180)};h.prototype.Tn=function(b){this.Wn(b*Math.PI/180)};h.prototype.Un=function(b){this.Xn(b*Math.PI/180)};h.prototype.me=function(b){var a,d;a=new h;d=new h;a.Sn(b);d.clone(this);this.multiply(a,d)};h.prototype.Wf=
function(b){var a,d;a=new h;d=new h;a.Tn(b);d.clone(this);this.multiply(a,d)};h.prototype.jh=function(b){var a,d;a=new h;d=new h;a.Un(b);d.clone(this);this.multiply(a,d)};h.prototype.multiply=function(b,a){this.Yb=b.Yb*a.Yb+b.Zb*a.ac+b.$b*a.dc;this.Zb=b.Yb*a.Zb+b.Zb*a.bc+b.$b*a.ec;this.$b=b.Yb*a.$b+b.Zb*a.cc+b.$b*a.fc;this.ac=b.ac*a.Yb+b.bc*a.ac+b.cc*a.dc;this.bc=b.ac*a.Zb+b.bc*a.bc+b.cc*a.ec;this.cc=b.ac*a.$b+b.bc*a.cc+b.cc*a.fc;this.dc=b.dc*a.Yb+b.ec*a.ac+b.fc*a.dc;this.ec=b.dc*a.Zb+b.ec*a.bc+b.fc*
a.ec;this.fc=b.dc*a.$b+b.ec*a.cc+b.fc*a.fc};h.prototype.gn=function(b){var a,d,c;a=b.x;d=b.y;c=b.z;b.x=a*this.Yb+d*this.Zb+c*this.$b;b.y=a*this.ac+d*this.bc+c*this.cc;b.z=a*this.dc+d*this.ec+c*this.fc};return h}();m.Bl=g})(ggP2VR||(ggP2VR={}));
(function(m){m.T={create:function(g){var h;"undefined"!=typeof Float32Array?h=new Float32Array(16):h=Array(16);g&&(h[0]=g[0],h[1]=g[1],h[2]=g[2],h[3]=g[3],h[4]=g[4],h[5]=g[5],h[6]=g[6],h[7]=g[7],h[8]=g[8],h[9]=g[9],h[10]=g[10],h[11]=g[11],h[12]=g[12],h[13]=g[13],h[14]=g[14],h[15]=g[15]);return h},set:function(g,h){h[0]=g[0];h[1]=g[1];h[2]=g[2];h[3]=g[3];h[4]=g[4];h[5]=g[5];h[6]=g[6];h[7]=g[7];h[8]=g[8];h[9]=g[9];h[10]=g[10];h[11]=g[11];h[12]=g[12];h[13]=g[13];h[14]=g[14];h[15]=g[15];return h},Hd:function(g){g[0]=
1;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=1;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g},multiply:function(g,h,b){b||(b=g);var a=g[0],d=g[1],c=g[2],e=g[3],f=g[4],l=g[5],k=g[6],w=g[7],B=g[8],n=g[9],m=g[10],p=g[11],u=g[12],t=g[13],v=g[14];g=g[15];var q=h[0],x=h[1],A=h[2],z=h[3],y=h[4],C=h[5],D=h[6],E=h[7],F=h[8],H=h[9],I=h[10],J=h[11],K=h[12],L=h[13],M=h[14];h=h[15];b[0]=q*a+x*f+A*B+z*u;b[1]=q*d+x*l+A*n+z*t;b[2]=q*c+x*k+A*m+z*v;b[3]=q*e+x*w+A*p+z*g;b[4]=y*a+C*f+D*B+
E*u;b[5]=y*d+C*l+D*n+E*t;b[6]=y*c+C*k+D*m+E*v;b[7]=y*e+C*w+D*p+E*g;b[8]=F*a+H*f+I*B+J*u;b[9]=F*d+H*l+I*n+J*t;b[10]=F*c+H*k+I*m+J*v;b[11]=F*e+H*w+I*p+J*g;b[12]=K*a+L*f+M*B+h*u;b[13]=K*d+L*l+M*n+h*t;b[14]=K*c+L*k+M*m+h*v;b[15]=K*e+L*w+M*p+h*g;return b},translate:function(g,h,b){var a=h[0],d=h[1];h=h[2];if(!b||g==b)return g[12]=g[0]*a+g[4]*d+g[8]*h+g[12],g[13]=g[1]*a+g[5]*d+g[9]*h+g[13],g[14]=g[2]*a+g[6]*d+g[10]*h+g[14],g[15]=g[3]*a+g[7]*d+g[11]*h+g[15],g;var c=g[0],e=g[1],f=g[2],l=g[3],k=g[4],w=g[5],
B=g[6],n=g[7],m=g[8],p=g[9],u=g[10],t=g[11];b[0]=c;b[1]=e;b[2]=f;b[3]=l;b[4]=k;b[5]=w;b[6]=B;b[7]=n;b[8]=m;b[9]=p;b[10]=u;b[11]=t;b[12]=c*a+k*d+m*h+g[12];b[13]=e*a+w*d+p*h+g[13];b[14]=f*a+B*d+u*h+g[14];b[15]=l*a+n*d+t*h+g[15];return b},scale:function(g,h,b){var a=h[0],d=h[1];h=h[2];if(!b||g==b)return g[0]*=a,g[1]*=a,g[2]*=a,g[3]*=a,g[4]*=d,g[5]*=d,g[6]*=d,g[7]*=d,g[8]*=h,g[9]*=h,g[10]*=h,g[11]*=h,g;b[0]=g[0]*a;b[1]=g[1]*a;b[2]=g[2]*a;b[3]=g[3]*a;b[4]=g[4]*d;b[5]=g[5]*d;b[6]=g[6]*d;b[7]=g[7]*d;b[8]=
g[8]*h;b[9]=g[9]*h;b[10]=g[10]*h;b[11]=g[11]*h;b[12]=g[12];b[13]=g[13];b[14]=g[14];b[15]=g[15];return b},rotate:function(g,h,b,a){var d=b[0],c=b[1];b=b[2];var e=Math.sqrt(d*d+c*c+b*b);if(!e)return null;1!=e&&(e=1/e,d*=e,c*=e,b*=e);var f=Math.sin(h),l=Math.cos(h),k=1-l;h=g[0];var e=g[1],w=g[2],B=g[3],n=g[4],m=g[5],p=g[6],u=g[7],t=g[8],v=g[9],q=g[10],x=g[11],A=d*d*k+l,z=c*d*k+b*f,y=b*d*k-c*f,C=d*c*k-b*f,D=c*c*k+l,E=b*c*k+d*f,F=d*b*k+c*f,d=c*b*k-d*f,c=b*b*k+l;a?g!=a&&(a[12]=g[12],a[13]=g[13],a[14]=g[14],
a[15]=g[15]):a=g;a[0]=h*A+n*z+t*y;a[1]=e*A+m*z+v*y;a[2]=w*A+p*z+q*y;a[3]=B*A+u*z+x*y;a[4]=h*C+n*D+t*E;a[5]=e*C+m*D+v*E;a[6]=w*C+p*D+q*E;a[7]=B*C+u*D+x*E;a[8]=h*F+n*d+t*c;a[9]=e*F+m*d+v*c;a[10]=w*F+p*d+q*c;a[11]=B*F+u*d+x*c;return a},lm:function(g,h,b,a,d,c,e){e||(e=m.T.create());var f=h-g,l=a-b,k=c-d;e[0]=2*d/f;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*d/l;e[6]=0;e[7]=0;e[8]=(h+g)/f;e[9]=(a+b)/l;e[10]=-(c+d)/k;e[11]=-1;e[12]=0;e[13]=0;e[14]=-(c*d*2)/k;e[15]=0;return e},perspective:function(g,h,b,a,d){g=
b*Math.tan(g*Math.PI/360);h=g*h;return m.T.lm(-h,h,-g,g,b,a,d)},Wo:function(g,h,b,a,d,c,e){e||(e=m.T.create());var f=h-g,l=a-b,k=c-d;e[0]=2/f;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2/l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=-2/k;e[11]=0;e[12]=-(g+h)/f;e[13]=-(a+b)/l;e[14]=-(c+d)/k;e[15]=1;return e}}})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(b){this.da=m.T.create();this.bb=m.T.create();this.la=this.Uc=0;this.yd=5;this.Fb=0;this.Ua=[];this.Hf=!1;this.Vi=this.ci=this.Li=1;this.Ce=1E6;this.Bg=[!1,!1,!1,!1,!1,!1];this.oh=!1;this.jj=8;this.h=b;if(b.Id||b.Rg)b.yd=2}h.prototype.Ff=function(){var b=this.h.H;if(b){var a=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(a)),alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.VERTEX_SHADER);this.zc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.F=b.createProgram();this.Le(this.F,d,a);this.F.Z=b.getAttribLocation(this.F,"aVertexPosition");b.enableVertexAttribArray(this.F.Z);this.F.xa=b.getAttribLocation(this.F,"aTextureCoord");b.enableVertexAttribArray(this.F.xa);this.F.Ld=b.getUniformLocation(this.F,"uPMatrix");this.F.Sf=b.getUniformLocation(this.F,"uMVMatrix");this.F.Ue=b.getUniformLocation(this.F,"uSampler");this.F.Dh=b.getUniformLocation(this.F,"uZoffset");a=b.createShader(b.VERTEX_SHADER);this.zc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
d=b.createShader(b.FRAGMENT_SHADER);this.zc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.rd=b.createProgram();this.Le(this.rd,a,d);this.rd.Z=b.getAttribLocation(this.rd,"aVertexPosition");b.enableVertexAttribArray(this.rd.Z);d=b.createShader(b.VERTEX_SHADER);this.zc(d,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
a=b.createShader(b.FRAGMENT_SHADER);this.zc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.rf=b.createProgram();this.Le(this.rf,d,a)}};h.prototype.Qg=function(){var b=this.h,a=b.H,d,c;a?(d=a.createShader(a.FRAGMENT_SHADER),c=this.hi(13),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),
this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Kk=a.createProgram(),this.Le(this.Kk,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.hi(4),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Lk=a.createProgram(),this.Le(this.Lk,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.hi(b.o.format),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Mk=a.createProgram(),this.Le(this.Mk,c,d),this.hh||(this.hh=a.createBuffer())):this.h.O("No WebGL to initRemapShader!")};h.prototype.zc=function(b,a){var d=this.h.H;d.shaderSource(b,a);d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(b)),O&&alert(d.getShaderInfoLog(b)))};h.prototype.Le=function(b,a,d){var c=this.h.H;c.attachShader(b,a);c.attachShader(b,d);c.linkProgram(b);c.getProgramParameter(b,c.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(c.getError()));c.useProgram(b)};h.prototype.hi=function(b){var a=this.h,d;d="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
d=(13==b?d+"uniform samplerCube cubeTexture;":d+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";d+="vec4 direction;\n";d+="vec2 src;\n";d+="vec2 srcCord;\n";d+="vec2 texc;\n";var c=this.Sj(a.za());a.za()!=a.gc&&0!=a.gc?(a=this.Sj(a.gc),d+="vec4 direction1,direction2;\n",d+=c.replace("direction=","direction1="),d+=a.replace("direction=","direction2="),d+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):d+=c;d+="direction=direction*matRotate;\n";13==b&&(d+="direction.z=-direction.z;",
d+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==b&&(d+="float iz=1.0/(direction.z * rectSrcDistance);\n",d+="src.x=-direction.x*iz;\n",d+="src.y= direction.y*iz;\n",d+="texc=src * srcScale + srcOffset;\n",d+="if (",d+="(direction.z<0.0) && ",d+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",d+="  gl_FragColor = texture2D(tileTexture, texc);\n",d+="} else {\n",d+="  discard;\n",d+="}\n");1==b&&(d+="src.x=atan(float(-direction.x), float(-direction.z));",d+=
"src.y=asin(direction.y);\n",d+="texc=src * srcScale + srcOffset;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");14==b&&(d+="vec2 cf;\n",d+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=+direction.y/direction.z;\n",d+="  cf.x=1.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",
d+="  src.y=-direction.y/direction.x;\n",d+="  cf.x=3.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=-direction.y/direction.z;\n",d+="  cf.x=5.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",d+="  src.y=+direction.y/direction.x;\n",d+="  cf.x=1.0;cf.y=1.0;\n",
d+="}\n",d+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",d+="  src.x=+direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=5.0;cf.y=1.0;\n",d+="}\n",d+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",d+="  src.x=-direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=3.0;cf.y=1.0;\n",d+="}\n",d+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",d+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");return d+="}\n"};h.prototype.Sj=function(b){var a="";switch(b){case 4:a+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:a+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:a+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return a+
"direction.w=0.0;\ndirection=normalize(direction);\n"};h.prototype.ak=function(b){var a,d,c,e,f=this.h,l=this.h.H;this.Sh=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.Sh);var k=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(a=0;12>a;a++)2>a%3&&(k[a]*=b);l.bufferData(l.ARRAY_BUFFER,new Float32Array(k),l.STATIC_DRAW);this.Xd=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.Xd);var w=[1,0,0,0,0,1,1,1];l.bufferData(l.ARRAY_BUFFER,new Float32Array(w),l.STATIC_DRAW);this.Mc=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
this.Mc);var h=[0,1,2,0,2,3];l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),l.STATIC_DRAW);var k=[],h=[],w=[],g=new m.sa;for(b=0;6>b;b++){c=b%3;e=3>b?1:0;for(d=0;4>d;d++){g.x=-1;g.y=-1;g.z=1;for(a=0;a<d;a++)g.Qk();w.push((0>g.x?.33:0)+.33*c,(0>g.y?0:.5)+.5*e);if(4>b)for(a=0;a<b;a++)g.Gn();else 5==b?g.Fn():g.En();k.push(g.x,g.y,g.z)}a=4*b;h.push(0+a,1+a,2+a,0+a,2+a,3+a)}f.o.gj=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,f.o.gj);l.bufferData(l.ARRAY_BUFFER,new Float32Array(k),l.STATIC_DRAW);
f.o.qh=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,f.o.qh);l.bufferData(l.ARRAY_BUFFER,new Float32Array(w),l.STATIC_DRAW);f.o.ni=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,f.o.ni);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),l.STATIC_DRAW);this.Um=l.createBuffer();this.Tm=l.createBuffer()};h.prototype.ji=function(b){var a=this;return function(){try{if(b.kn)return;var d=a.h.H;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=b.ge&&b.ge.complete?b.Wj||(d.bindTexture(d.TEXTURE_2D,
b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.ge),c=b.Wj=!0):null!=b.Oe&&b.Oe.complete&&(d.bindTexture(d.TEXTURE_2D,b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.Oe),c=!0);c&&(b.loaded=!0);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,0)}catch(e){a.h.O(e)}a.h.update()}};h.prototype.bk=function(){var b,a,d=this.h,c=d.H;if(this.Ua)for(;0<this.Ua.length;)c.deleteTexture(this.Ua.pop());this.Ua=[];for(var e=0;6>e;e++)a=c.createTexture(),this.Uc++,
a.Oe=null,a.ge=null,a.Wj=!1,c.bindTexture(c.TEXTURE_2D,a),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),d.De[e]&&(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.Xb(d.De[e]),a.Oe=b,b.addEventListener&&b.addEventListener("load",this.ji(a),!1),d.Hb.push(b)),this.Ua.push(a);for(e=0;6>e;e++)d.Cg[e]&&
(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.Xb(d.Cg[e]),b.addEventListener?b.addEventListener("load",this.ji(this.Ua[e]),!1):b.onload=this.ji(this.Ua[e]),this.Ua[e].ge=b,d.Hb.push(b));for(e=0;e<d.J.length;e++)d.J[e].Yc||(d.J[e].ic=c.createTexture(),d.Uc++,c.bindTexture(c.TEXTURE_2D,d.J[e].ic),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));d.o.ic=c.createTexture();d.Uc++;c.bindTexture(c.TEXTURE_2D,d.o.ic);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};h.prototype.Po=function(){var b=this.h;if(b.m.width!=b.B.offsetWidth||b.m.height!=b.B.offsetHeight)b.m.width=b.B.offsetWidth,
b.m.height=b.B.offsetHeight;b.be&&(b.Bc(0),b.bd());if(b.H){var a=b.H;this.wh();a.clear(a.DEPTH_BUFFER_BIT);a.useProgram(this.F);this.dg(0);a.uniform1i(this.F.Ue,0);a.enableVertexAttribArray(this.F.Z);a.enableVertexAttribArray(this.F.xa);a.bindBuffer(a.ARRAY_BUFFER,this.Xd);a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.uniform1f(this.F.Dh,1E-4);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);m.T.Hd(this.bb);m.T.perspective(b.Kb(),
b.jb.width/b.jb.height,.1,100,this.bb);a.uniformMatrix4fv(this.F.Ld,!1,this.bb);for(b=0;6>b;b++)this.dg(b),a.bindBuffer(a.ARRAY_BUFFER,this.Sh),a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Xd),a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0),6<=this.Ua.length&&this.Ua[b].loaded&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ua[b]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc),a.uniform1i(this.F.Ue,0),a.uniformMatrix4fv(this.F.Sf,!1,this.da),a.uniformMatrix4fv(this.F.Ld,
!1,this.bb),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0))}};h.prototype.wh=function(){var b=this.h;if(b.g.Qe&&6<b.g.Qe.length){var a=parseInt(b.g.Qe);b.H.clearColor((a>>16&255)/255,(a>>8&255)/255,(a>>0&255)/255,1)}};h.prototype.dg=function(b){var a=this.h;m.T.Hd(this.da);m.T.rotate(this.da,-a.M.c*Math.PI/180,[0,0,1]);m.T.rotate(this.da,-a.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.da,(180-a.pan.c)*Math.PI/180,[0,1,0]);a.Da&&(m.T.rotate(this.da,-a.Da.pitch*Math.PI/180,[1,0,0]),m.T.rotate(this.da,
a.Da.M*Math.PI/180,[0,0,1]));4>b?m.T.rotate(this.da,-Math.PI/2*b,[0,1,0]):m.T.rotate(this.da,Math.PI/2*(5==b?1:-1),[1,0,0])};h.prototype.so=function(b){var a=this;return function(){a.h.ya=!0;a.h.Oc=!0;b.loaded=!0;b.Mi=0;b.Nd=0;var d=a.h.H;a.la&&a.la--;0==a.la&&a.h.N&&a.h.N.ggLoadedLevels&&a.h.N.ggLoadedLevels();d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);if(null!=b.g&&b.g.complete){b.ib=d.createTexture();a.h.Uc++;d.bindTexture(d.TEXTURE_2D,b.ib);try{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,
b.g)}catch(c){d.texImage2D(d.TEXTURE_2D,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),a.h.O(c)}}a.h.update()}};h.prototype.hn=function(b){var a=this;return function(){a.h.ya=!0;a.h.Oc=!0;var d=a.h.g;try{if(null!=b&&b.complete){var c=d.I[d.I.length-1],e=d.Ka;c.height=c.width=b.width-2*e;c.L=c.ea=1;for(var f=0;6>f;f++){var l=new m.Gd;l.K=document.createElement("canvas");a.h.$?(l.K.width=c.width+2*e,l.K.height=c.height+2*e):(l.K.width=d.G+2*e,l.K.height=d.G+2*e);l.Oa=l.K.getContext("2d");
l.K.style[a.h.Va+"Origin"]="0% 0%";l.K.style.overflow="hidden";l.K.style.position="absolute";l.g=b;var k=c.width+2*e,w=c.height+2*e;l.Oa&&l.Oa.drawImage(b,0,f*w,k,w,0,0,k,w);if(a.h.$&&a.h.H){var g=a.h.H;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,1);l.ib=g.createTexture();a.h.Uc++;g.bindTexture(g.TEXTURE_2D,l.ib);try{g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,l.K)}catch(h){a.h.O(h)}g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,0)}a.h.Fc&&(l.K.Fd=-1,a.h.B.insertBefore(l.K,
a.h.B.firstChild));c.W[f]=l}c.loaded=!0}}catch(h){a.h.O(h)}a.h.update()}};h.prototype.hl=function(b){var a=this;return function(){a.h.ya=!0;a.h.Oc=!0;a.la&&a.la--;0==a.la&&a.h.N&&a.h.N.ggLoadedLevels&&a.h.N.ggLoadedLevels();b.g=null}};h.prototype.No=function(){var b=this.h,a=b.g,d=b.g.I;b.be&&(b.Bc(0),b.bd());if(b.H){var c=b.H;c.useProgram(this.F);this.wh();c.clear(c.DEPTH_BUFFER_BIT);c.enable(c.DEPTH_TEST);m.T.Hd(this.bb);m.T.perspective(b.Kb(),b.jb.width/b.jb.height,.1,100,this.bb);c.uniformMatrix4fv(this.F.Ld,
!1,this.bb);this.Fb=0;b.nl();b.vi();var e=b.$h(),f;for(f=d.length-1;f>=e;){var l=d[f],k=1;f==d.length-1&&0==a.Ka&&(k=a.G/(a.G-.5));for(var w=0;6>w;w++){var g;g=this.h.gb.ab[w];var h=g.Me;if(g.rc&&0<h.cf&&0<h.qg&&0<h.scale||l.cache){g.ya=!1;var r;g.ye[f]||(g.ye[f]={Wa:0,rb:0,sb:0,tb:0});r=g.ye[f];l.cache?(r.Wa=0,r.rb=0,r.sb=l.L-1,r.tb=l.ea-1):b.Tj(l,h,r);for(var h=!0,p=r.rb;p<=r.tb;p++)for(var u=r.Wa;u<=r.sb;u++){var t=u+p*l.L+w*l.L*l.ea,v=l.W[t];v||(v=l.W[t]=new m.Gd);this.la<this.yd?v.g||(v.Nd?v.Nd--:
(this.Yg(v,l,b.pe(w,f,u,p)),b.ya=!0)):this.Fb++;if(v.ib){if(!v.Bf){t=.5*f+1;v.Bf=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v.Bf);var q=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];q[3]=u*a.G-a.Ka;q[0]=Math.min((u+1)*a.G,l.width)+a.Ka;q[7]=p*a.G-a.Ka;q[1]=Math.min((p+1)*a.G,l.height)+a.Ka;q[4]=q[1];q[6]=q[3];q[9]=q[0];q[10]=q[7];for(var x=0;12>x;x++)q[x]=0==x%3?k*t*(-2*q[x]/l.width+1):1==x%3?k*t*(-2*q[x]/l.height+1):t;c.bufferData(c.ARRAY_BUFFER,new Float32Array(q),c.STATIC_DRAW)}}else h=!1;v.visible=g.rc}r.si=
h}}f--}for(w=0;6>w;w++)if(g=b.gb.ab[w],g.rc)for(h=g.Me,this.dg(w),c.uniform1i(this.F.Ue,0),c.uniformMatrix4fv(this.F.Ld,!1,this.bb),c.uniformMatrix4fv(this.F.Sf,!1,this.da),c.enableVertexAttribArray(this.F.Z),c.enableVertexAttribArray(this.F.xa),c.bindBuffer(c.ARRAY_BUFFER,this.Xd),c.vertexAttribPointer(this.F.xa,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Mc),c.useProgram(this.F),f=e;f<=d.length-1;){l=d[f];if(g.rc&&0<h.cf&&g.ye[f]&&0<=g.ye[f].Wa){r=g.ye[f];
for(p=r.rb;p<=r.tb;p++)for(u=r.Wa;u<=r.sb;u++)t=u+p*l.L+w*l.L*l.ea,(v=l.W[t])&&v.ib&&(c.uniform1f(this.F.Dh,1E-4*(u%2+p%2*2)),c.bindBuffer(c.ARRAY_BUFFER,v.Bf),c.vertexAttribPointer(this.F.Z,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,v.ib),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,
6,c.UNSIGNED_SHORT,0)),v.visible=g.rc;r.si&&(f=d.length)}f++}this.Ni();b.Oc=!1}};h.prototype.Yg=function(b,a,d){var c=this.h;c.mi++;b.g=new Image;b.Mi++;b.Nd=1<<b.Mi;b.g.onload=this.so(b);b.g.onerror=this.hl(b);b.g.onabort=this.hl(b);b.g.crossOrigin=c.crossOrigin;b.g.setAttribute("src",d);a.cache&&c.Hb.push(b.g);0==this.la&&c.N&&c.N.ggReLoadedLevels&&c.N.ggReLoadedLevels();this.la++};h.prototype.vl=function(){var b=this.h,a=b.g;b.be&&(b.Bc(0),b.bd());if(b.H){var d=b.H;this.wh();O&&d.clearColor(.2,
0,0,1);d.clear(d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.bindBuffer(d.ARRAY_BUFFER,this.hh);var c=[0,0];c[2]=b.m.width;c[3]=0;c[4]=b.m.width;c[5]=b.m.height;c[6]=0;c[7]=b.m.height;d.bufferData(d.ARRAY_BUFFER,new Float32Array(c),d.STATIC_DRAW);this.Fb=0;if(!this.sc||this.Hf)0<a.I.length?this.dm():this.em();b.o.Wc?this.qn():(d.enable(d.DEPTH_TEST),d.depthRange(0,1),d.depthFunc(d.LESS),this.oh=!1,0<a.I.length&&this.Oo(),this.sc&&!this.oh&&this.pn())}};h.prototype.co=function(b,
a,d,c,e,f,l){var k=this.h,g=k.g,h=k.m,n=d*g.G/a.width,r=(d+1)*g.G/a.width;d=c*g.G/a.height;a=(c+1)*g.G/a.height;1<r&&(e*=2,r=1);1<a&&(e*=2,a=1);e=Math.min(this.jj,e);var r=(r-n)/e,p=(a-d)/e;c=a=0;var u,t,g={x:0,y:0},v={x:0,y:0},q=0;b.Og=0;var x=k.Tf,A=new m.sa,z=new m.Bl;4>f?z.Wf(-90*f):z.me(5==f?90:-90);k.Da&&(z.jh(k.Da.M),z.me(-k.Da.pitch));z.Wf(-k.pan.c);z.me(k.j.c);z.jh(k.M.c);for(f=0;f<=e;f++)for(var y=0;y<=e;y++)u=2*(n+y*r)-1,t=2*(d+f*p)-1,A.x=1*u,A.y=1*t,A.z=-1,A.normalize(),z.gn(A),u=this.Qj(A,
g,k.za()),0!=k.gc&&1>x&&(u=u&&this.Qj(A,v,k.gc),g.x=g.x*x+v.x*(1-x),g.y=g.y*x+v.y*(1-x)),u?-1E10<g.x&&1E10>g.x&&-1E10<g.y&&1E10>g.y?-2<g.x&&2>g.x&&-2<g.y&&2>g.y&&(a+=g.x,c+=g.y,q++):g.x=NaN:g.x=NaN,b.Vc[b.Og++]=g.x,b.Vc[b.Og++]=g.y;0<q?(a/=q,c/=q):l=0;for(d=0;d<b.Og;d+=2)g.x=b.Vc[d],g.y=b.Vc[d+1],k=g.x-a,n=g.y-c,g.x+=k*l,g.y+=n*l,b.Vc[d]=h.width/2+g.x*h.width/2,b.Vc[d+1]=h.height/2-g.y*h.width/2;this.eo(b,e)};h.prototype.Qj=function(b,a,d){var c=!0;switch(d){case 0:case 4:d=1/(b.z*this.Li);a.x=-b.x*
d;a.y=b.y*d;0<b.z&&(c=!1);break;case 9:1==b.z&&(c=!1);d=1/((1-b.z)*this.Vi);a.x=b.x*d;a.y=-b.y*d;break;case 12:if(d=Math.sqrt(b.x*b.x+b.y*b.y),0==d)a.x=0,a.y=0;else{var e=2*this.ci*Math.acos(-b.z)/d;if(2<d)return!1;a.x=e*b.x;a.y=-e*b.y}}return c};h.prototype.eo=function(b,a){for(var d=this.h,c=[],e,f=b.kd=0;f<a;f++)for(var l=0;l<a;l++){c[0]=f+l*(a+1);c[1]=f+1+l*(a+1);c[2]=f+(l+1)*(a+1);c[3]=f+1+(l+1)*(a+1);e=!0;for(var k=0;4>k;k++)isNaN(b.Vc[2*c[0]])&&(e=!1);if(e){for(var g=!1,h=!1,n=!1,m=!1,k=0;4>
k;k++){var p=b.Vc[2*c[k]];p<d.m.width&&(h=!0);0<=p&&(g=!0);p=b.Vc[2*c[k]+1];p<d.m.height&&(n=!0);0<=p&&(m=!0)}if(e=e&&h&&g&&n&&m)b.ee[b.kd++]=c[0],b.ee[b.kd++]=c[3],b.ee[b.kd++]=c[2],b.ee[b.kd++]=c[0],b.ee[b.kd++]=c[1],b.ee[b.kd++]=c[3]}}};h.prototype.Oo=function(){var b=this.h,a=b.g,d=b.g.I;b.be&&(b.Bc(0),b.bd());if(b.H){var c=b.H,e=this.Lk;c.useProgram(e);this.bj(e);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);c.enable(c.DEPTH_TEST);m.T.Hd(this.bb);m.T.perspective(b.Kb(),b.jb.width/b.jb.height,.1,
100,this.bb);c.uniformMatrix4fv(c.getUniformLocation(e,"uPMatrix"),!1,this.bb);this.Fb=0;b.vi();var f=b.$h(),l,k=0;l=d.length-1;for(var g={},h=d[l];h.Pe&&0<l;)l--,h=d[l];for(var n=l,r=n,p=0;6>p;p++)for(var u=0;u<h.ea;u++)for(var t=0;t<h.L;t++){var v=t+u*h.L+p*h.L*h.ea;g[v]=1}for(;l>=f;){var q={},h=d[l],x=null;0<l&&(x=d[l-1]);var A;A=!0;for(var z in g)if(g.hasOwnProperty(z)){var v=Number(z),y=h.W[v],p=Number(Math.floor(v/(h.L*h.ea))),u=Math.floor((v-p*h.L*h.ea)/h.L),t=Math.floor(v-(u*h.L+p*h.L*h.ea)),
C;if(6<=p)console.log("Grrr...");else if(C=this.h.gb.ab[p],C.ya=!1,y||(y=h.W[v]=new m.Gd),this.co(y,h,t,u,Math.max(1,this.jj>>n-l),p,-(0!=b.gc)?.3:.1),y.visible=0<y.kd||h.cache,y.visible&&!y.ib&&(A=!1,this.la<this.yd?y.g||(y.Nd?y.Nd--:(this.Yg(y,h,b.pe(p,l,t,u)),b.ya=!0)):this.Fb++),x&&(y.visible||x.cache)){var y=(t*a.G+1)/h.width,t=Math.min(1,(t+1)*a.G-1/h.width),D=(u*a.G+1)/h.height,u=Math.min(1,(u+1)*a.G-1/h.height),v=a.G/x.width;C=a.G/x.height;var E=D,D=Math.floor(D*x.height/a.G);do{var F=y,H=
Math.floor(y*x.width/a.G);do{var I=H+D*x.L+p*x.L*x.ea;H<x.L&&D<x.ea?q[I]=1:console.log("Grrrr");H++;F+=v}while(F<t);D++;E+=C}while(E<u)}}A&&(r=l,20>b.f.c&&l<this.Ce&&(this.oh=!0));g=q;l--}this.Ni();c.uniform1i(c.getUniformLocation(e,"tileTexture"),0);c.activeTexture(c.TEXTURE0);l=f;for(f=-1;l<=Math.min(r,this.Ce-1);){h=d[l];for(z in h.W)if(h.W.hasOwnProperty(z)){g=Number(z);y=h.W[g];p=Math.floor(g/(h.L*h.ea));u=Math.floor((g-p*h.L*h.ea)/h.L);t=Math.floor(g-(u*h.L+p*h.L*h.ea));f!=p&&(f=p,this.xh(p,
e));if(200<k){this.oh=!1;break}y.ib&&(g=p=a.G,t==h.L-1&&(p=h.width-a.G*t),u==h.ea-1&&(g=h.height-a.G*u),p=(p+2*a.Ka)/a.G,g=(g+2*a.Ka)/a.G,c.bindTexture(c.TEXTURE_2D,y.ib),c.uniform2f(c.getUniformLocation(e,"uCanvasDimensions"),b.m.width,b.m.height),n=c.getUniformLocation(e,"srcScale"),c.uniform2f(n,.5*h.width/a.G/p,.5*h.height/a.G/g),n=c.getUniformLocation(e,"srcOffset"),c.uniform2f(n,(.5*h.width+a.Ka-a.G*t)/a.G/p,-(.5*h.height+a.Ka-a.G*u)/a.G/g+1),n=c.getUniformLocation(e,"zOffset"),c.uniform1f(n,
(l+1)/(d.length+5)),p=c.getAttribLocation(e,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(p),c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.Um),c.vertexAttribPointer(p,
2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(y.Vc),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Tm),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(y.ee),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,y.kd,c.UNSIGNED_SHORT,0),k++)}l++}c.disable(c.CULL_FACE);c.cullFace(c.FRONT_AND_BACK);b.Oc=!1}};h.prototype.xh=function(b,a){var d=this.h,c=d.H;m.T.Hd(this.bb);m.T.Hd(this.da);m.T.rotate(this.da,d.M.c*Math.PI/180,[0,0,1]);m.T.rotate(this.da,d.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.da,
-d.pan.c*Math.PI/180,[0,1,0]);d.Da&&(m.T.rotate(this.da,-d.Da.pitch*Math.PI/180,[1,0,0]),m.T.rotate(this.da,d.Da.M*Math.PI/180,[0,0,1]));4>b?m.T.rotate(this.da,-Math.PI/2*b,[0,1,0]):m.T.rotate(this.da,Math.PI/2*(5==b?1:-1),[1,0,0]);c.uniformMatrix4fv(c.getUniformLocation(a,"matRotate"),!1,this.da)};h.prototype.qn=function(){var b=this.h;if(b.H){var a=b.H,d,c=this.Mk;a.useProgram(c);this.xh(0,c);a.uniform2f(a.getUniformLocation(c,"uCanvasDimensions"),b.m.width,b.m.height);1==b.o.format&&(d=a.getUniformLocation(c,
"srcScale"),a.uniform2f(d,-.5/Math.PI,(b.o.ei?-1:1)/Math.PI));14==b.o.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,1-2*b.o.we/(b.o.width/3),1-2*b.o.we/(b.o.height/2)));d=a.getUniformLocation(c,"srcOffset");a.uniform2f(d,.5,.5);this.bj(c);d=a.getUniformLocation(c,"cubeTexture");a.uniform1i(d,0);d=a.getAttribLocation(c,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.hh);
a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,b.o.ic);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}};h.prototype.bj=function(b){var a=this.h,d=a.H,c=this.h.m,
e=c.width/c.height;switch(a.f.mode){case 1:e=1;break;case 2:e=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&(e=4/3)}c=d.getUniformLocation(b,"rectDstDistance");this.Li=Math.tan(Math.min(a.f.c,179)/2*Math.PI/180)*e;d.uniform1f(c,this.Li);c=d.getUniformLocation(b,"fisheyeDistance");this.ci=180/(a.f.c*Math.PI*e);d.uniform1f(c,this.ci);c=d.getUniformLocation(b,"stereoDistance");this.Vi=Math.tan(Math.min(a.f.c,359)/4*Math.PI/180)*e;d.uniform1f(c,this.Vi);c=d.getUniformLocation(b,
"directionBlend");d.uniform1f(c,a.Tf)};h.prototype.pn=function(){var b=this.h,a=b.H,d=this.Kk;a.useProgram(d);a.enable(a.DEPTH_TEST);this.xh(0,d);a.uniform2f(a.getUniformLocation(d,"uCanvasDimensions"),b.m.width,b.m.height);b=a.getUniformLocation(d,"srcScale");a.uniform2f(b,1,1);b=a.getUniformLocation(d,"srcOffset");a.uniform2f(b,0,0);b=a.getUniformLocation(d,"zOffset");a.uniform1f(b,.9999);this.bj(d);this.xh(0,d);b=a.getUniformLocation(d,"cubeTexture");a.uniform1i(b,0);d=a.getAttribLocation(d,"aVertexPosition");
a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.hh);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_CUBE_MAP,this.sc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)};h.prototype.em=function(){for(var b=this.h,a=b.H,d=[1,3,5,4,0,2],c=!0,e=!0,f=!1,l=0;6>l;l++)this.Ua[l].ge.complete?this.Bg[l]||(f=!0):c=!1,this.Ua[l].Oe.complete||(e=!1);if(e||c)if(!e||c||!this.sc||f){l=Math.round(b.jc/b.Ye);e=(b.jc-l)/2;b.O("paint cube single - isMain: "+c+" overlap: "+e);this.Ce=0;this.sc||(this.sc=a.createTexture());b.Uc++;a.bindTexture(a.TEXTURE_CUBE_MAP,
this.sc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);f=document.createElement("canvas");f.width=l;f.height=l;for(var k=f.getContext("2d"),l=0;6>l;l++){var g=d[l];this.Ua[g].ge.complete?this.Bg[g]||(k.drawImage(this.Ua[g].ge,-e,-e),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f),this.Bg[g]=!0):(k.drawImage(this.Ua[g].Oe,-e,-e,b.jc,b.jc),
a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f))}this.Hf=!c}};h.prototype.dm=function(){var b=this.h,a=this.h.g,d=b.g.I,c=b.H,e,f;e=d.length-1;if(!(0>e)){d[e].Pe&&e--;var l=512;b.Ug&&(l=256);!b.Te&&2<=b.devicePixelRatio&&(l=512);for((f=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE))&&f<l&&(l=f);0<e&&d[e-1].width<=l;)e--;var k,l=d[e];if(0!=l.L&&(f=e,k=this.am(e),this.Hf&&k&&(this.Hf=!1),k||(e=d.length-1,l=d[e],k||(l.Pe?(k=l.loaded,this.ti(e-1)&&(--e,k=!0)):k=this.ti(e)),
this.Hf=!0),this.ti(f),k&&this.Ce>e)){l=d[e];b.O("paint cube level "+e);this.Ce=e;d=b.g.Ka;e=0<d||1<l.L||1<l.ea;var g;if(e){var h=document.createElement("canvas");h.width=l.width;h.height=l.height;2048>l.width&&(1500<l.width?(h.width=2048,h.height=2048):700<l.width?(h.width=1024,h.height=1024):(h.width=512,h.height=512));g=h.getContext("2d")}this.sc=c.createTexture();b.Uc++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.sc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);f=[1,3,5,4,0,2];k=h.width/l.width;for(var a=a.G,n=0;6>n;n++){for(var m=0;m<l.ea;m++)for(var p=0;p<l.L;p++){var u=p+m*l.L+f[n]*l.L*l.ea,t=l.W[u],v=t.g;t.K&&(v=t.K);v?e?g.drawImage(v,k*(p*a-d),k*(m*a-d),k*v.width,k*v.height):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,v):(b.O("WTF?!"),b.O(u),b.O(t))}e&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h)}}}};h.prototype.ti=
function(b){var a=this.h,d=a.g.I[b];if(0==d.L)return!1;var c=!0;d.cache=!0;for(var e=0;6>e;e++)for(var f=0;f<d.ea;f++)for(var l=0;l<d.L;l++){var k=l+f*d.L+e*d.L*d.ea,g=d.W[k];g||(g=d.W[k]=new m.Gd);this.la<this.yd?g.g||(g.Nd?g.Nd--:(this.Yg(g,d,a.pe(e,b,l,f)),a.ya=!0)):this.Fb++;g.ib||(c=!1,a.ya=!0)}c&&(d.loaded=!0);return c};h.prototype.am=function(b){b=this.h.g.I[b];if(0==b.L)return!1;for(var a=0;6>a;a++)for(var d=0;d<b.ea;d++)for(var c=0;c<b.L;c++){var e=b.W[c+d*b.L+a*b.L*b.ea];if(!e||!e.ib)return!1}return b.loaded=
!0};h.prototype.ready=function(){return null!=this.sc};h.prototype.Ni=function(){for(var b=this.h,a=b.g.I,d=b.H,c=0;c<a.length;c++){var e=a[c];if(!e.cache)for(var f in e.W)if(e.W.hasOwnProperty(f)){var l=e.W[f];l.visible||(l.ib&&(d.deleteTexture(l.ib),b.Uc--),l.g=null,l.Bf&&d.deleteBuffer(l.Bf),delete e.W[f])}}};h.prototype.Ho=function(){var b=this.h;if(b.H){var a=this.h.H;a.disable(a.DEPTH_TEST);var d;for(d=0;d<b.J.length;d++){var c=b.J[d];if(!c.Yc){m.T.Hd(this.da);m.T.rotate(this.da,-b.M.c*Math.PI/
180,[0,0,1]);m.T.rotate(this.da,-b.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.da,(180-b.pan.c)*Math.PI/180,[0,1,0]);m.T.rotate(this.da,c.pan*Math.PI/180,[0,1,0]);m.T.rotate(this.da,-c.j*Math.PI/180,[1,0,0]);m.T.translate(this.da,[0,0,1]);m.T.rotate(this.da,c.mb*Math.PI/180,[0,0,1]);m.T.rotate(this.da,-c.Ea*Math.PI/180,[0,1,0]);m.T.rotate(this.da,c.wa*Math.PI/180,[1,0,0]);var e=Math.tan(c.f/2*Math.PI/180),f=c.Sd;f||(f=16/9);m.T.scale(this.da,[e,e/f,1]);m.T.translate(this.da,[0,0,-1]);a.bindBuffer(a.ARRAY_BUFFER,
this.Sh);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Xd);a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,c.ic);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.uniform1i(this.F.Ue,
0);a.uniformMatrix4fv(this.F.Sf,!1,this.da);a.uniformMatrix4fv(this.F.Ld,!1,this.bb);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}}a.enable(a.DEPTH_TEST)}};h.prototype.Go=function(){var b=this.h,a;if(b.m.width!=b.B.offsetWidth||b.m.height!=b.B.offsetHeight)b.m.width=b.B.offsetWidth,b.m.height=b.B.offsetHeight;b.be&&(b.Bc(0),b.bd());if(b.H){var d=b.H;d.useProgram(this.F);m.T.Hd(this.bb);m.T.perspective(b.Kb(),b.jb.width/b.jb.height,.1,100,this.bb);d.uniformMatrix4fv(this.F.Ld,!1,this.bb);this.dg(0);
d.uniform1i(this.F.Ue,0);d.uniformMatrix4fv(this.F.Ld,!1,this.bb);d.uniformMatrix4fv(this.F.Sf,!1,this.da);d.enableVertexAttribArray(this.F.Z);d.enableVertexAttribArray(this.F.xa);d.bindBuffer(d.ARRAY_BUFFER,this.Xd);d.vertexAttribPointer(this.F.xa,2,d.FLOAT,!1,0,0);d.activeTexture(d.TEXTURE0);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Mc);d.uniform1f(this.F.Dh,1E-4);d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0);d.bindTexture(d.TEXTURE_2D,b.o.ic);for(a=0;1>a;a++)this.dg(0),d.bindBuffer(d.ARRAY_BUFFER,
b.o.gj),d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b.o.qh),d.vertexAttribPointer(this.F.xa,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.o.ni),d.uniform1i(this.F.Ue,0),d.uniformMatrix4fv(this.F.Sf,!1,this.da),d.uniformMatrix4fv(this.F.Ld,!1,this.bb),d.drawElements(d.TRIANGLES,36,d.UNSIGNED_SHORT,0)}};h.prototype.Fo=function(){var b=this.h,a=b.H,d=b.o;if(0<b.J.length)for(var c=0;c<b.J.length;c++){var e=b.J[c];if(!e.Yc&&e.ik&&e.Ng!=
e.a.currentTime&&(e.Ng=e.a.currentTime,!e.Sd&&0<e.a.videoHeight&&(e.Sd=e.a.videoWidth/e.a.videoHeight),b.og))try{e.ic&&(a.bindTexture(a.TEXTURE_2D,e.ic),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e.a),b.update())}catch(l){b.O(l)}}if(d.a&&(c=Number(d.a.currentTime),d.Ng!=c)){d.Ng=c;try{var f=0<d.a.readyState;b.Gf&&d.Wc&&(f=f&&0<d.a.currentTime);d.ic&&d.Tg&&f&&(d.Wc=!0,d.width=d.a.videoWidth,d.height=d.a.videoHeight,a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.o.ei),a.bindTexture(a.TEXTURE_2D,
d.ic),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,d.a),d.fl=!0,b.update())}catch(l){b.O(l)}}};h.prototype.Ck=function(){var b,a,d=this.h,c=this.h.H;d.ta.style.visibility="hidden";d.w.Kf!=d.w.mode&&(d.w.Kf=d.w.mode);if((0<=d.w.mode||0<d.w.eb.length)&&!d.C.jg){var e=1;0>=d.w.mode&&(e=0);3==d.w.mode&&(e=d.w.oa);for(b=0;b<d.P.length;b++){var f=d.P[b];if("poly"==f.type){var l=f.Md,k=e;2==d.w.mode&&(k=f.oa);var g=d.w.eb.indexOf(f.id);-1!=g&&(k=d.w.Eb[g]);if(0<l.length){g=[];for(a=0;a<l.length;a++)g.push(l[a].hc),
g.push(l[a].Cb),g.push(0);c.useProgram(this.rd);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.disable(c.DEPTH_TEST);l=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,l);c.bufferData(c.ARRAY_BUFFER,new Float32Array(g),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.rd,"uCanvasDimensions"),d.m.width,d.m.height);l=c.getUniformLocation(this.rd,"uColor");a=f.Tb;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);var h=c.getUniformLocation(this.rd,
"uAlpha");c.uniform1f(h,f.Sb*k);c.vertexAttribPointer(this.rd.Z,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,g.length/3);a=f.Qb;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);c.uniform1f(h,f.Pb*k);c.enable(c.STENCIL_TEST);c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,1,1);c.stencilOp(c.INCR,c.INCR,c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,g.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,
0,g.length/3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.F)}}}}};h.prototype.aj=function(){var b=this.h,a=b.g;if(b.m.width!=b.B.offsetWidth||b.m.height!=b.B.offsetHeight)b.m.width=b.B.offsetWidth,b.m.height=b.B.offsetHeight;b.be&&(b.Bc(0),b.bd());if(b.H){var d=b.H;this.wh();d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.useProgram(this.rf);var c=d.getUniformLocation(this.rf,"uRect");d.uniform2f(d.getUniformLocation(this.rf,
"uCanvasDimensions"),b.m.width,b.m.height);d.activeTexture(d.TEXTURE0);var e;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Mc);e=d.getAttribLocation(this.rf,"aVertexPosition");d.disableVertexAttribArray(0);d.disableVertexAttribArray(1);d.disableVertexAttribArray(2);d.enableVertexAttribArray(e);d.bindBuffer(d.ARRAY_BUFFER,this.Xd);d.vertexAttribPointer(e,2,d.FLOAT,!1,0,0);b.Fb=0;var f,l;l=100/b.f.c;f=a.width/a.height;e=b.m.height*l*f;l*=b.m.height;f=(b.pan.c/100/f-.5)*e+b.m.width/2;for(var k=(b.j.c/100-
.5)*l+b.m.height/2,g,h,n,r=0;a.I.length>=r+2&&a.I[r+1].width>e;)r++;var p,u;u=[];for(p=a.I.length-1;p>=r;){var t=a.I[p],v;t.cache?(v={Wa:0,rb:0},v.sb=t.L-1,v.tb=t.ea-1):(v={},g=-k/l*(t.height/b.g.G),h=(-f+b.m.width)/e*(t.width/b.g.G),n=(-k+b.m.height)/l*(t.height/b.g.G),v.Wa=Math.min(Math.max(0,Math.floor(-f/e*(t.width/b.g.G))),t.L-1),v.rb=Math.min(Math.max(0,Math.floor(g)),t.ea-1),v.sb=Math.min(Math.max(0,Math.floor(h)),t.L-1),v.tb=Math.min(Math.max(0,Math.floor(n)),t.ea-1));u[p]=v;var q=!0;for(h=
v.rb;h<=v.tb;h++)for(g=v.Wa;g<=v.sb;g++){n=g+h*t.L;var x=t.W[n];x||(x=new m.Gd,t.W[n]=x);this.la<this.yd?x.g||(this.Yg(x,t,b.pe(0,p,g,h)),b.ya=!0):this.Fb++;x.g&&x.g.complete||(q=!1);x.visible=!0}v.si=q;p--}for(p=a.I.length-1;p>=r;){t=a.I[p];if(u[p]&&0<=u[p].Wa)for(v=u[p],h=v.rb;h<=v.tb;h++)for(g=v.Wa;g<=v.sb;g++)n=g+h*t.L,(x=t.W[n])&&x.g&&x.g.complete&&(d.uniform4f(c,f+(-a.Ka+a.G*g)*e/t.width,k+(-a.Ka+a.G*h)*l/t.height,x.g.width*e/t.width,x.g.height*l/t.height),x&&x.ib&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
this.Mc),d.bindTexture(d.TEXTURE_2D,x.ib),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)));p--}this.Ni()}};h.prototype.ih=function(){var b=this.h.H;if(b&&this.Ua)for(;0<this.Ua.length;){var a=this.Ua.pop();a.kn=!0;b.deleteTexture(a)}this.sc&&(b.deleteTexture(this.sc),
this.sc=null);this.Ce=1E6;this.Bg=[!1,!1,!1,!1,!1,!1]};return h}();m.Jl=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){return function(){this.Me={sf:1,tf:1,Of:0,Pf:0,cf:0,qg:0,scale:1};this.rc=!0;this.ye=[]}}(),h=function(){function b(){var a;this.ab=Array(6);for(a=0;6>a;a++)this.ab[a]=new g}b.prototype.bm=function(a,d,c,b){for(var f=0;6>f;f++){var l;if(l=this.ab[f]){var k;k=[];k.push(new m.sa(-1,-1,-1,0,0));k.push(new m.sa(1,-1,-1,1,0));k.push(new m.sa(1,1,-1,1,1));k.push(new m.sa(-1,1,-1,0,1));for(var g=0;g<k.length;g++)4>f?k[g].Ea(-Math.PI/2*f):k[g].wa(Math.PI/2*(4===f?-1:1)),b&&(k[g].mb(b.M*
Math.PI/180),k[g].wa(-b.pitch*Math.PI/180)),k[g].Ea(-a*Math.PI/180),k[g].wa(d*Math.PI/180),k[g].mb(c*Math.PI/180);l.rc=0<k.length}}};return b}();m.Fl=h})(ggP2VR||(ggP2VR={}));
(function(m){m.El=function(){return function(){this.I=[];this.Qe="0x000000";this.Gk=!1;this.sk=this.rk=.4;this.G=512;this.Ka=1;this.ri=0;this.tk="";this.Ok=this.height=this.width=0}}();m.Bk=function(){return function(){this.height=this.width=0;this.Pe=this.cache=!1;this.ea=this.L=0;this.loaded=!1;this.W=[]}}();m.Gd=function(){return function(){this.loaded=this.visible=!1;this.Nd=this.Mi=0;this.Vc=[];this.Og=0;this.ee=[];this.kd=0}}()})(ggP2VR||(ggP2VR={}));
(function(m){m.zl=function(){return function(g,h){this.h=g;this.Aa=h;var b,a,d=this.__div=document.createElement("div");b=document.createElement("img");b.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+g.Ja+"user-select: none;");b.ondragstart=function(){return!1};d.appendChild(b);b="position:absolute;"+(g.Ja+"user-select: none;");b+=g.Ja+"touch-callout: none;";b+=g.Ja+"tap-highlight-color: rgba(0,0,0,0);";g.Jd&&!g.$&&(b+=g.Ja+"transform: translateZ(9999999px);");d.setAttribute("style",b);d.onclick=function(){g.Ve(h);g.Di(h.url,h.target)};var c=g.w.Zi;c.enabled&&(a=document.createElement("div"),b="position:absolute;top:\t 20px;",
b=c.Ch?b+"white-space: pre-wrap;":b+"white-space: nowrap;",b+=g.Ja+"transform-origin: 50% 50%;",a.setAttribute("style",b+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;"),a.style.color=this.h.fa(c.$i,c.Yi),c.background?a.style.backgroundColor=this.h.fa(c.Qb,c.Pb):a.style.backgroundColor="transparent",a.style.border="solid "+this.h.fa(c.Tb,c.Sb)+" "+c.Kh+"px",a.style.borderRadius=c.Jh+"px",a.style.textAlign="center",0<c.width?(a.style.left=-c.width/2+"px",a.style.width=
c.width+"px"):a.style.width="auto",a.style.height=0<c.height?c.height+"px":"auto",a.style.overflow="hidden",a.innerHTML=h.title,d.onmouseover=function(){0==c.width&&(a.style.left=-a.offsetWidth/2+"px");a.style.visibility="inherit"},d.onmouseout=function(){a.style.visibility="hidden"},d.appendChild(a))}}()})(ggP2VR||(ggP2VR={}));
(function(m){m.yc=function(){return function(){this.Wd=this.Vd=this.Ic=this.Ud=this.ub=this.type=this.nb=this.value=this.time=0}}();m.uk=function(){return function(){this.zo=this.Ml=this.length=0}}();m.jk=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function g(b){this.h=b;this.enabled=!1;this.vg=1;this.xe=0;this.type="crossdissolve";this.Ob=this.Na=this.uc=0;this.df=5;this.Rd=1;this.ef=!1;this.oe=this.ne=this.Ui=0;this.xd=70;this.yl=0;this.ob=this.xl=1;this.tg=this.sg=.5;this.Td=this.ij=this.yi=this.oi=!1;this.Vh=1}g.prototype.Ff=function(){var b=this.h.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.na=b.createProgram();b.attachShader(this.na,a);b.attachShader(this.na,d);b.linkProgram(this.na);b.getProgramParameter(this.na,b.LINK_STATUS)||alert("Could not initialise shaders");this.na.Z=b.getAttribLocation(this.na,"aVertexPosition");b.enableVertexAttribArray(this.na.Z);this.na.xa=b.getAttribLocation(this.na,"aTextureCoord");b.enableVertexAttribArray(this.na.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ra=b.createProgram();b.attachShader(this.Ra,a);b.attachShader(this.Ra,d);b.linkProgram(this.Ra);b.getProgramParameter(this.Ra,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ra.Z=b.getAttribLocation(this.Ra,"aVertexPosition");b.enableVertexAttribArray(this.Ra.Z);this.Ra.xa=b.getAttribLocation(this.Ra,"aTextureCoord");b.enableVertexAttribArray(this.Ra.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ga=b.createProgram();b.attachShader(this.Ga,a);b.attachShader(this.Ga,d);b.linkProgram(this.Ga);b.getProgramParameter(this.Ga,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ga.Z=b.getAttribLocation(this.Ga,"aVertexPosition");b.enableVertexAttribArray(this.Ga.Z);this.Ga.xa=b.getAttribLocation(this.Ga,"aTextureCoord");b.enableVertexAttribArray(this.Ga.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ma=b.createProgram();b.attachShader(this.Ma,a);b.attachShader(this.Ma,d);b.linkProgram(this.Ma);b.getProgramParameter(this.Ma,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ma.Z=b.getAttribLocation(this.Ma,"aVertexPosition");b.enableVertexAttribArray(this.Ma.Z);this.Ma.xa=b.getAttribLocation(this.Ma,"aTextureCoord");b.enableVertexAttribArray(this.Ma.xa)};g.prototype.Bc=function(){var b=
this.h.H;if(!b)return!1;if(this.Nb=b.createFramebuffer()){b.bindFramebuffer(b.FRAMEBUFFER,this.Nb);this.Nb.width=1024;this.Nb.height=1024;this.se=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.se);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.Nb.width,this.Nb.height,0,b.RGBA,b.UNSIGNED_BYTE,null);var a=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,a);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,this.Nb.width,this.Nb.height);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.se,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,a);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);this.cb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.cb);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),b.STATIC_DRAW);this.cb.Dc=3;this.cb.Kd=4;this.Re=
b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Re);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),b.STATIC_DRAW);return!0}return!1};g.prototype.Dk=function(b){var a=this.h.H,d=this.h.jb;if(this.zd){a.useProgram(this.na);a.bindBuffer(a.ARRAY_BUFFER,this.cb);a.vertexAttribPointer(this.na.Z,this.cb.Dc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Re);a.vertexAttribPointer(this.na.xa,2,a.FLOAT,!1,0,0);a.enableVertexAttribArray(this.na.Z);a.enableVertexAttribArray(this.na.xa);a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,this.se);var d=1+(this.ob-1)*b,c=a.getUniformLocation(this.na,"uAlpha");a.uniform1f(c,1);c=a.getUniformLocation(this.na,"uZoomIn");a.uniform1i(c,1);var c=a.getUniformLocation(this.na,"uZoomCenter"),e=.5+(this.sg-.5)*Math.sqrt(b),f=.5+(this.tg-.5)*Math.sqrt(b);0>e-.5/d&&(e=.5/d);0>f-.5/d&&(f=.5/d);1<e+.5/d&&(e=1-.5/d);1<f+.5/d&&(f=1-.5/d);a.uniform2f(c,e,f);e=a.getUniformLocation(this.na,"uZoomFactor");a.uniform1f(e,d);a.uniform1i(a.getUniformLocation(this.na,"uSampler"),
0);a.drawArrays(a.TRIANGLE_STRIP,0,this.cb.Kd);a.useProgram(this.h.ma.F)}else{this.h.mg();a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.SRC_ALPHA,a.ONE);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);e=.5+(this.sg-.5);f=.5+(this.tg-.5);0>e-.5/this.ob&&(e=.5/this.ob);0>f-.5/this.ob&&(f=.5/this.ob);1<e+.5/this.ob&&(e=1-.5/this.ob);1<f+.5/this.ob&&(f=1-.5/this.ob);if("crossdissolve"==this.type)a.useProgram(this.na),a.bindBuffer(a.ARRAY_BUFFER,this.cb),a.vertexAttribPointer(this.na.Z,this.cb.Dc,
a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Re),a.vertexAttribPointer(this.na.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.se),c=a.getUniformLocation(this.na,"uAlpha"),a.uniform1f(c,1-b),c=a.getUniformLocation(this.na,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.na,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.na,"uZoomFactor"),a.uniform1f(e,this.ob),a.uniform1i(a.getUniformLocation(this.na,"uSampler"),0);
else if("diptocolor"==this.type)a.useProgram(this.Ra),a.bindBuffer(a.ARRAY_BUFFER,this.cb),a.vertexAttribPointer(this.Ra.Z,this.cb.Dc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Re),a.vertexAttribPointer(this.Ra.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.se),a.uniform1f(a.getUniformLocation(this.Ra,"uColorPercent"),Math.min(2*b,1)),c=a.getUniformLocation(this.Ra,"uAlpha"),a.uniform1f(c,1-Math.max(2*(b-.5),0)),a.uniform3f(a.getUniformLocation(this.Ra,"uDipColor"),
(this.xe>>16&255)/255,(this.xe>>8&255)/255,(this.xe&255)/255),c=a.getUniformLocation(this.Ra,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.Ra,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.Ra,"uZoomFactor"),a.uniform1f(e,this.ob),a.uniform1i(a.getUniformLocation(this.Ra,"uSampler"),0);else if("irisround"==this.type||"irisrectangular"==this.type){a.useProgram(this.Ga);a.bindBuffer(a.ARRAY_BUFFER,this.cb);a.vertexAttribPointer(this.Ga.Z,this.cb.Dc,a.FLOAT,
!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Re);a.vertexAttribPointer(this.Ga.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.se);var l;1==this.Na||2==this.Na?l=c=.5:(c=this.sg,l=this.tg);var k=c*d.width,g=l*d.height,k=Math.max(k,d.width-k),g=Math.max(g,d.height-g);"irisround"==this.type?a.uniform1f(a.getUniformLocation(this.Ga,"uRadius"),(Math.sqrt(k*k+g*g)+this.uc)*b):(k>g?(g=d.height/d.width*k+this.uc,k+=this.uc):(k=d.width/d.height*g+this.uc,g+=this.uc),a.uniform2f(a.getUniformLocation(this.Ga,
"uRectDim"),k*b,g*b));b=a.getUniformLocation(this.Ga,"uSoftEdge");a.uniform1f(b,this.uc);a.uniform1i(a.getUniformLocation(this.Ga,"uRound"),"irisround"==this.type?1:0);a.uniform2f(a.getUniformLocation(this.Ga,"uIrisCenter"),c*d.width,l*d.height);c=a.getUniformLocation(this.Ga,"uZoomIn");a.uniform1i(c,1==this.Na||2==this.Na?1:0);c=a.getUniformLocation(this.Ga,"uZoomCenter");a.uniform2f(c,e,f);e=a.getUniformLocation(this.Ga,"uZoomFactor");a.uniform1f(e,this.ob);a.uniform1i(a.getUniformLocation(this.Ga,
"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)a.useProgram(this.Ma),a.bindBuffer(a.ARRAY_BUFFER,this.cb),a.vertexAttribPointer(this.Ma.Z,this.cb.Dc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Re),a.vertexAttribPointer(this.Ma.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.se),a.uniform1f(a.getUniformLocation(this.Ma,"uPercent"),3>this.Vh?b*(d.width+
this.uc):b*(d.height+this.uc)),b=a.getUniformLocation(this.Ma,"uSoftEdge"),a.uniform1f(b,this.uc),a.uniform1i(a.getUniformLocation(this.Ma,"uDirection"),this.Vh),a.uniform2f(a.getUniformLocation(this.Ma,"uCanvasDimensions"),d.width,d.height),c=a.getUniformLocation(this.Ma,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.Ma,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.Ma,"uZoomFactor"),a.uniform1f(e,this.ob),a.uniform1i(a.getUniformLocation(this.Ma,
"uSampler"),0);a.drawArrays(a.TRIANGLE_STRIP,0,this.cb.Kd);a.useProgram(this.h.ma.F);a.disable(a.BLEND);a.enable(a.DEPTH_TEST)}};return g}();m.Cl=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function g(b){this.kg=[];this.h=b;this.enabled=!1;this.nb=2;this.vj=!1}g.prototype.Zh=function(b){if(2==b.mode||3==b.mode||5==b.mode){var a=this.h.Ha.currentTime,d=b.qc.gain.value,c=b.oc.gain.value,e=b.pc.gain.value;b.nc.gain.linearRampToValueAtTime(b.nc.gain.value,a);b.nc.gain.linearRampToValueAtTime(0,a+this.nb);b.qc.gain.linearRampToValueAtTime(d,a);b.qc.gain.linearRampToValueAtTime(0,a+this.nb);b.oc.gain.linearRampToValueAtTime(c,a);b.oc.gain.linearRampToValueAtTime(0,
a+this.nb);b.pc.gain.linearRampToValueAtTime(e,a);b.pc.gain.linearRampToValueAtTime(0,a+this.nb)}else a=this.h.Ha.currentTime,b.Rc.gain.linearRampToValueAtTime(b.Rc.gain.value,a),b.Rc.gain.linearRampToValueAtTime(0,a+this.nb);b.Ig=!0;setTimeout(function(){b.td()},1E3*this.nb+5)};g.prototype.oo=function(){for(var b=0;b<this.h.S.length;b++){var a=this.h.S[b];this.h.Cc(a.id)||4==a.mode||6==a.mode||(a.ia?a.Kc():(a.a.play(),a.a.currentTime=0))}};g.prototype.im=function(){for(var b=(this.h.Ha.currentTime-
this.lo)/this.nb,b=Math.min(1,b),a=0;a<this.h.S.length;a++){var d=this.h.S[a];this.h.Cc(d.id)&&1>d.ka&&(d.ka=b)}1==b&&clearInterval(this.ko)};return g}();m.Dl=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function g(b){this.Mf=[];this.Lc=null;this.Lb=[];this.Ib=[];this.Mb=[];this.Si=!0;this.h=b;this.cm()}g.prototype.Ff=function(){var b=this.h.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Rb=b.createProgram();b.attachShader(this.Rb,a);b.attachShader(this.Rb,d);b.linkProgram(this.Rb);b.getProgramParameter(this.Rb,b.LINK_STATUS)||alert("Could not initialise shaders");this.Rb.Z=b.getAttribLocation(this.Rb,"aVertexPosition");b.enableVertexAttribArray(this.Rb.Z);d=b.createShader(b.VERTEX_SHADER);a=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),d=null);var c=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
b.compileShader(c);b.getShaderParameter(c,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(c)),c=null);this.pa=b.createProgram();b.attachShader(this.pa,d);b.attachShader(this.pa,c);b.linkProgram(this.pa);b.getProgramParameter(this.pa,b.LINK_STATUS)||alert("Could not initialise shaders");this.pa.Z=b.getAttribLocation(this.pa,"aVertexPosition");b.enableVertexAttribArray(this.pa.Z);d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.lb=b.createProgram();b.attachShader(this.lb,a);b.attachShader(this.lb,d);b.linkProgram(this.lb);b.getProgramParameter(this.lb,b.LINK_STATUS)||alert("Could not initialise shaders");this.lb.Z=b.getAttribLocation(this.lb,"aVertexPosition")};g.prototype.Bc=function(){var b=this.h.H;this.hd=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.hd);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),b.STATIC_DRAW);this.hd.Dc=3;this.hd.Kd=4;this.Ge=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Ge);for(var a=[0,0,0],d=2*Math.PI/6,c=Math.PI/180*35,e=1,f=c;f<=c+2*Math.PI;f+=d)a.push(Math.sin(f)),a.push(-Math.cos(f)),a.push(0),e++;b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.Ge.Dc=3;this.Ge.Kd=e;this.Pk=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.Pk);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);a=document.createElement("canvas");a.width=100;a.height=1;d=a.getContext("2d");d.width=100;d.height=1;c=d.createLinearGradient(0,0,100,0);c.addColorStop(0,this.h.fa(16777215,0));c.addColorStop(.88,this.h.fa(0,0));c.addColorStop(.9,this.h.fa(16654848,1));c.addColorStop(.92,this.h.fa(16776448,1));c.addColorStop(.94,this.h.fa(4849466,1));c.addColorStop(.96,this.h.fa(131071,
1));c.addColorStop(.98,this.h.fa(8190,1));c.addColorStop(1,this.h.fa(0,0));d.fillStyle=c;d.fillRect(0,0,100,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a)};g.prototype.Cn=function(){for(;0<this.Mf.length;)this.Mf.pop()};g.prototype.cm=function(){var b=[],a=[],d=[],c={l:14,alpha:.2,color:11390415,i:.27};b.push(c);c={l:20,alpha:.25,color:11390415,i:.4};b.push(c);c={l:10,alpha:.2,color:12442332,i:.6};b.push(c);c={l:15,alpha:.2,color:11390415,i:.8};b.push(c);c={l:10,alpha:.2,color:12442332,
i:1.5};b.push(c);c={l:15,alpha:.2,color:11390415,i:1.8};b.push(c);c={l:8,alpha:.2,color:12575203,u:.8,i:.7};a.push(c);c={l:7,alpha:.4,color:12575203,u:.5,i:1.6};a.push(c);c={l:5,alpha:.4,color:12575203,u:.6,i:.9};a.push(c);c={l:8,alpha:.3,color:12575203,u:.4,i:1.1};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:30,alpha:.3,color:11390415,i:.5};b.push(c);c={l:10,alpha:.3,color:11390415,i:1};b.push(c);c={l:20,alpha:.3,color:11390415,i:1.3};b.push(c);c={l:10,alpha:.3,color:11390415,
i:1.5};b.push(c);c={l:15,alpha:.3,color:11390415,i:1.8};b.push(c);c={l:10,alpha:.3,color:15506856,u:.8,i:.7};a.push(c);c={l:20,alpha:.5,color:15506856,u:.5,i:1.6};a.push(c);c={l:5,alpha:.5,color:15506856,u:.6,i:.9};a.push(c);c={l:60,alpha:.4,color:15506856,u:.2,i:1.1};a.push(c);d.push({l:220,alpha:.035,i:2});this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:30,alpha:.5,color:15465727,i:.5};b.push(c);c={l:40,alpha:.28,color:15726842,i:.8};b.push(c);c={l:25,alpha:.32,color:15726842,
i:1.1};b.push(c);c={l:15,alpha:.25,color:15726842,i:1.35};b.push(c);c={l:10,alpha:.28,color:15465727,i:1.65};b.push(c);c={l:10,alpha:.45,color:15465727,u:.8,i:.7};a.push(c);c={l:7,alpha:.5,color:15465727,u:.4,i:.9};a.push(c);c={l:40,alpha:.4,color:15465727,u:.3,i:.38};a.push(c);c={l:50,alpha:.4,color:15465727,u:.5,i:1.25};a.push(c);c={l:18,alpha:.2,color:15465727,u:.5,i:1.25};a.push(c);c={l:10,alpha:.34,color:15726842,u:.8,i:1.5};a.push(c);c={l:38,alpha:.37,color:15465727,u:.3,i:-.5};a.push(c);this.Lb.push(b);
this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.5,color:16363159,i:.1};b.push(c);c={l:26,alpha:.3,color:16091819,i:.32};b.push(c);c={l:29,alpha:.2,color:16091819,i:1.32};b.push(c);c={l:20,alpha:.18,color:16363159,i:1.53};b.push(c);c={l:27,alpha:.13,color:16425092,i:1.6};b.push(c);c={l:20,alpha:.1,color:16091819,i:1.75};b.push(c);c={l:12,alpha:.45,color:16312238,u:.45,i:.2};a.push(c);c={l:8,alpha:.25,color:16434209,u:.7,i:.33};a.push(c);c={l:9,alpha:.25,color:16091819,u:.4,i:.7};a.push(c);
c={l:7,alpha:.2,color:16091819,u:.4,i:.85};a.push(c);c={l:60,alpha:.23,color:16091819,u:.55,i:1.05};a.push(c);c={l:37,alpha:.1,color:16091819,u:.55,i:1.22};a.push(c);c={l:10,alpha:.25,color:16363159,u:.65,i:1.38};a.push(c);c={l:7,alpha:.2,color:16434209,u:.5,i:1.45};a.push(c);c={l:3,alpha:.2,color:16416033,u:.5,i:1.78};a.push(c);c={l:6,alpha:.18,color:16434209,u:.45,i:1.9};a.push(c);c={l:4,alpha:.14,color:16766514,u:.45,i:2.04};a.push(c);c={l:30,alpha:.14,color:16766514,u:.8,i:.04};a.push(c);this.Lb.push(b);
this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:9,alpha:.3,color:14346999,u:.3,i:.3};a.push(c);c={l:5,alpha:.5,color:14148072,u:.8,i:.6};a.push(c);c={l:3,alpha:.37,color:14346999,u:.66,i:.8};a.push(c);c={l:45,alpha:.2,color:14346999,u:.36,i:1.2};a.push(c);c={l:13,alpha:.2,color:14346999,u:.36,i:1.23};a.push(c);c={l:11,alpha:.2,color:14148072,u:.36,i:1.28};a.push(c);c={l:27,alpha:.16,color:14346999,u:.36,i:1.55};a.push(c);c={l:6,alpha:.36,color:14148072,u:.8,i:1.7};a.push(c);this.Lb.push(b);this.Ib.push(a);
this.Mb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};b.push(c);c={l:7,alpha:.26,color:15186464,i:.35};b.push(c);c={l:23,alpha:.18,color:15186464,i:.65};b.push(c);c={l:13,alpha:.2,color:15186464,i:.8};b.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,u:.45,i:.22};a.push(c);c={l:3,alpha:.3,color:15451904,u:.25,i:.4};a.push(c);c={l:4,alpha:.2,color:15451904,u:.25,i:.45};a.push(c);c={l:65,alpha:.17,
color:15186464,u:.25,i:.5};a.push(c);c={l:5,alpha:.45,color:15579138,u:.45,i:.88};a.push(c);c={l:140,alpha:.18,color:15579138,u:.32,i:.95};a.push(c);c={l:12,alpha:.22,color:15579138,u:.32,i:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,u:.72,i:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,u:.45,i:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,u:.25,i:1.42};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};b.push(c);c={l:14,alpha:.3,color:11007484,
i:.36};b.push(c);c={l:10,alpha:.3,color:4037331,i:.58};b.push(c);c={l:14,alpha:.22,color:8835068,i:.68};b.push(c);c={l:10,alpha:.27,color:11007484,i:.82};b.push(c);c={l:11,alpha:.27,color:10867450,i:1};b.push(c);c={l:9,alpha:.2,color:6158332,i:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,u:.45,i:.175};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:.46};a.push(c);c={l:3,alpha:.3,color:10867450,u:.35,
i:.5};a.push(c);c={l:60,alpha:.37,color:4031699,u:.75,i:.75};a.push(c);c={l:3,alpha:.25,color:4031699,u:.25,i:.75};a.push(c);c={l:3,alpha:.2,color:6158332,u:.25,i:.9};a.push(c);c={l:7,alpha:.45,color:8835068,u:.45,i:1.3};a.push(c);c={l:32,alpha:.22,color:8835068,u:.75,i:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,u:.65,i:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,u:.65,i:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:-.18};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=
[];a=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};b.push(c);c={l:26,alpha:.22,color:16389120,i:.4};b.push(c);c={l:26,alpha:.25,color:16389120,i:.65};b.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,i:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,u:.22,i:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,u:.3,i:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,
u:.3,i:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,u:.3,i:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,u:.3,i:1.8};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};b.push(c);c={l:14,alpha:.3,color:11007484,i:.36};b.push(c);c={l:10,alpha:.3,color:4037331,i:.58};b.push(c);c={l:14,alpha:.22,color:8835068,i:.68};b.push(c);c={l:10,alpha:.27,color:11007484,i:.82};b.push(c);c={l:11,alpha:.27,color:10867450,i:1};b.push(c);c={l:9,alpha:.2,
color:6158332,i:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,u:.45,i:.175};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:.46};a.push(c);c={l:3,alpha:.3,color:10867450,u:.35,i:.5};a.push(c);c={l:60,alpha:.37,color:4031699,u:.75,i:.75};a.push(c);c={l:3,alpha:.25,color:4031699,u:.25,i:.75};a.push(c);c={l:3,alpha:.2,color:6158332,u:.25,i:.9};a.push(c);c={l:7,alpha:.45,color:8835068,u:.45,i:1.3};a.push(c);
c={l:32,alpha:.22,color:8835068,u:.75,i:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,u:.65,i:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,u:.65,i:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:-.18};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};b.push(c);c={l:26,alpha:.22,color:16389120,i:.4};b.push(c);c={l:26,alpha:.25,color:16389120,i:.65};b.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,
i:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,u:.22,i:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,u:.3,i:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,u:.3,i:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,u:.3,i:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,u:.3,i:1.8};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};b.push(c);
c={l:7,alpha:.26,color:15186464,i:.35};b.push(c);c={l:23,alpha:.18,color:15186464,i:.65};b.push(c);c={l:13,alpha:.2,color:15186464,i:.8};b.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,u:.45,i:.22};a.push(c);c={l:3,alpha:.3,color:15451904,u:.25,i:.4};a.push(c);c={l:4,alpha:.2,color:15451904,u:.25,i:.45};a.push(c);c={l:65,alpha:.17,color:15186464,u:.25,i:.5};a.push(c);c={l:5,alpha:.45,color:15579138,u:.45,
i:.88};a.push(c);c={l:140,alpha:.18,color:15579138,u:.32,i:.95};a.push(c);c={l:12,alpha:.22,color:15579138,u:.32,i:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,u:.72,i:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,u:.45,i:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,u:.25,i:1.42};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d)};g.prototype.nn=function(){if(this.Si){var b=this.h.H,a,d,c,e=new m.sa(0,0,-100),f=this.h.fd(),l,k;if(this.h.$)l=this.h.jb.width,k=this.h.jb.height,this.h.C.jg&&
(l=this.h.C.Nb.width,k=this.h.C.Nb.height);else{this.R||(this.R=this.Lc.getContext("2d"));if(this.R.width!==this.h.m.width||this.R.height!==this.h.m.height)this.R.width=this.h.m.width,this.R.height=this.h.m.height;this.R.clear?this.R.clear():this.R.clearRect(0,0,this.Lc.width,this.Lc.height);l=this.R.width;k=this.R.height}var g=Math.sqrt(l*l+k*k),h=g/800;for(d=0;d<this.Mf.length;d++){var n=this.Mf[d];e.Ya(0,0,-100);e.wa(-n.j*Math.PI/180);e.Ea(n.pan*Math.PI/180);e.Ea(-this.h.pan.c*Math.PI/180);e.wa(this.h.j.c*
Math.PI/180);e.mb(this.h.M.c*Math.PI/180);var r=!1;if(-.01>e.z){var p,u;u=-f/e.z;p=e.x*u;u*=e.y;Math.abs(p)<l/2+100&&Math.abs(u)<k/2+100&&(r=!0,p+=l/2,u+=k/2)}if(r){this.h.$&&(b.blendFunc(b.SRC_ALPHA,b.DST_ALPHA),b.enable(b.BLEND),b.disable(b.DEPTH_TEST));var r=l/2,t=k/2;c=Math.sqrt((r-p)*(r-p)+(t-u)*(t-u));var v=g/2,t=l>k?l:k,r=n.pj/100*((v-c)/v);0>r&&(r=0);if(this.h.$){b.useProgram(this.Rb);b.bindBuffer(b.ARRAY_BUFFER,this.h.C.cb);b.vertexAttribPointer(this.Rb.Z,this.h.C.cb.Dc,b.FLOAT,!1,0,0);var q=
b.getUniformLocation(this.Rb,"uCanvasDimensions");b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight);b.uniform2f(b.getUniformLocation(this.Rb,"uFlareCenterPosition"),b.drawingBufferWidth/l*p,k-b.drawingBufferHeight/k*u);b.uniform1f(b.getUniformLocation(this.Rb,"uBlindingValue"),r);q=b.getUniformLocation(this.Rb,"uAspectRatio");b.uniform1f(q,this.h.C.jg?b.drawingBufferWidth/b.drawingBufferHeight:b.drawingBufferWidth/b.drawingBufferHeight/(l/k));b.drawArrays(b.TRIANGLE_STRIP,0,this.h.C.cb.Kd)}else q=
this.R.createRadialGradient(p,u,1,p,u,t),q.addColorStop(0,"rgba(255, 255, 255, "+r+")"),q.addColorStop(.5,"rgba(255, 255, 255, "+.8*r+")"),q.addColorStop(1,"rgba(255, 255, 255, "+.6*r+")"),this.R.fillStyle=q,this.R.fillRect(0,0,this.R.width,this.R.height);if(0!=Number(n.type)&&!this.h.C.jg){var r=l/2-p,t=k/2-u,x=1,A=Number(n.type)-1;c<.35*v&&(x=c/(.35*v),x*=x);c>.7*v&&(x=(v-c)/(.3*v));x*=n.alpha/100;if(0<this.Lb[A].length)for(c=0;c<this.Lb[A].length;c++){var z=this.Lb[A][c],v=z.l*h;a=z.alpha*x;0>
a&&(a=0);var y=z.color;if(8==A||9==A||10==A)y=n.color;if(this.h.$)b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.Ge),b.vertexAttribPointer(this.pa.Z,this.Ge.Dc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight),b.uniform2f(b.getUniformLocation(this.pa,"uCirclePosition"),b.drawingBufferWidth/l*(p+r*z.i),b.drawingBufferWidth/l*(k-(u+t*z.i))),b.uniform2f(b.getUniformLocation(this.pa,"uCircleTexturePosition"),b.drawingBufferWidth/
l*(p+r*z.i),k-(u+t*z.i)),b.uniform1f(b.getUniformLocation(this.pa,"uCircleRadius"),v),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),.1),q=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/k)),b.drawArrays(b.TRIANGLE_FAN,0,this.Ge.Kd);else{this.R.save();this.R.translate(p+
r*z.i,u+t*z.i);q=this.R.createRadialGradient(0,0,1,0,0,1.1*v);q.addColorStop(0,this.h.fa(y,a));q.addColorStop(.65,this.h.fa(y,.9*a));q.addColorStop(.8,this.h.fa(y,.7*a));q.addColorStop(1,this.h.fa(y,.2*a));this.R.beginPath();var y=2*Math.PI/6,z=Math.PI/180*35,C=!0;for(a=z;a<=z+2*Math.PI;a+=y)C?(this.R.moveTo(v*Math.sin(a),v*Math.cos(a)),C=!1):this.R.lineTo(v*Math.sin(a),v*Math.cos(a));this.R.closePath();this.R.fillStyle=q;this.R.fill();this.R.restore()}}if(0<this.Ib[A].length)for(c=0;c<this.Ib[A].length;c++){z=
this.Ib[A][c];v=z.l*h;a=z.alpha*x;0>a&&(a=0);y=z.color;if(8==A||9==A||10==A)y=n.color;this.h.$?(b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.hd),b.vertexAttribPointer(this.pa.Z,this.hd.Dc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight),q=b.getUniformLocation(this.pa,"uCirclePosition"),b.uniform2f(q,b.drawingBufferWidth/l*(p+r*z.i),b.drawingBufferWidth/l*(k-(u+t*z.i))),q=b.getUniformLocation(this.pa,"uCircleTexturePosition"),
b.uniform2f(q,b.drawingBufferWidth/l*(p+r*z.i),k-(u+t*z.i)),q=b.getUniformLocation(this.pa,"uCircleRadius"),b.uniform1f(q,v),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),z.u),q=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/k)),b.drawArrays(b.TRIANGLE_FAN,0,this.hd.Kd)):
(this.R.save(),this.R.translate(p+r*z.i,u+t*z.i),q=this.R.createRadialGradient(0,0,1,0,0,v),q.addColorStop(0,this.h.fa(y,a)),q.addColorStop(1-z.u,this.h.fa(y,.8*a)),q.addColorStop(1,this.h.fa(y,0)),this.R.beginPath(),this.R.arc(0,0,v,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=q,this.R.fill(),this.R.restore())}if(0<this.Mb[A].length)for(c=0;c<this.Mb[A].length;c++)n=this.Mb[A][c],v=n.l*h,a=n.alpha*x,0>a&&(a=0),this.h.$?(b.useProgram(this.lb),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,
this.Pk),b.bindBuffer(b.ARRAY_BUFFER,this.hd),b.vertexAttribPointer(this.lb.Z,this.hd.Dc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.lb,"uCanvasDimensions2"),b.uniform2f(q,l,k),q=b.getUniformLocation(this.lb,"uCirclePosition"),b.uniform2f(q,p+r*n.i,k-(u+t*n.i)),q=b.getUniformLocation(this.lb,"uRingTexturePosition"),b.uniform2f(q,b.drawingBufferWidth/l*(p+r*n.i),k-(u+t*n.i)),q=b.getUniformLocation(this.lb,"uCircleRadius"),b.uniform1f(q,v),b.uniform2f(b.getUniformLocation(this.lb,"uRingPosition"),p+
r*n.i,k-(u+t*n.i)),b.uniform1f(b.getUniformLocation(this.lb,"uRingRadius"),v),b.uniform1f(b.getUniformLocation(this.lb,"uRingAlpha"),a),q=b.getUniformLocation(this.lb,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/k)),b.uniform1i(b.getUniformLocation(this.lb,"uSampler"),0),b.drawArrays(b.TRIANGLE_FAN,0,this.hd.Kd)):(this.R.save(),this.R.translate(p+r*n.i,u+t*n.i),q=this.R.createRadialGradient(0,0,0,0,0,v),q.addColorStop(0,this.h.fa(16777215,0)),q.addColorStop(.88,this.h.fa(0,
0)),q.addColorStop(.9,this.h.fa(16654848,a)),q.addColorStop(.92,this.h.fa(16776448,a)),q.addColorStop(.94,this.h.fa(4849466,a)),q.addColorStop(.96,this.h.fa(131071,a)),q.addColorStop(.98,this.h.fa(8190,a)),q.addColorStop(1,this.h.fa(0,0)),this.R.beginPath(),this.R.arc(0,0,v,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=q,this.R.fill(),this.R.restore())}this.h.$&&(b.useProgram(this.h.ma.F),b.disable(b.BLEND),b.enable(b.DEPTH_TEST))}}}};return g}();m.Al=g})(ggP2VR||(ggP2VR={}));var O=!1;
(function(m){var g=function(){return function(){this.f=this.j=this.pan=0}}(),h=function(){function b(a,d){this.pan={c:0,Pa:0,min:0,max:360,d:0,Ci:0,ed:0};this.j={c:0,Pa:0,min:-90,max:90,d:0,ed:0};this.M={c:0,Pa:0,min:-180,max:180,d:0};this.mc={pan:0,j:-90,M:0,f:170,Bb:9};this.f={c:70,Pa:70,min:1,Rf:0,max:170,wi:360,xi:270,Ne:0,d:0,mode:0,cl:0,xj:0};this.Da={M:0,pitch:0};this.m={width:10,height:10};this.kb=0;this.Th=new m.sa;this.crossOrigin="anonymous";this.Za=this.dh=4;this.Uc=this.rg=this.Tf=this.gc=
0;this.Y={start:{x:0,y:0},ca:{x:0,y:0},pd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.X={hb:!1,Cj:0,startTime:0,start:{x:0,y:0},ca:{x:0,y:0},pd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.bi=!0;this.va={enabled:!0,ca:{x:0,y:0},ba:{x:0,y:0},Oi:0,f:{active:!1,Wb:0}};this.o={src:[],we:4,width:640,height:480,Wc:!1,Tg:!1,dl:!1,$d:"loop",a:HTMLVideoElement=null,fl:!1,ic:WebGLTexture=null,gj:WebGLBuffer=null,qh:WebGLBuffer=null,ni:WebGLBuffer=null,format:1,Ng:0,ei:1};this.fe=0;this.ha=this.ta=this.Ba=this.U=this.Ub=
this.$a=this.B=null;this.ce="pano";this.di="flashcontainer";this.Uh="";this.control=null;this.Hb=[];this.ya=!1;this.Gg=1;this.N=null;this.Ad=this.hf=this.Df=!1;this.ff=0;this.dd=.02;this.Gh=0;this.Hh=!1;this.Fh=this.ug=this.gf=this.ve=this.nj=0;this.zb="";this.Se=this.tc=!1;this.eh=0;this.Cg=[];this.De=[];this.Ye=this.jc=1;this.kf=1024;this.Te=!1;this.vk=200;this.la=0;this.yd=5;this.mi=this.gl=this.Fb=0;this.s={enabled:!1,timeout:5,active:!1,ig:!1,speed:.4,sh:0,ah:0,Bi:!0,ej:!1,cd:!1,oj:!1,zi:!1,
Xi:!1,startTime:0,od:0,Jg:!1,Dg:!1,Xg:0};this.v={active:!1,ue:!1,speed:.1,pan:0,j:0,M:0,f:70,xd:70,nk:0,qk:0,pk:0,mk:0,Bb:0,Vf:0,pi:0,dj:!1,Ai:!1,mj:0,lj:0};this.Qa=null;this.bf={};this.fj={};this.Eg=[];this.w={mode:1,Kf:-1,oa:0,fb:0,Jc:.05,Tb:255,Sb:1,Qb:255,Pb:.3,Ie:!0,Zi:{enabled:!0,width:180,height:20,$i:0,Yi:1,background:!0,Qb:16777215,Pb:1,Tb:0,Sb:1,Jh:3,Kh:1,Ch:!0},eb:[],Eb:[],Ec:[],nh:[]};this.ua=null;this.P=[];this.S=[];this.J=[];this.Xa=[];this.qe=[];this.La=[];this.Ia=[];this.V=1;this.ma=
this.Cd=this.Dd=null;this.qf={};this.addListener=function(a,d){(this.qf[a]=this.qf[a]||[]).push(d)};this.il=function(a,d){var b=this.qf[a],l,k;if(b)for(k=0,l=b.length;k<l;k++)b[k].apply(null,d)};this.removeEventListener=function(a,d){var b=this.qf[a];if(b){var l,k;k=0;for(l=b.length;k<l;k++)if(b[k]===d){1===l?delete this.qf[a]:b.splice(k,1);break}}};this.g=new m.El;this.mn={target:0,current:0,Jc:.01,fm:2,Xh:0,Fg:!1,Ql:!1};this.margin={left:0,top:0,right:0,bottom:0};this.A={Nf:!1,ui:!1,yb:!1,qd:!1,
md:!0,ck:!1,al:1,Rk:!1,Wh:!0,pf:!0,Ag:!1,Ef:!1,Tk:!0,sensitivity:8};this.Qf=[];this.Oc=!0;this.ra={x:0,y:0};this.og=this.vb=this.ng=this.Fc=this.$=!1;this.zh=this.rl=!0;this.li=!1;this.be=!0;this.ki=!1;this.Ja=this.Bd="";this.Qc="transition";this.Va="transform";this.gd="perspective";this.Aj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.jb={width:0,height:0};this.Gj=new m.sa;
this.Fj=new m.sa;this.Hj=new m.sa;this.Ij=new m.sa;this.Ej=new m.sa;this.If=!1;this.lk=this.Vb="";this.hj=[];this.vh=[];this.Ug=this.gk=this.Rg=this.hk=this.Id=this.ek=this.Pi=this.Jd=this.Gf=this.fk=!1;this.Ah=!0;this.dk=!1;this.Zj=[];this.devicePixelRatio=1;this.ga=this.C=null;this.yg=!1;this.Fa=null;this.qb={enabled:!1,speed:1,ud:!1,ai:!0};this.Ak=!1;this.gb=new m.Fl;this.cj=!1;this.nf=function(a,d){if(0==a.length)return a;var b,l,k,g,h,n,r,p;p=[];b=d.fh(a[0])-0;for(g=0;g<a.length;g++){n=g;r=g+
1;r==a.length&&(r=0);l=d.fh(a[r])-0;if(0<=b&&0<=l)p.push(a[n]);else if(0<=b||0<=l)k=l/(l-b),0>k&&(k=0),1<k&&(k=1),h=new m.sa,h.ld(a[n],a[r],k),0>b||p.push(a[n]),p.push(h);b=l}return p};this.Ti=0;this.Wg=-1;this.xf=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:
{x:0,y:0}:{x:0,y:0}};this.$g=1;this.jm=this.Kg=this.kk=this.Yh=this.Ki=this.gh=0;this.ae=!0;this.pb=new m.Vg(this);this.pb.Ie=!1;this.zj();this.Ve(this.pb);this.checkLoaded=this.Hb;this.isLoaded=!1;d&&d.hasOwnProperty("useFlash")&&d.useFlash&&(this.vb=!0,this.$=this.Fc=!1,d.hasOwnProperty("flashPlayerId")?this.ce=d.flashPlayerId:this.ce="pano",d.hasOwnProperty("flashContainerId")?this.di=d.flashContainerId:this.di=a+"flash");this.qa();this.vb||(this.Ca=new m.Al(this));this.uj(a);this.Pl();this.userdata=
this.bf=this.Hg();this.emptyHotspot=this.pb;this.mouse=this.ra;this.Dn();this.C=new m.Cl(this);this.Fa=new m.Dl(this);this.ma=new m.Jl(this)}b.prototype.Rh=function(){this.C.enabled=this.ga.enabled;this.C.type=this.ga.type;this.C.Na=this.ga.zoomin;this.C.Ob=this.ga.zoomout;this.C.vg=this.ga.blendtime;this.C.ef=this.ga.zoomoutpause;this.C.df=this.ga.zoomfov;this.C.Rd=this.ga.zoomspeed;this.C.xe=this.ga.blendcolor;this.C.uc=this.ga.softedge;this.ga=null};b.prototype.Zn=function(a){this.ga={};this.ga.enabled=
!0;this.ga.type=this.C.type;this.ga.zoomin=this.C.Na;this.ga.zoomout=this.C.Ob;this.ga.blendtime=this.C.vg;this.ga.zoomoutpause=this.C.ef;this.ga.zoomfov=this.C.df;this.ga.zoomspeed=this.C.Rd;this.ga.blendcolor=this.C.xe;this.ga.softedge=this.C.uc;if(a.hasOwnProperty("type")){var d=a.type;if("cut"==d||"crossdissolve"==d||"diptocolor"==d||"irisround"==d||"irisrectangular"==d||"wipeleftright"==d||"wiperightleft"==d||"wipetopbottom"==d||"wipebottomtop"==d||"wiperandom"==d)this.ga.type=d}a.hasOwnProperty("before")&&
(d=Number(a.before),0==d||2==d)&&(this.ga.zoomin=d);a.hasOwnProperty("after")&&(d=Number(a.after),0==d||2==d||3==d||4==d)&&(this.ga.zoomout=d);a.hasOwnProperty("transitiontime")&&(d=Number(a.transitiontime),0<=d&&50>=d&&(this.ga.blendtime=d));a.hasOwnProperty("waitfortransition")&&(this.ga.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(d=Number(a.zoomedfov),.01<=d&&50>=d&&(this.ga.zoomfov=d));a.hasOwnProperty("zoomspeed")&&(d=Number(a.zoomspeed),.01<=d&&99>=d&&(this.ga.zoomspeed=
d));a.hasOwnProperty("dipcolor")&&(this.ga.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.ga.softedge=a));this.yg||this.Rh()};b.prototype.Zc=function(a,d,c){var b=d?Number(d):0;if(0!=a&&4!=a&&12!=a&&9!=a)this.Xc("Unsupported projection type: "+a);else if(d&&0!==b&&4!==b&&12!==b&&9!==b)this.Xc("Unsupported projection2 type: "+b);else if(a==b&&(b=0),this.Tf=c?Number(c):1,this.Za!=a||this.gc!=b)this.Za=a,this.gc=b,this.ma.Qg()};b.prototype.za=function(){return 0==
this.Za?4:this.Za};b.prototype.Nh=function(a,d){if(0!=a&&4!=a&&12!=a&&9!=a)this.Xc("Unsupported projection type: "+a);else if(this.$||0==a||4==a||this.Xc("Projection changes require WebGL!"),this.za()!=a){var c={};c.pan=this.pan.c;c.tilt=this.j.c;c.fov=this.f.c;c.projection=a;c.timingFunction=3;c.speed=d;var b=this.wf(a);c.fov=Math.min(b,c.fov);this.Zg(c)}};b.prototype.zj=function(){var a;this.devicePixelRatio=window.devicePixelRatio||1;this.fk=navigator.userAgent.match(/(MSIE)/g)?!0:!1;this.Gf=navigator.userAgent.match(/(Firefox)/g)?
!0:!1;if(this.Jd=navigator.userAgent.match(/(Safari)/g)?!0:!1)a=navigator.userAgent.indexOf("Safari"),this.vd=navigator.userAgent.substring(a+7),a=navigator.userAgent.indexOf("Version"),-1!=a&&(this.vd=navigator.userAgent.substring(a+8)),this.vd=this.vd.substring(0,this.vd.indexOf(" ")),this.vd=this.vd.substring(0,this.vd.indexOf(".")),this.Pi=!0;if(this.ek=navigator.userAgent.match(/(Chrome)/g)?!0:!1)this.Jd=!1;this.Id=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;this.hk=navigator.userAgent.match(/(iPhone|iPod)/g)?
!0:!1;this.Rg=navigator.userAgent.match(/(android)/i)?!0:!1;this.gk=navigator.userAgent.match(/(IEMobile)/i)?!0:!1;this.Ug=this.Id||this.Rg||this.gk;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.Zj=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);a=["Webkit","Moz","O","ms","Ms"];var d;this.Ja="";this.Qc="transition";this.Va="transform";this.gd="perspective";for(d=0;d<a.length;d++)"undefined"!==typeof document.documentElement.style[a[d]+
"Transform"]&&(this.Ja="-"+a[d].toLowerCase()+"-",this.Qc=a[d]+"Transition",this.Va=a[d]+"Transform",this.gd=a[d]+"Perspective");this.li=G();this.$=N();this.Fc=this.li;this.$&&(this.Fc=!1);this.tc=!0;this.Se=!1;if(this.Id||this.Rg)this.Uk(80),this.yd=2;this.Xc("Pano2VR player - Prefix:"+this.Ja+", "+(this.li?"CSS 3D available":"CSS 3D not available")+", "+(this.$?"WebGL available":"WebGL not available"));try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.Ha=new AudioContext}catch(c){this.Ha=
null}this.Jd&&(!this.Pi||9>Number(this.vd))&&(this.Ha=null);this.Ah=this.hk?this.Jd&&this.Pi&&10<=Number(this.vd)?!0:!1:!0};b.prototype.O=function(a){if(O){var d=document.getElementById("debug");d&&(d.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Xc=function(a){var d=document.getElementById("debug");d&&(d.innerHTML=a+"<br />");window.console&&window.console.log(a)};b.prototype.Dn=function(){this.requestAnimationFrame=function(){var a=window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return a?a:function(a){window.setTimeout(a,10)}}()};b.prototype.Uk=function(a){this.vk=a};b.prototype.In=function(a){this.crossOrigin=a};b.prototype.Kn=function(a){this.Je=a};b.prototype.Fm=function(){return this.eh};b.prototype.Hn=function(a){this.Bd=a};b.prototype.nm=function(){return this.Bd};b.prototype.um=function(){return this.Ug};b.prototype.sm=function(){return this.s.active};
b.prototype.Mn=function(a){this.Ug=!!a};b.prototype.Lg=function(){return this.isLoaded};b.prototype.fd=function(){return 1*this.m.height/(2*Math.tan(Math.PI/180*(this.Kb()/2)))};b.prototype.Wk=function(a,d){this.isFullscreen&&(a=window.innerWidth,d=window.innerHeight);var c=a-this.margin.left-this.margin.right,b=d-this.margin.top-this.margin.bottom;if(!(10>c||10>b)){var f=window.devicePixelRatio||1;this.Te&&(f=1);this.B.style.width=c+"px";this.B.style.height=b+"px";this.B.style.left=this.margin.left+
"px";this.B.style.top=this.margin.top+"px";if(this.$)try{this.$a&&(this.$a.style.position="absolute",this.$a.style.display="inline",this.$a.style.width=c+"px",this.$a.style.height=b+"px",this.$a.width=c*f,this.$a.height=b*f),this.H&&(this.jb.width=c*f,this.jb.height=b*f,this.H.viewport(0,0,this.H.drawingBufferWidth,this.H.drawingBufferHeight))}catch(l){alert(l)}this.Ub&&(this.Ub.style.width=a+"px",this.Ub.style.height=d+"px",this.Ub.width=a,this.Ub.height=d);this.Ba&&(this.Ba.style.width=a+"px",this.Ba.style.height=
d+"px",this.ta.style.width=a+"px",this.ta.style.height=d+"px",this.ta.width=a,this.ta.height=d,this.ta.style.left=this.margin.left+"px",this.ta.style.top=this.margin.top+"px",this.N&&this.N!=this.Ba&&(this.N.style.width=a+"px",this.N.style.height=d+"px"));this.Ca&&(c=this.Ca.Lc,c.style.width=a+"px",c.style.height=d+"px",c.width=a,c.height=d,c.style.left=this.margin.left+"px",c.style.top=this.margin.top+"px");this.Df&&(this.ya=!0);c=this.B.offsetWidth;b=this.B.offsetHeight;if(this.m.width!=c||this.m.height!=
b)this.m.width=c,this.m.height=b;this.Io();this.N&&this.N.ggUpdateSize&&this.N.ggUpdateSize(a,d)}};b.prototype.te=function(){this.cj=!0};b.prototype.bd=function(){this.Wk(this.Dd.offsetWidth,this.Dd.offsetHeight)};b.prototype.Rm=function(){var a={width:0,height:0};a.width=this.m.width;a.height=this.m.height;return a};b.prototype.de=function(){var a={x:0,y:0},d=this.B;if(d.offsetParent){do a.x+=d.offsetLeft,a.y+=d.offsetTop,d=d.offsetParent;while(d)}return a};b.prototype.Yn=function(a){this.Qa=a};
b.prototype.On=function(a,d,c,b){this.margin.left=a;this.margin.top=d;this.margin.right=c;this.margin.bottom=b;this.Qa=this.skinObj;this.te()};b.prototype.Yl=function(a){0==a&&(this.A.md=!1);1==a&&(this.A.md=!0);2==a&&(this.A.md=this.A.md?!1:!0)};b.prototype.Pm=function(){return 1==this.A.md?1:0};b.prototype.rj=function(a,d){this.w.mode=1==d&&0<this.w.mode?0:Math.round(a);this.update();this.ha&&(this.ha.changePolygonMode(a,d),this.ha.update())};b.prototype.Yk=function(a){var d=this.w.eb.indexOf(a);
-1==d?(this.w.eb.push(a),this.w.Eb.push(0),this.w.Ec.push(1)):this.w.Ec[d]=1;this.update()};b.prototype.Xj=function(a){var d=this.w.eb.indexOf(a);-1!=d&&(this.w.Ec[d]=0,this.w.nh.push(a),this.update())};b.prototype.uo=function(a){var d=this.w.eb.indexOf(a);-1==d||-1!=d&&0==this.w.Ec[d]?this.Yk(a):this.Xj(a);this.update()};b.prototype.Wl=function(a,d,c,b,f){for(var l=0;l<this.P.length;l++){var k=this.P[l];"poly"!=k.type||k.id!=a&&""!=a||(k.Qb=d,k.Pb=c,k.Tb=b,k.Sb=f)}""==a&&(this.w.Qb=d,this.w.Pb=c,
this.w.Tb=b,this.w.Sb=f);this.update()};b.prototype.Ul=function(a){this.Ca&&(this.Ca.Si=0==a?!0:1==a?!1:!this.Ca.Si,this.update())};b.prototype.Hm=function(){return this.w.mode};b.prototype.Zl=function(){};b.prototype.Qm=function(){return 0};b.prototype.$j=function(a,d,c){a=Math.atan2(a+1,c);var b=Math.atan2(d+1,c);d=Math.sin(a);c=Math.sin(b);a=Math.cos(a);b=Math.cos(b);this.Gj.Ya(0,0,-1);this.Fj.Ya(a,0,-d);this.Hj.Ya(-a,0,-d);this.Ij.Ya(0,b,-c);this.Ej.Ya(0,-b,-c)};b.prototype.Qh=function(a){a=this.nf(a,
this.Gj);a=this.nf(a,this.Fj);a=this.nf(a,this.Hj);a=this.nf(a,this.Ij);return a=this.nf(a,this.Ej)};b.prototype.kl=function(a){if(!this.tc&&this.$m!=a){this.$m=a;var d;d=this.margin.left+this.m.width/2+"px ";d+=this.margin.top+this.m.height/2+"px ";this.Ba.style[this.gd]=a+"px";this.Ba.style[this.gd+"Origin"]=d;this.B.style[this.gd]=a+"px";this.B.style[this.gd+"Origin"]=d}};b.prototype.ho=function(){return this.C.re||this.C.zd||this.$&&(4!=this.Za||0!=this.gc)?!1:!0};b.prototype.lg=function(){var a,
d=new m.sa(0,0,-100),c=this.fd(),b,f,l;f=100/this.f.c;l=this.g.width/this.g.height;b=this.m.height*f*l;f*=this.m.height;for(var k=this.ho(),g=0;g<this.P.length;g++){var h=this.P[g],n,r;"point"==h.type&&(r=!1,2==this.kb?(a=(this.pan.c-h.pan)/100/l*b,n=(this.j.c-h.j)/100*f,Math.abs(a)<this.m.width/2+500&&Math.abs(n)<this.m.height/2+500&&(r=!0)):(d.Ya(0,0,-100),d.wa(-h.j*Math.PI/180),d.Ea(h.pan*Math.PI/180),d.Ea(-this.pan.c*Math.PI/180),d.wa(this.j.c*Math.PI/180),d.mb(this.M.c*Math.PI/180),.01>d.z?(n=
-c/d.z,a=d.x*n,n*=d.y,Math.abs(a)<this.m.width/2+500&&Math.abs(n)<this.m.height/2+500&&(r=!0)):n=a=0),h.hc=a+this.m.width/2,h.Cb=n+this.m.height/2,h.a&&h.a.__div&&("none"!=h.a.__div.style[this.Qc]&&(h.a.__div.style[this.Qc]="none"),h.a.ggUse3d?(this.tc||this.kl(c),h.a.__div.style.width="1px",h.a.__div.style.height="1px",a="",this.tc&&(a+="perspective("+c+"px) "),a+="translate3d(0px,0px,"+c+"px) ",a+="rotateZ("+this.M.c.toFixed(10)+"deg) ",a+="rotateX("+this.j.c.toFixed(10)+"deg) ",a+="rotateY("+(-this.pan.c).toFixed(10)+
"deg) ",a+="rotateY("+h.pan.toFixed(10)+"deg) ",a+="rotateX("+(-h.j).toFixed(10)+"deg) ",a+="translate3d(0px,0px,"+(-1*h.a.gg3dDistance).toFixed(10)+"px) ",h.a.__div.style[this.Va+"Origin"]="0% 0%",h.a.__div.style[this.Va]=a,h.a.__div.style.left=this.margin.left+this.m.width/2+"px",h.a.__div.style.top=this.margin.top+this.m.height/2+"px"):r&&k?(h.a.__div.style.left=this.margin.left+a+this.m.width/2+"px",h.a.__div.style.top=this.margin.top+n+this.m.height/2+"px"):(h.a.__div.style.left="-1000px",h.a.__div.style.top=
"-1000px")));if("poly"==h.type){var p=[];if(2==this.kb)for(h.Md=[],r=0;r<h.pg.length;r++)n=h.pg[r],a=(this.pan.c-n.pan)/100/l*b,n=(this.j.c-n.j)/100*f,a+=this.margin.left+this.m.width/2,n+=this.margin.top+this.m.height/2,h.Md.push({hc:a,Cb:n});else{for(r=0;r<h.pg.length;r++)n=h.pg[r],d.Ya(0,0,-100),d.wa(-n.j*Math.PI/180),d.Ea(n.pan*Math.PI/180),d.Ea(-this.pan.c*Math.PI/180),d.wa(this.j.c*Math.PI/180),d.mb(this.M.c*Math.PI/180),p.push(d.clone());p=this.Qh(p);if(0<p.length)for(r=0;r<p.length;r++)d=
p[r],.1>d.z?(n=-c/d.z,a=this.m.width/2+d.x*n,n=this.m.height/2+d.y*n):n=a=0,d.hc=a,d.Cb=n;h.Md=p}}}};b.prototype.om=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&c.a&&c.a.__div&&a.push(c.a.__div)}return a};b.prototype.fa=function(a,d){a=Number(a);isNaN(d)&&(d=0);0>d&&(d=0);1<d&&(d=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+d+")"};b.prototype.on=function(){var a,d;if(this.ta&&(this.w.Kf!=this.w.mode&&(this.w.Kf=this.w.mode,this.ta.style.visibility=
0<this.w.mode?"inherit":"hidden"),0<=this.w.mode||0<this.w.eb.length)){this.aa||(this.aa=this.ta.getContext("2d"));if(this.aa.width!=this.m.width||this.aa.height!=this.m.height)this.aa.width=this.m.width,this.aa.height=this.m.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.ta.width,this.ta.height);var c=1;0>=this.w.mode&&(c=0);3==this.w.mode&&(c=this.w.oa);for(a=0;a<this.P.length;a++){d=this.P[a];var b=c;if("poly"==d.type){var f=d.Md;2==this.w.mode&&(b=d.oa);var l=this.w.eb.indexOf(d.id);
-1!=l&&(b=this.w.Eb[l]);this.aa.fillStyle=this.fa(d.Qb,d.Pb*b);this.aa.strokeStyle=this.fa(d.Tb,d.Sb*b);if(0<f.length){this.aa.beginPath();for(d=0;d<f.length;d++)b=f[d],0==d?this.aa.moveTo(b.hc,b.Cb):this.aa.lineTo(b.hc,b.Cb);this.aa.closePath();this.aa.stroke();this.aa.fill()}}}}};b.prototype.Yj=function(a,d,c){var b,f,l=!1;b=0;for(f=a.length-1;b<a.length;f=b++){var k=a[b];f=a[f];k.Cb>c!=f.Cb>c&&d<(f.hc-k.hc)*(c-k.Cb)/(f.Cb-k.Cb)+k.hc&&(l=!l)}return l};b.prototype.Ph=function(a,d){var c=-1;if((0<=
this.w.mode||0<this.w.eb.length)&&this.Wm())for(var b=0;b<this.P.length;b++){var f=this.P[b];"poly"==f.type&&f.Md&&0<f.Md.length&&(-1!=this.w.mode||-1!=this.w.eb.indexOf(f.id))&&this.Yj(f.Md,a,d)&&(c=b,f.hc=a,f.Cb=d)}return 0<=c?this.P[c]:!1};b.prototype.Wm=function(){return 4==this.za()&&0==this.gc};b.prototype.Kb=function(){var a=0,d=this.za(),c=this.m;switch(this.f.mode){case 0:a=this.f.c/2;break;case 1:a=4==d?180*Math.atan(c.height/c.width*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/c.width*
this.f.c/2;break;case 2:a=Math.sqrt(c.width*c.width+c.height*c.height);a=4==d?180*Math.atan(c.height/a*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/a*this.f.c/2;break;case 3:a=4*c.height/3>c.width?this.f.c/2:4==d?180*Math.atan(4*c.height/(3*c.width)*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:4*c.height/(3*c.width)*(this.f.c/2)}return 2*a};b.prototype.qm=function(a,d){a||(a=this.Kb());d||(d=this.za());return 4==d?180*Math.atan(this.Sd()*Math.tan(a/2*Math.PI/180))/Math.PI:a*this.Sd()};b.prototype.Sd=
function(){return this.m.width/this.m.height};b.prototype.cg=function(a){a/=2;var d,c=this.za();switch(this.f.mode){case 0:this.f.c=2*a;break;case 1:a=4==c?180*Math.atan(this.m.width/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:this.m.width/this.m.height*a;this.f.c=2*a;break;case 2:d=Math.sqrt(this.m.width*this.m.width+this.m.height*this.m.height);a=4==c?180*Math.atan(d/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:d/this.m.height*a;this.f.c=2*a;break;case 3:4*this.m.height/3>this.m.width||(d=
3*this.m.width/(4*this.m.height),a=4==c?180*Math.atan(d*Math.tan(a*Math.PI/180))/Math.PI:d*a),this.f.c=2*a}};b.prototype.zg=function(){var a=new g;a.pan=this.pan.c;a.j=this.j.c;a.f=this.f.c;this.Be(a);this.Be(a);this.Be(a);this.pan.c=a.pan;this.j.c=a.j;this.f.c=a.f};b.prototype.Be=function(a){var d,c,b=this.m.width/this.m.height;if(2==this.kb){0<this.f.Rf&&(d=this.jc,this.g.I&&0<this.g.I.length&&(d=this.g.I[0].height),this.f.min=100*this.m.height/(d*this.f.Rf));c=a.f/2;d=c*b;var f=this.g.width/this.g.height*
50,b=this.A.Tk?2*Math.min(50,f/b):2*Math.max(50,f/b);a.f<this.f.min&&(a.f=this.f.min);a.f>b&&(a.f=b);50<c?a.j=0:(50<a.j+c&&(a.j=50-c),-50>a.j-c&&(a.j=-50+c));d>f?a.pan=0:(a.pan+d>f&&(a.pan=f-d,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0)),a.pan-d<-f&&(a.pan=-f+d,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0)))}else{0<this.f.Rf&&(d=this.jc,this.g.I&&0<this.g.I.length&&(d=this.g.I[0].height),this.f.min=360*Math.atan2(this.m.height/2,d/2*this.f.Rf)/Math.PI);a.f<this.f.min&&(a.f=
this.f.min);var f=this.f.max,l=179;c=this.Kb()/2;d=b*c;4==this.za()?d=180*Math.atan(b*Math.tan(c*Math.PI/180))/Math.PI:9==this.za()?(f=this.f.xi,l=355):12==this.za()&&(f=this.f.wi,l=360);this.$||(f=Math.max(160,f));a.f>f&&(a.f=f);12==this.za()&&(2*d>l&&(a.f=l/b),c=this.Kb()/2,2*c>l&&(a.f=l),c=this.Kb()/2,d=b*c);2*c>this.j.max-this.j.min&&180>this.j.max-this.j.min&&(c=(this.j.max-this.j.min)/2,this.cg(2*c));90>this.j.max?a.j+c>this.j.max&&(a.j=this.j.max-c):a.j>this.j.max&&(a.j=this.j.max);-90<this.j.min?
a.j-c<this.j.min&&(a.j=this.j.min+c):a.j<this.j.min&&(a.j=this.j.min);b=this.pan.max-this.pan.min;if(359.99>b){var f=90,l=Math.tan(c*Math.PI/180),k=Math.tan((Math.abs(a.j)+c)*Math.PI/180),k=Math.sqrt(k*k+1)/Math.sqrt(l*l+1);c=180*Math.atan(k*Math.tan(d*Math.PI/180))/Math.PI;2*c>b&&(k=Math.tan(b*Math.PI/360)/Math.tan(d*Math.PI/180),b=k*Math.sqrt(l*l+1),k=Math.sqrt(b*b-1),f=180/Math.PI*Math.atan(k));a.pan+c>this.pan.max&&(a.pan=this.pan.max-c,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));
a.pan-c<this.pan.min&&(a.pan=this.pan.min+c,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));a.j+d>f&&(a.j=f-d);a.j-d<-f&&(a.j=-f+d)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.ya=!0;a&&(this.Gg=a)};b.prototype.vm=function(){return this.ha?!!this.ha.isTileLoading:0<this.la||0<this.Fb||0<this.ma.la||0<this.ma.Fb};b.prototype.mg=function(){var a=Date.now(),d;this.vb?this.ha&&(this.Bo(),2===this.kb?(this.zg(),this.lg()):0===this.kb&&(d=this.fd(),this.$j(this.m.width/2,this.m.height/
2,d),this.lg())):2===this.kb?(this.lg(),this.$?(this.ma.aj(),this.ma.Ck()):this.aj()):0===this.kb&&(!this.$||4==this.Za&&0==this.gc?(d=this.fd(),this.$j(this.m.width/2,this.m.height/2,d),this.lg(),this.og?this.ma.Ho():this.rl&&this.ql(),this.ll(),this.$?(this.o.Wc?14==this.o.format?this.ma.Go():this.ma.vl():0<this.g.I.length?this.ma.No():this.ma.Po(),this.ma.Ck()):(this.Fc?0<this.g.I.length?this.Eo():this.Do():this.ng&&this.Ao(),this.on()),this.Ca&&this.Ca.nn()):(this.ma.vl(),this.lg(),this.Vm()));
d=Date.now();50<d-a?(this.O("Time between frames: "+(d-a)),this.Te||(2<this.Ti?(this.Te=!0,this.O("disabling HighDPI rendering"),this.bd()):this.Ti++)):this.Ti=0;this.Df&&this.g.Ok++};b.prototype.Do=function(){var a=!1;if(this.m.width!=this.B.offsetWidth||this.m.height!=this.B.offsetHeight)this.m.width=this.B.offsetWidth,this.m.height=this.B.offsetHeight,this.B.style[this.Va+"OriginX"]=this.m.width/2+"px",this.B.style[this.Va+"OriginY"]=this.m.height/2+"px",a=!0;var d=Math.round(this.fd());this.Lf==
d&&!a||this.tc||(this.Lf=d,this.B.style[this.gd]=d+"px");this.gb.bm(this.pan.c,this.j.c,this.M.c,this.Da);for(a=0;6>a;a++){var c,b;if(c=this.gb.ab[a])b="",this.tc?(b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",b+="perspective("+d+"px) ",b+="translate3d(0px,0px,"+d+"px) "):b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+d+"px) ",b+="rotateZ("+Number(this.M.c).toFixed(10)+"deg) ",b+="rotateX("+Number(this.j.c).toFixed(10)+"deg) ",b+="rotateY("+Number(-this.pan.c).toFixed(10)+
"deg) ",c.Uj&&(b+=c.Uj,c.rc||(b="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),c.K.style[this.Va]=b)}};b.prototype.Ao=function(){this.zg();var a;this.Ub&&(a=this.Ub.getContext("2d"));if(this.m.width!==this.B.offsetWidth||this.m.height!==this.B.offsetHeight)this.m.width=this.B.offsetWidth,this.m.height=this.B.offsetHeight;if(a){var d=a.canvas.width/2,c=a.canvas.height/2,b=a.createRadialGradient(d,c,5,d,c,Math.max(d,c));b.addColorStop(0,"#333");b.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,
a.canvas.height);a.fillStyle=b;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.c.toFixed(1),d,c-60);a.fillText("Tilt: "+this.j.c.toFixed(1),d,c-30);a.fillText("Fov: "+this.f.c.toFixed(1),d,c+0);a.fillText("Node: "+this.Mj(),d,c+30);a.fillText("Title: "+this.bf.title,d,c+60)}};b.prototype.Bo=function(){this.zg();if(this.m.width!==this.B.offsetWidth||this.m.height!==this.B.offsetHeight)this.m.width=this.B.offsetWidth,this.m.height=this.B.offsetHeight;
this.ha&&this.ha.setPan&&(this.ha.setPan(this.pan.c),this.ha.setTilt(this.j.c),this.ha.setFov(this.f.c))};b.prototype.aj=function(){this.ta.style.visibility="inherit";this.aa||(this.aa=this.ta.getContext("2d"));if(this.aa.width!=this.m.width||this.aa.height!=this.m.height)this.aa.width=this.m.width,this.aa.height=this.m.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.ta.width,this.ta.height);this.Fb=0;var a,d,c;d=100/this.f.c;c=this.g.width/this.g.height;var b=this.m.height*d*c;d*=
this.m.height;a=(this.pan.c/100/c-.5)*b+this.m.width/2;for(var f=(this.j.c/100-.5)*d+this.m.height/2,l,k,g,h,n=0;this.g.I.length>=n+2&&this.g.I[n+1].width>b;)n++;var r,p;p=[];for(r=this.g.I.length-1;r>=n;){c=this.g.I[r];var u;if(c.cache)u={Wa:0,rb:0},u.sb=c.L-1,u.tb=c.ea-1;else{u={};var t=-f/d*(c.height/this.g.G);l=(-a+this.m.width)/b*(c.width/this.g.G);k=(-f+this.m.height)/d*(c.height/this.g.G);u.Wa=Math.min(Math.max(0,Math.floor(-a/b*(c.width/this.g.G))),c.L-1);u.rb=Math.min(Math.max(0,Math.floor(t)),
c.ea-1);u.sb=Math.min(Math.max(0,Math.floor(l)),c.L-1);u.tb=Math.min(Math.max(0,Math.floor(k)),c.ea-1)}p[r]=u;var v=!0;for(k=u.rb;k<=u.tb;k++)for(l=u.Wa;l<=u.sb;l++)h=l+k*c.L,t=c.W[h],t||(t=new m.Gd,c.W[h]=t),this.la<this.yd?t.g||(this.mi++,t.g=new Image,t.g.onload=this.ro(),t.g.onerror=this.rh(t),t.g.onabort=this.rh(t),t.g.crossOrigin=this.crossOrigin,t.g.setAttribute("src",this.pe(0,r,l,k)),c.cache&&this.Hb.push(t.g),0==this.la&&this.N&&this.N.ggReLoadedLevels&&this.N.ggReLoadedLevels(),this.la++,
this.ya=!0):this.Fb++,t.g&&t.g.complete||(v=!1),t.visible=!0;u.si=v;r--}for(r=this.g.I.length-1;r>=n;){c=this.g.I[r];if(p[r]&&0<=p[r].Wa)for(u=p[r],k=u.rb;k<=u.tb;k++)for(l=u.Wa;l<=u.sb;l++)h=l+k*c.L,(t=c.W[h])||(t=c.W[h]=new m.Gd),t.g&&t.g.complete&&this.aa.drawImage(t.g,a+(-this.g.Ka+this.g.G*l)*b/c.width,f+(-this.g.Ka+this.g.G*k)*d/c.height,t.g.width*b/c.width,t.g.height*d/c.height),t.visible=!0;r--}for(b=0;b<this.g.I.length;b++)if(c=this.g.I[b],!c.cache)for(g in c.W)c.W.hasOwnProperty(g)&&(t=
c.W[g],t.visible||(t.g=null,delete c.W[g]));if(0<=this.w.mode||0<this.w.eb.length)for(b=1,0>=this.w.mode&&(b=0),3==this.w.mode&&(b=this.w.oa),g=0;g<this.P.length;g++)if(c=this.P[g],a=b,"poly"==c.type&&(d=c.Md,2==this.w.mode&&(a=c.oa),f=this.w.eb.indexOf(c.id),-1!=f&&(a=this.w.Eb[f]),0<d.length)){this.aa.fillStyle=this.fa(c.Qb,c.Pb*a);this.aa.strokeStyle=this.fa(c.Tb,c.Sb*a);this.aa.beginPath();for(c=0;c<d.length;c++)a=d[c],0==c?this.aa.moveTo(a.hc,a.Cb):this.aa.lineTo(a.hc,a.Cb);this.aa.closePath();
this.aa.stroke();this.aa.fill()}this.Oc=!1};b.prototype.qo=function(a){var d=this;return function(){d.ya=!0;d.Oc=!0;a.loaded=!0;a.g&&!a.K&&d.B.appendChild(a.g);d.la&&d.la--;0==d.la&&d.N&&d.N.ggLoadedLevels&&d.N.ggLoadedLevels();a.g&&a.Oa&&(a.Oa.drawImage(a.g,0,0),a.g=null)}};b.prototype.ro=function(){var a=this;return function(){a.ya=!0;a.Oc=!0;a.la&&a.la--;0==a.la&&a.N&&a.N.ggLoadedLevels&&a.N.ggLoadedLevels()}};b.prototype.rh=function(a){var d=this;return function(){d.ya=!0;d.Oc=!0;d.la&&d.la--;
0==d.la&&d.N&&d.N.ggLoadedLevels&&d.N.ggLoadedLevels();a.g=null}};b.prototype.Tj=function(a,d,c){c.Wa=a.width/this.g.G*d.sf;c.rb=a.height/this.g.G*d.tf;c.sb=a.width/this.g.G*d.Of;c.tb=a.height/this.g.G*d.Pf;c.Wa=Math.min(Math.max(0,Math.floor(c.Wa)),a.L-1);c.rb=Math.min(Math.max(0,Math.floor(c.rb)),a.ea-1);c.sb=Math.min(Math.max(0,Math.floor(c.sb)),a.L-1);c.tb=Math.min(Math.max(0,Math.floor(c.tb)),a.ea-1)};b.prototype.Qn=function(a){a=Math.round(a);this.tc=0<(a&1);this.Se=0<(a&2);this.zh=0<(a&4);
this.Te=0<(a&8);4096<=a&&(this.Fc=0<(a&4096),this.$=0<(a&8192),this.ng=0<(a&32768))};b.prototype.Km=function(){var a=0;this.tc&&(a|=1);this.Se&&(a|=2);this.zh&&(a|=4);this.Fc&&(a|=4096);this.$&&(a|=8192);this.ng&&(a|=32768);return a};b.prototype.nl=function(){if(!(6>this.gb.ab.length))for(var a=0;6>a;a++){var d;d=this.gb.ab[a];var c;c=[];c.push(new m.sa(-1,-1,-1,0,0));c.push(new m.sa(1,-1,-1,1,0));c.push(new m.sa(1,1,-1,1,1));c.push(new m.sa(-1,1,-1,0,1));for(var b=0;4>b;b++)4>a?c[b].Ea(-Math.PI/
2*a):c[b].wa(Math.PI/2*(4==a?-1:1)),this.Da&&(c[b].mb(this.Da.M*Math.PI/180),c[b].wa(-this.Da.pitch*Math.PI/180)),c[b].Ea(-this.pan.c*Math.PI/180),c[b].wa(this.j.c*Math.PI/180),c[b].mb(this.M.c*Math.PI/180);c=this.Qh(c);d.rc=0<c.length;if(d.rc){d=d.Me;d.sf=c[0].ad;d.Of=c[0].ad;d.tf=c[0].Gb;d.Pf=c[0].Gb;for(b=1;b<c.length;b++)d.sf=Math.min(d.sf,c[b].ad),d.Of=Math.max(d.Of,c[b].ad),d.tf=Math.min(d.tf,c[b].Gb),d.Pf=Math.max(d.Pf,c[b].Gb);d.cf=d.Of-d.sf;d.qg=d.Pf-d.tf;d.scale=Math.max(d.cf,d.qg)}else d.Me.cf=
-1,d.Me.qg=-1}};b.prototype.vi=function(){for(var a=0;a<this.g.I.length;a++){var d=this.g.I[a],c;for(c in d.W)d.W.hasOwnProperty(c)&&(d.W[c].visible=!1)}};b.prototype.$h=function(){for(var a=0,d=Math.tan(Math.min(this.Kb(),175)*Math.PI/360),c=this.m.height/(2*d),c=c*(1+this.m.width/this.m.height*d/2),c=c*Math.pow(2,1<this.devicePixelRatio?this.g.sk:this.g.rk);this.g.I.length>=a+2&&!this.g.I[a+1].Pe&&this.g.I[a+1].width>c;)a++;return a};b.prototype.Eo=function(){var a=!1,d,c,b;if(this.m.width!==this.B.offsetWidth||
this.m.height!==this.B.offsetHeight)this.m.width=this.B.offsetWidth,this.m.height=this.B.offsetHeight,this.B.style[this.Va+"OriginX"]=this.m.width/2+"px",this.B.style[this.Va+"OriginY"]=this.m.height/2+"px",a=!0;var f=Math.round(this.fd());if(this.Lf!=f||a)this.Lf=f,this.tc||(this.B.style[this.gd]=f+"px",this.B.style[this.gd+"Origin"]="50% 50%");this.Fb=0;if(0<this.g.I.length){this.nl();this.vi();var l;l="";for(d=0;6>d;d++){var k;k=this.gb.ab[d];k.rc&&(l=l+d+",")}l=this.$h();var g;for(g=this.g.I.length-
1;g>=l;){var a=this.g.I[g],h=1;g==this.g.I.length-1&&0==this.g.Ka&&(h=this.g.G/(this.g.G-2));for(d=0;6>d;d++){k=this.gb.ab[d];var n=k.Me;if(k.rc&&0<n.cf&&0<n.qg&&0<n.scale||a.cache){k.ya=!1;var r;r={};a.cache?(r.Wa=0,r.rb=0,r.sb=a.L-1,r.tb=a.ea-1):this.Tj(a,n,r);for(b=r.rb;b<=r.tb;b++)for(c=r.Wa;c<=r.sb;c++){var p=c+b*a.L+d*a.L*a.ea;(n=a.W[p])||(n=a.W[p]=new m.Gd);if(!n.K&&this.la<this.yd){if(0<this.vh.length){n.K=this.vh.shift();for(p=this.B.firstChild;p&&p.Fd&&(-1==p.Fd||p.Fd>=g);)p=p.nextSibling;
this.B.insertBefore(n.K,p);n.Oa=n.K.getContext("2d")}else if(this.gl<this.vk){this.gl++;n.K=document.createElement("canvas");n.K.width=this.g.G+2*this.g.Ka;n.K.height=this.g.G+2*this.g.Ka;n.Oa=n.K.getContext("2d");n.K.style[this.Va+"Origin"]="0% 0%";n.K.style.overflow="hidden";n.K.style.position="absolute";for(p=this.B.firstChild;p&&p.Fd&&(-1==p.Fd||p.Fd>=g);)p=p.nextSibling;this.B.insertBefore(n.K,p)}n.K&&(this.mi++,n.g=new Image,n.g.crossOrigin=this.crossOrigin,n.g.style[this.Va+"Origin"]="0% 0%",
n.g.style.position="absolute",n.g.style.overflow="hidden",n.K.Fd=g,n.g.onload=this.qo(n),n.g.onerror=this.rh(n),n.g.onabort=this.rh(n),n.g.setAttribute("src",this.pe(d,g,c,b)),a.cache&&this.Hb.push(n.g),0==this.la&&this.N&&this.N.ggReLoadedLevels&&this.N.ggReLoadedLevels(),this.la++,this.ya=!0)}else this.Fb++;if(n.K){p="";this.tc?(p+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",p+=" perspective("+f+"px) ",p+="translate3d(0px,0px,"+f+"px) "):p+="translate3d("+this.m.width/2+"px,"+
this.m.height/2+"px,"+f+"px) ";p+="rotateZ("+Number(this.M.c).toFixed(10)+"deg) ";p+="rotateX("+Number(this.j.c).toFixed(10)+"deg) ";p+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ";this.Da&&(p+="rotateX("+Number(-this.Da.pitch).toFixed(10)+"deg) ",p+="rotateZ("+Number(this.Da.M).toFixed(10)+"deg) ");var p=4>d?p+("rotateY("+-90*d+"deg) "):p+("rotateX("+(4==d?-90:90)+"deg) "),u;this.Se?(u=this.kf/this.g.G*(this.g.G/a.width)*(2*g+1),u=this.Jd?2/Math.tan(this.f.c*Math.PI/360)*u:2*u,p+=" scale("+
u*h*h+")"):u=1/(h*h);p+=" translate3d("+(1/h*c*this.g.G-this.g.Ka-a.width/2)+"px,";p+=1/h*b*this.g.G-this.g.Ka-a.width/2+"px,";p+=-a.width*u/2+"px)";k.rc&&(n.visible=!0,n.K?n.K.style[this.Va]=p:n.g&&(n.g.style[this.Va]=p))}}}}g--}for(f=0;f<this.g.I.length;f++){var a=this.g.I[f],t;for(t in a.W)a.W.hasOwnProperty(t)&&(n=a.W[t],!n.visible&&n.K&&(a.cache?(l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",n.K?n.K.style[this.Va]=l:n.g&&(n.g.style[this.Va]="")):(n.Oa&&n.Oa.clearRect(0,0,n.Oa.canvas.width,
n.Oa.canvas.height),this.vh.push(n.K),n.K?(l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",n.K.style[this.Va]=l,n.K.Fd=-1):n.loaded&&this.B.removeChild(n.g),n.K=null,n.g=null,n.Oa=null,delete a.W[t])))}this.Oc=!1}};b.prototype.ll=function(){var a=Math.round(this.fd());this.tc||this.kl(a);for(var d=0;d<this.Xa.length;d++){var c;c=this.Xa[d];c.pl(a);c.a.hidden=!1}};b.prototype.ql=function(){for(var a=Math.round(this.fd()),d=0;d<this.J.length;d++){var c;c=this.J[d];c.Yc||(c.pl(a),c.a.hidden=!1)}};
b.prototype.Vm=function(){for(var a=0;a<this.Xa.length;a++){var d;d=this.Xa[a];d.Xk()}for(a=0;a<this.J.length;a++)d=this.J[a],d.Yc||d.Xk()};b.prototype.Io=function(){for(var a=0;a<this.J.length;a++){var d;d=this.J[a];d.Yc||d.te()}for(a=0;a<this.Xa.length;a++)d=this.Xa[a],d.te()};b.prototype.Bc=function(a){this.be=!1;try{a?this.$a=a:this.$a=document.createElement("canvas");var d=this.Dd.offsetWidth-this.margin.left-this.margin.right,c=this.Dd.offsetHeight-this.margin.top-this.margin.bottom;if(100>
d||100>c)c=d=100;var b=window.devicePixelRatio||1;this.Te&&(b=1);this.B.style.width=d+"px";this.B.style.height=c+"px";this.$a.style.width=d+"px";this.$a.style.height=c+"px";this.$a.width=d*b;this.$a.height=c*b;this.$a.style.display="none";this.$a.style.Xo="none";this.B.insertBefore(this.$a,this.B.firstChild);a={stencil:!0,depth:!0,alpha:!1};this.Id&&10<=this.Zj[0]&&(a.antialias=!1);this.H=this.$a.getContext("webgl",a);this.H||(this.H=this.$a.getContext("experimental-webgl",a));if(this.H){var f=this.H;
this.jb.width=d*b;this.jb.height=c*b;f.clearColor(0,0,0,0);f.enable(this.H.DEPTH_TEST);f.viewport(0,0,500,500);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);this.ma.Ff();this.ma.Qg();this.ma.ak(this.Ye);this.ma.bk();this.C&&(this.C.Ff(),this.C.Bc());this.Ca&&(this.Ca.Ff(),this.Ca.Bc())}}catch(l){this.O(l)}this.H?this.$=!0:alert("Could not initialise WebGL!")};b.prototype.Xb=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Bd+a:this.Bd};
b.prototype.Od=function(a,d,c){var b=(new RegExp("%0*"+d,"i")).exec(a.toString());if(b){var b=b.toString(),f=c.toString();for(b.charAt(b.length-1)!=d&&(f=(1+c).toString());f.length<b.length-1;)f="0"+f;a=a.replace(b,f)}return a};b.prototype.pe=function(a,d,c,b){var f=this.g.ri-1-d,l=this.g.tk,k="x";switch(a){case 0:k="f";break;case 1:k="r";break;case 2:k="b";break;case 3:k="l";break;case 4:k="u";break;case 5:k="d"}for(var g=0;3>g;g++)l=this.Od(l,"c",a),l=this.Od(l,"s",k),l=this.Od(l,"r",d),l=this.Od(l,
"l",f),l=this.Od(l,"x",c),l=this.Od(l,"y",b),l=this.Od(l,"v",b),l=this.Od(l,"h",c);return this.Xb(l)};b.prototype.gi=function(){return this.pan.c};b.prototype.Dm=function(){return this.v.pan};b.prototype.Em=function(){for(var a=this.pan.c;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.Mg=function(){for(var a=this.pan.c-this.pan.Ci;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.lh=function(a){this.qa();isNaN(a)||(this.pan.c=Number(a));this.update()};b.prototype.Qi=function(a){this.qa();
isNaN(a)||(this.pan.c=Number(a)+this.pan.Ci);this.update()};b.prototype.wg=function(a,d){isNaN(a)||(this.lh(this.gi()+a),d&&(this.pan.d=a))};b.prototype.Vl=function(a,d){this.wg(a*this.Ed(),d)};b.prototype.ii=function(){return this.j.c};b.prototype.Mm=function(){return this.v.j};b.prototype.mh=function(a){this.qa();isNaN(a)||(this.j.c=Number(a));this.update()};b.prototype.xg=function(a,d){this.mh(this.ii()+a);d&&(this.j.d=a)};b.prototype.Xl=function(a,d){this.xg(a*this.Ed(),d)};b.prototype.Rn=function(a){this.qa();
isNaN(a)||(this.M.c=Number(a));this.update()};b.prototype.Lm=function(){return this.M.c};b.prototype.vf=function(){return this.f.c};b.prototype.pm=function(){return this.v.xd};b.prototype.Xf=function(a){this.qa();var d;switch(this.za()){case 4:d=170;break;case 12:d=360;break;case 9:d=355;break;default:d=170}2==this.kb&&(d=9999999999);!isNaN(a)&&0<a&&a<d&&(d=this.f.c,this.f.c=Number(a),d!=this.f.c&&this.update())};b.prototype.qj=function(a,d){this.Xf(this.vf()+a);d&&(this.f.d=a)};b.prototype.lf=function(a,
d){if(!isNaN(a)){var c;c=a/90*Math.cos(Math.min(this.f.c,90)*Math.PI/360);c=this.f.c*Math.exp(c);this.Xf(c);d&&(this.f.d=a)}};b.prototype.Pn=function(a,d){this.qa();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.j.c=d);this.update()};b.prototype.ag=function(a,d,c){this.qa();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.j.c=d);isNaN(c)||this.Xf(c);this.update()};b.prototype.Jn=function(){this.ag(this.pan.Pa,this.j.Pa,this.f.Pa)};b.prototype.Nn=function(a){this.Zf(a);this.$f(a);this.Yf(a)};b.prototype.Zf=function(a){this.A.yb=
a};b.prototype.Yf=function(a){this.A.Nf=a};b.prototype.$f=function(a){this.A.qd=a};b.prototype.moveTo=function(a,d,c,b,f,l){this.qa();if("_blank"!==a&&""!==a){this.v.active=!0;this.v.ue=!1;this.v.dj=!1;var k=a.toString().split("/");1<k.length&&(a=Number(k[0]),b=Number(d),d=Number(k[1]),2<k.length&&(c=Number(k[2])));isNaN(a)?this.v.pan=this.pan.c:this.v.pan=Number(a);isNaN(d)?this.v.j=this.j.c:this.v.j=Number(d);!isNaN(c)&&0<c&&180>c?this.v.f=Number(c):this.v.f=this.f.c;this.v.speed=!isNaN(b)&&0<b?
Number(b):1;isNaN(f)?this.v.M=this.M.c:this.v.M=Number(f);void 0!==l?!a||4!=l&&12!=l&&9!=l||(this.v.Bb=l):this.v.Bb=this.Za}};b.prototype.Zg=function(a){this.qa();var d=0,c=0,b=70,f=4,l=0,k=1;a.hasOwnProperty("pan")&&(d=Number(a.pan),this.v.pan=d);a.hasOwnProperty("tilt")&&(c=Number(a.tilt),this.v.j=c);a.hasOwnProperty("fov")&&(b=Number(a.fov),this.v.f=b);a.hasOwnProperty("projection")&&(f=Number(a.projection),this.v.Bb=f);a.hasOwnProperty("timingFunction")&&(l=Number(a.timingFunction));a.hasOwnProperty("speed")&&
(k=Number(a.speed));0>=k?(this.ag(d,c,b),this.Zc(f)):(a=new m.jk,a.Ta="__AutoMove",a.eg=this.pan.c,a.gg=this.j.c,a.wd=this.f.c,a.fg=this.Za,a.Pd=d,a.Qd=c,a.Xe=b,a.$c=f,a.Ee=!1,a.Yd=!1,a.Zd=!1,0==l&&(a.Yd=!0),1==l&&(a.Ee=!0,a.Yd=!0),2==l&&(a.Zd=!0),a.speed=k,this.v.lj=this.D,this.D=this.Jj(a),this.v.mj=(new Date).getTime(),this.v.dj=!0,this.v.active=!0,this.v.ue=!1,this.v.pan=d,this.v.j=c,this.v.f=b,this.Ad=!1)};b.prototype.dn=function(a){this.moveTo(this.pan.Pa,this.j.Pa,this.f.Pa,a)};b.prototype.en=
function(a,d){var c={};c.pan=this.pan.Pa;c.tilt=this.j.Pa;c.fov=this.f.Pa;c.projection=this.dh;c.timingFunction=d;c.speed=a;this.Zg(c)};b.prototype.Ll=function(a,d,c,b){var f=new m.Vg(this);f.type="point";f.pan=d;f.j=c;f.id=a;f.a={};f.a.player=this;f.Fe();f.a.hotspot=f;f.a.__div=document.createElement("div");f.a.__div.appendChild(b);this.P.push(f);f.a.__div.style.position="absolute";f.a.__div.style.left="-1000px";f.a.__div.style.top="-1000px";this.Ba.insertBefore(f.a.__div,this.Ba.firstChild);this.ya=
!0};b.prototype.Co=function(a,d,c){for(var b=0;b<this.P.length;b++){var f=this.P[b];f.id==a&&(f.pan=d,f.j=c,f.Fe())}this.ya=!0};b.prototype.Bn=function(a){for(var d=-1,c,b=0;b<this.P.length;b++)c=this.P[b],c.id==a&&(d=b);-1<d&&(c=this.P.splice(d,1).pop(),c.a&&c.a.__div&&this.Ba.removeChild(c.a.__div))};b.prototype.Gm=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&a.push(String(c.id))}return a};b.prototype.rm=function(a){for(var d=0;d<this.P.length;d++){var c=this.P[d];
if(c.id==a)return d={},d.id=a,d.pan=c.pan,d.tilt=c.j,c.a&&c.a.__div&&(d.div=c.a.__div),d}};b.prototype.ul=function(a,d){this.Y.start.x=a;this.Y.start.y=d;this.Y.ca.x=a;this.Y.ca.y=d;this.va.ca.x=a;this.va.ca.y=d;this.Ki++;this.pan.ed=this.pan.c;this.j.ed=this.j.c};b.prototype.sl=function(a,d){var c=this.Kb();this.pan.ed+=a*c/this.m.height;this.j.ed+=d*c/this.m.height;this.pan.c=this.pan.ed;this.j.c=this.j.ed};b.prototype.tl=function(a,d){this.Y.c.x=a;this.Y.c.y=d;this.Y.ba.x=this.Y.c.x-this.Y.ca.x;
this.Y.ba.y=this.Y.c.y-this.Y.ca.y;this.A.md&&(this.Y.ca.x=this.Y.c.x,this.Y.ca.y=this.Y.c.y,this.update())};b.prototype.qa=function(){this.s.active&&(this.s.active=!1,this.pan.d=0,this.j.d=0,this.f.d=0);this.v.active&&(this.v.active=!1,this.pan.d=0,this.j.d=0,this.f.d=0);this.hf=this.v.ue=!1;this.s.zi=!1;this.dd=.02;this.ff=0;this.s.cd&&(this.s.cd=!1,this.s.enabled=this.s.oj);this.Ke=(new Date).getTime()};b.prototype.wm=function(){return this.Ke};b.prototype.Pj=function(a,d){a||(a=this.ra.x,d=this.ra.y);
var c=this.m.height/(2*Math.tan(this.f.c*Math.PI/360)),b=a-this.m.width/2,f=d-this.m.height/2,l={};l.pan=180*Math.atan(b/c)/Math.PI;l.tilt=180*Math.atan(-f/Math.sqrt(b*b+c*c))/Math.PI;return l};b.prototype.Im=function(a,d){var c,b;a||(a=this.ra.x,d=this.ra.y);if(2===this.kb)b=this.f.c/this.m.height,c=-(a-this.m.width/2)*b+this.pan.c,b=-(d-this.m.height/2)*b+this.j.c;else{b=new m.sa(0,0,1);c=this.Pj(a,d);b.me(-c.tilt);b.Wf(c.pan);b.me(-this.j.c);b.Wf(-this.pan.c);b.me(-this.Da.pitch);b.jh(this.Da.M);
for(c=b.Nl()-180;-180>c;)c+=360;b=b.Ol()}var f={};f.pan=c;f.tilt=b;return f};b.prototype.nd=function(a){return a==this.control?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.Oh=function(a,d){var c=this.fd(),b,f,l;for(b=0;b<this.J.length+this.Xa.length;b++){var k;k=b<this.J.length?this.J[b]:this.Xa[b-this.J.length];if(k.xb)return k}for(b=0;b<this.J.length+this.Xa.length;b++)if(k=b<this.J.length?this.J[b]:
this.Xa[b-this.J.length],!k.Yc){var g=[],h=new m.sa,n,r,p;0<k.f&&(r=Math.tan(k.f/2*Math.PI/180),p=0<k.Ac?r*k.Sc/k.Ac:r,k.jd&&1!=k.jd&&(p*=k.jd));for(n=0;4>n;n++){switch(n){case 0:h.Ya(-r,-p,-1);break;case 1:h.Ya(r,-p,-1);break;case 2:h.Ya(r,p,-1);break;case 3:h.Ya(-r,p,-1)}h.wa(-k.j*Math.PI/180);h.Ea(k.pan*Math.PI/180);h.Ea(-this.pan.c*Math.PI/180);h.wa(this.j.c*Math.PI/180);h.mb(this.M.c*Math.PI/180);g.push(h.clone())}g=this.Qh(g);if(0<g.length){for(n=0;n<g.length;n++)h=g[n],.1>h.z?(l=-c/h.z,f=this.m.width/
2+h.x*l,l=this.m.height/2+h.y*l):l=f=0,h.hc=f,h.Cb=l;if(this.Yj(g,a,d))return k}}return null};b.prototype.Sg=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.cn=function(a){this.ml(a);if(this.Pc)this.Pc.onclick();this.Cd=null;if(!this.A.yb){a=a?a:window.event;if((a.which||0==a.which||1==a.which)&&this.nd(a.target)){var b;(b=this.Oh(this.ra.x,this.ra.y))&&b.Tc&&(this.Cd=b);this.ul(a.pageX,
a.pageY);this.X.hb=!0;this.X.startTime=(new Date).getTime();a.preventDefault();this.qa()}this.Y.ba.x=0;this.Y.ba.y=0}};b.prototype.af=function(a,b){var c=this.w.Zi;c.enabled&&(this.Aa!=this.pb&&0<=a&&0<=b&&""!=this.Aa.title?(this.ua.innerHTML=this.Aa.title,this.ua.style.color=this.fa(c.$i,c.Yi),c.background?this.ua.style.backgroundColor=this.fa(c.Qb,c.Pb):this.ua.style.backgroundColor="transparent",this.ua.style.border="solid "+this.fa(c.Tb,c.Sb)+" "+c.Kh+"px",this.ua.style.borderRadius=c.Jh+"px",
this.ua.style.textAlign="center",0<c.width?(this.ua.style.left=a-c.width/2+this.margin.left+"px",this.ua.style.width=c.width+"px"):(this.ua.style.width="auto",this.ua.style.left=a-this.ua.offsetWidth/2+this.margin.left+"px"),this.ua.style.height=0<c.height?c.height+"px":"auto",this.ua.style.top=b+25+ +this.margin.top+"px",this.ua.style.visibility="inherit",this.ua.style.overflow="hidden"):(this.ua.style.visibility="hidden",this.ua.innerHTML=""))};b.prototype.ml=function(a){var b=this.de();this.Sg()?
(this.ra.x=a.pageX-this.margin.left,this.ra.y=a.pageY-this.margin.top):(this.ra.x=a.pageX-b.x,this.ra.y=a.pageY-b.y);return b};b.prototype.Ve=function(a){a&&null!==a&&"object"==typeof a?this.Aa=a:this.Aa=this.pb;this.Aa.Fe&&this.Aa.Fe();this.hotspot=this.Aa};b.prototype.bn=function(a){a=a?a:window.event;var b=this.ml(a);if(!this.A.yb){this.s.active&&(this.s.Xg=(new Date).getTime());this.X.hb&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.tl(a.pageX,a.pageY),this.qa());var c=!1;if(this.Aa==
this.pb||"poly"==this.Aa.type){var e=this.pb;0<this.P.length&&this.nd(a.target)&&(e=this.Ph(this.ra.x,this.ra.y));this.kh(e);this.af(a.pageX-b.x,a.pageY-b.y);0!=e&&(c=!0)}a=null;c||(a=this.Oh(this.ra.x,this.ra.y));this.s.Dg&&(this.s.Dg=!1);this.Ba.style.cursor=this.Aa!=this.pb&&this.Aa.Ie&&c||a&&a.Cf?"pointer":"default"}};b.prototype.kh=function(a){!1===a&&(a=this.pb);this.Aa!=a&&(this.Aa!=this.pb&&(0<this.w.mode&&(this.Aa.fb=0),this.Qa&&this.Qa.hotspotProxyOut&&this.Qa.hotspotProxyOut(this.Aa.id)),
a!=this.pb?(this.Ve(a),this.Qa&&this.Qa.hotspotProxyOver&&this.Qa.hotspotProxyOver(this.Aa.id),0<this.w.mode&&(this.w.fb=1,this.Aa.fb=1)):(this.Ve(this.pb),0<this.w.mode&&(this.w.fb=0)),this.ha&&this.ha.changeCurrentHotspot(this.Aa.id))};b.prototype.an=function(a){a=a?a:window.event;this.Wg=-1;if(!this.A.yb&&this.X.hb){this.qa();a.preventDefault();this.X.hb=!1;a=(new Date).getTime();var b;b=Math.abs(this.Y.start.x-this.Y.ca.x)+Math.abs(this.Y.start.y-this.Y.ca.y);400>a-this.X.startTime&&0<=b&&20>
b&&(this.Cd&&this.Cd.Tc(),(b=this.Ph(this.ra.x,this.ra.y))&&this.jl(b),b=Math.abs(this.Y.pd.x-this.Y.ca.x)+Math.abs(this.Y.pd.y-this.Y.ca.y),700>a-this.Jf&&0<=b&&20>b?(this.A.Wh&&this.uh(),this.Jf=0):this.Jf=a,this.Y.pd.x=this.Y.ca.x,this.Y.pd.y=this.Y.ca.y)}};b.prototype.wk=function(a){if(!this.A.qd&&(a=a?a:window.event,this.nd(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.A.ck&&(b=-b);a.axis&&(-1==this.Wg?this.Wg=a.axis:this.Wg!=a.axis&&(b=0));var c=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&
Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.lf(c*this.A.al,!0),this.update());a.preventDefault();this.qa()}};b.prototype.yo=function(a){a||(a=window.event);var b=a.touches,c=this.de();this.ra.x=b[0].pageX-c.x;this.ra.y=b[0].pageY-c.y;this.Ze=this.Cd=null;this.bi&&(this.bi=!1,this.km());if(!this.A.yb){if(!this.X.hb&&b[0]){this.X.startTime=(new Date).getTime();this.X.start.x=b[0].pageX;this.X.start.y=b[0].pageY;this.X.ca.x=b[0].pageX;this.X.ca.y=b[0].pageY;this.kc=b[0].target;
if(this.nd(a.target)){var e;(e=this.Oh(this.ra.x,this.ra.y))&&e.Tc&&(this.Cd=e);if(e=this.Ph(this.ra.x,this.ra.y))this.O(e),this.Ze=e,this.kh(e),e=this.xf(a),this.af(e.x-c.x,e.y-c.y);this.ul(b[0].pageX,b[0].pageY);this.X.Cj=b[0].identifier;this.X.hb=!0;a.preventDefault();this.qa()}if(this.kc){c=this.kc;for(e=!1;c&&c!=this.control;){if(c.onmouseover)c.onmouseover();c.onmousedown&&!e&&(c.onmousedown(),e=!0);c=c.parentNode}e&&a.preventDefault()}}1<b.length&&(this.X.hb=!1);!this.ki&&2==b.length&&b[0]&&
b[1]&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.cl=Math.sqrt(a*a+b*b),this.f.Ne=this.f.c);this.Y.ba.x=0;this.Y.ba.y=0}};b.prototype.km=function(){this.Ah&&this.o.a&&(this.o.Wc||this.o.a.play(),this.o.a.muted=!1);if(this.Id){var a=this.Ha.createOscillator(),b=this.Ha.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.Ha.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.S.length;b++){var c=this.S[b];(!this.Cc(c.id)||c.ia)&&
0<=c.loop&&c.autoplay&&(c.ia&&c.ze(),this.ke(c.id,c.loop))}for(b=0;b<this.J.length;b++)c=this.J[b],!this.Cc(c.id)&&c.autoplay&&this.Ah&&this.ke(c.id,c.loop)};b.prototype.xo=function(a){a||(a=window.event);var b=a.touches,c=this.de();this.ra.x=b[0].pageX-c.x;this.ra.y=b[0].pageY-c.y;if(!this.A.yb){b[0]&&(this.X.ca.x=b[0].pageX,this.X.ca.y=b[0].pageY);if(this.X.hb){a.preventDefault();for(var e=0;e<b.length;e++)if(b[e].identifier==this.X.Cj){this.tl(b[e].pageX,b[e].pageY);break}this.Ze&&(e=this.xf(a),
this.af(e.x-c.x,e.y-c.y));this.qa()}2==b.length&&b[0]&&b[1]&&(this.X.hb=!1,this.ki||(this.A.qd||(c=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.xj=Math.sqrt(c*c+b*b),this.va.f.active=!0,this.va.f.Wb=this.f.Ne*Math.sqrt(this.f.cl/this.f.xj),4==this.za()&&this.va.f.Wb>this.f.max&&(this.va.f.Wb=this.f.max),this.va.f.Wb<this.f.min&&(this.va.f.Wb=this.f.min)),this.qa(),a.preventDefault()))}};b.prototype.wo=function(a){var b,c=this.de(),e=!1;if(!this.A.yb){this.X.hb&&this.qa();var f=(new Date).getTime(),
l;b=Math.abs(this.X.start.x-this.X.ca.x)+Math.abs(this.X.start.y-this.X.ca.y);if(0<=b&&20>b){a.preventDefault();e=!0;this.nd(this.kc)&&this.Cd&&this.Cd.Tc();if(this.kc)for(b=this.kc,l=!1;b&&b!=this.control;)b.onclick&&!l&&(b.onclick(),l=!0,e=!1),b=b.parentNode;b=Math.abs(this.X.pd.x-this.X.ca.x)+Math.abs(this.X.pd.y-this.X.ca.y);if(700>f-this.Jf&&0<=b&&20>b){a.preventDefault();if(this.nd(this.kc)&&this.A.Wh){var k=this;setTimeout(function(){k.uh()},1)}if(this.kc)for(b=this.kc,l=!1;b&&b!=this.control;)b.ondblclick&&
!l&&(b.ondblclick(),l=!0,e=!1),b=b.parentNode;this.Jf=0}else this.Jf=f;this.X.pd.x=this.X.ca.x;this.X.pd.y=this.X.ca.y}if(this.kc)for(a.preventDefault(),b=this.kc,l=!1;b&&b!=this.control;){if(b.onmouseout)b.onmouseout();b.onmouseup&&!l&&(b.onmouseup(),l=!0);b=b.parentNode}a=this.xf(a);this.af(a.x-c.x,a.y-c.y);this.Ze&&e&&this.jl(this.Ze);this.kc=null;this.X.hb=!1;this.kh(this.pb);this.Ze=null}};b.prototype.vo=function(a){var b=this.de();this.A.yb||(this.X.hb=!1);this.Ze=null;this.kh(this.pb);a=this.xf(a);
this.af(a.x-b.x,a.y-b.y)};b.prototype.Xm=function(){return null!=this.kc||this.X.hb};b.prototype.xk=function(a){!this.he&&window.MSGesture&&(this.O("setup gesture"),this.he=new MSGesture,this.he.target=this.control);this.he&&this.he.addPointer(a.pointerId)};b.prototype.Lj=function(a){this.ki=!0;this.$g=1;this.A.yb||this.A.qd||(a.touches?(this.kc=a.touches.target,this.nd(a.target)&&(a.preventDefault(),this.f.Ne=this.f.c,this.qa())):(a.preventDefault(),this.f.Ne=this.f.c,this.qa()))};b.prototype.mm=
function(a){this.A.yb||this.A.qd||!this.nd(a.target)||(a.preventDefault(),this.va.f.active=!0,this.va.f.Wb=this.f.Ne/Math.sqrt(a.scale),4==this.za()&&this.va.f.Wb>this.f.max&&(this.va.f.Wb=this.f.max),this.update(),this.qa())};b.prototype.fn=function(a){this.A.yb||this.A.qd||(a.preventDefault(),1!=a.scale&&(this.va.f.active=!0,this.$g*=a.scale,this.va.f.Wb=this.f.Ne/Math.sqrt(this.$g),4==this.za()&&this.va.f.Wb>this.f.max&&(this.va.f.Wb=this.f.max),this.update(),this.qa()))};b.prototype.Kj=function(a){this.A.yb||
this.A.qd||(this.va.f.active=!1,a.preventDefault(),this.qa(),this.he&&this.he.reset&&this.he.reset())};b.prototype.Ym=function(a){this.A.Nf||(this.isFullscreen&&a.preventDefault(),this.fe=a.keyCode,this.qa())};b.prototype.Zm=function(a){this.fe&&(this.fe=0,a.preventDefault(),this.qa())};b.prototype.ln=function(){this.fe=0};b.prototype.bh=function(){this.isFullscreen&&(this.Sg()||this.exitFullscreen(),this.Sg()&&(this.U.style.left="0px",this.U.style.top="0px"))};b.prototype.jl=function(a){this.Qa&&
this.Qa.hotspotProxyClick&&this.Qa.hotspotProxyClick(a.id);""!=a.url&&(this.Di(a.url,a.target),this.af(-1,-1))};b.prototype.Ed=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.f.c,90)/360))};b.prototype.Ek=function(){var a=this;setTimeout(function(){a.Ek()},100);9!=a.gh||a.dk||requestAnimationFrame(function(){a.Xc("restart recover timer")});10<a.gh&&1<a.Ki&&(a.Xc("recover timer - disabling requestAnimationFrame"),a.dk=!0,a.Ei());a.gh++};b.prototype.Vk=function(a){var b={So:{value:0,name:"pan"},
To:{value:1,name:"tilt"},Qo:{value:2,name:"fov"}},c=0,e=0,f=0,l;for(l in b){var k=b[l],g;for(g=Math.floor(a);!this.He(g,k.value)&&0<g;)g--;var h=this.He(g,k.value),n=this.zm(h);if(n){g=new m.lc(h.time,h.value);var r=new m.lc(n.time,n.value),p=(a-h.time)/(n.time-h.time);if(0!=h.type||0!=n.type&&3!=n.type)if(3==h.type)g=h.value;else{var p=new m.lc,u=new m.lc,t=n.time-h.time;0==h.type?u.Ya(h.time+.3*t,h.value):u.Ya(h.Vd,h.Wd);0==n.type||3==n.type?p.Ya(n.time-.3*t,n.value):p.Ya(n.Ud,n.Ic);h=new m.lc;
h.Ih(g,r,u,p,a);g=h.y}else h=new m.lc,h.ld(g,r,p),g=h.y}else g=h.value;switch(k.value){case 0:k=this.pan.c;if(this.Ad){if(2!=this.kb){for(;360<g;)g-=360;for(;-360>g;)g+=360}c=g-k;2!=this.kb&&(180<c&&(c-=360),-180>c&&(c+=360));this.pan.c=this.pan.c+c*this.dd}else this.pan.c=g;break;case 1:k=this.j.c;this.Ad?(e=g-k,this.j.c=this.j.c+e*this.dd):this.j.c=g;break;case 2:k=this.f.c,this.Ad?(f=g-k,this.f.c=this.f.c+f*this.dd):this.f.c=g}}b=this.za();for(l=Math.floor(a);!this.He(l,3)&&0<l;)l--;l=this.He(l,
3);k=a-l.time;this.Ad&&-1!=this.gf&&this.ug+this.Fh>a?(b=this.wf(this.gf),this.f.c>b?this.ug=a:(a=(a-this.ug)/this.Fh,a=Math.min(1,a),this.Zc(this.Za,this.gf,1-a))):0==l.nb||k>l.nb-.3?this.Zc(l.value):(a=k/l.nb,this.Zc(b,l.value,1-a));this.Ad&&(c=Math.sqrt(c*c+e*e+f*f),.3>c&&(this.Ad=!1,this.dd=.02,this.ff=0),0<this.ff&&c>this.ff&&(this.dd+=.01,this.dd=Math.min(this.dd,1)),this.ff=c);this.update()};b.prototype.rn=function(a){var b,c=this.v.speed;this.v.pi&&(c=c*(a.getTime()-this.v.pi)/60,5<c&&(c=
5),.2>c&&(c=.2));this.v.pi=a.getTime();this.s.Jg&&(this.ma.ready()||4==this.Za)&&this.Lg()&&(this.s.Jg=!1,this.s.active=!0,this.qb.ud=!0,this.qb.ai=!1);if(this.v.active||0!=this.v.Bb&&this.ma.ready()){if(this.v.dj&&"__AutoMove"==this.D.Ta)if(b=a.getTime()-this.v.mj,c=b/100,c>=this.D.length){if(this.Ia.splice(this.Ia.indexOf(this.D),1),this.v.active=!1,this.D=this.v.lj,this.v.Bb=0,b=this.s.cd,this.ag(this.v.pan,this.v.j,this.v.f),this.v.Ai&&(this.v.Ai=!1,this.s.zi=!0,this.s.active=!0,this.s.cd=b),
this.onMoveComplete)this.onMoveComplete()}else this.Vk(c);else{this.pan.d=this.v.pan-this.pan.c;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.j.d=this.v.j-this.j.c;this.M.d=this.v.M-this.M.c;this.f.d=this.v.f-this.f.c;b=c*this.Ed();var e=Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.M.d*this.M.d+this.f.d*this.f.d),f=this.pan.c-this.v.nk,g=this.j.c-this.v.qk,k=this.M.c-this.v.pk,h=this.f.c-this.v.mk;100*Math.sqrt(f*f+g*g+
k*k+h*h)<b&&0==this.v.Bb&&(this.v.ue=!0);this.v.nk=this.pan.c;this.v.qk=this.j.c;this.v.pk=this.M.c;this.v.mk=this.f.c;if(100*e<b||this.v.ue){if(this.pan.d=0,this.j.d=0,this.M.d=0,this.f.d=0,this.v.active&&(this.v.active=!1,this.pan.c=this.v.pan,this.j.c=this.v.j,this.M.c=this.v.M,this.f.c=this.v.f,this.onMoveComplete))this.onMoveComplete()}else e=e>5*b?b/e:.2,this.pan.d*=e,this.j.d*=e,this.f.d*=e;this.pan.c+=this.pan.d;this.j.c+=this.j.d;this.M.c+=this.M.d;this.f.c+=this.f.d;0!=this.v.Bb&&(this.v.Bb!=
this.Za?(c=this.wf(this.v.Bb),this.vf()>c?(this.f.c+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.M.d*this.M.d)/b,1))*b,this.f.d)-this.f.d,this.v.f=this.f.c):(this.gc=this.Za,this.Za=this.v.Bb,this.O("New projection from Target:"+this.Za),this.Tf=this.v.Vf=0,this.ma.Qg())):1>this.v.Vf?(this.v.Vf=Math.min(1,this.v.Vf+.05*c),this.Tf=this.v.Vf):(this.gc=0,this.v.Bb=0,this.ma.Qg()))}this.Ke=a.getTime();this.update()}else if(this.s.active){b=a.getTime()-this.s.startTime;
this.s.Xg<this.s.startTime&&(this.s.Xg=this.s.startTime);if((this.s.ej||this.s.cd||this.qb.ud)&&0<this.Ia.length){c=b/100;e=!1;if(this.zb!=this.D.Ta){for(b=0;b<this.Ia.length;b++)if(""==this.zb||""!=this.zb&&this.Ia[b].Ta==this.zb){e=!0;this.D=this.Ia[b];this.zb=this.D.Ta;break}!e&&0<this.Ia.length&&(e=!0,this.D=this.Ia[0],this.zb=this.D.Ta)}else e=!0;if(e)if(b=(f=this.o.a&&this.o.Wc)&&this.s.Xi&&!this.qb.ud,this.hf){e=c;if(b)for(this.o.a.currentTime<this.nj&&this.Hh&&(this.Gh++,this.Hh=!1),e=10*
(this.Gh*this.o.a.duration+this.o.a.currentTime),this.nj=this.o.a.currentTime,.05>this.o.a.duration-this.o.a.currentTime&&(this.Hh=!0);e>=10*this.ve;)e-=10*this.ve;if(!f&&c>=this.D.length||f&&!b&&c>=this.D.length||f&&b&&this.D.Ta!=this.D.zk&&c>=this.D.length){this.hf=!1;if(this.qb.ud){this.qb.ud=!1;this.qb.ai=!0;this.s.active=this.C.Td;this.Ia.splice(this.Ia.indexOf(this.D),1);0<this.Ia.length&&(this.D=this.Ia[0]);this.zb="";this.Zf(this.C.yi);this.$f(this.C.ij);this.Yf(this.C.oi);this.C.Td=!1;this.Ke=
a.getTime();return}this.zb=this.D.zk;if(this.zb==this.D.Ta){if(1<this.La.length&&0<this.s.ah){if(this.s.Bi){b=1E3;do c=this.La[Math.floor(Math.random()*this.La.length)];while(b--&&c==this.Vb)}else c=this.Oj();this.ie("{"+c+"}");this.s.startTime=a.getTime();this.hf=!1;this.s.active=!0;this.C.Td=!0}}else this.If&&this.D.yk!=this.Vb&&(this.ie("{"+this.D.yk+"}"),this.C.enabled?(this.s.active=!1,this.C.Td=!0):this.s.active=!0),this.s.startTime=a.getTime()}else this.Vk(e)}else if(c=this.D.ja[0],e=this.D.ja[1],
f=this.D.ja[2],g=this.D.ja[3],3!=g.ub&&(g=0),this.s.zi||this.v.ue||this.qb.ud||b){if(this.hf=!0,this.s.startTime=a.getTime(),this.Ad=b){for(this.ve=this.Gh=0;this.ve<this.D.length/10;)this.ve+=this.o.a.duration;e=10*this.o.a.currentTime;for(b=Math.floor(e);!this.He(b,3)&&0<b;)b--;b=this.He(b,3);b.value==this.Za?this.gf=-1:(this.gf=b.value,this.ug=e,this.Fh=Math.max(5,b.time+b.nb-e))}}else{b=this.s.cd;k={};for(k.pan=c.value;360<k.pan;)k.pan-=360;for(;-360>k.pan;)k.pan+=360;k.tilt=e.value;k.fov=f.value;
k.projection=g?g.value:4;k.timingFunction=3;k.speed=1;this.v.Ai=!0;this.Zg(k);this.s.active=!0;this.s.cd=b}}else if(0<this.s.ah&&this.If&&b>=1E3*this.s.ah){if(1<this.La.length){if(this.s.Bi){b=1E3;do c=this.La[Math.floor(Math.random()*this.La.length)];while(b--&&c==this.Vb)}else b=this.La.indexOf(this.Vb),b++,b>=this.La.length&&(b=0),c=this.La[b];this.s.startTime=a.getTime();this.s.od=a.getTime();this.s.timeout=0;this.ie("{"+c+"}");this.s.active=!0;this.C.Td=!0}}else b=a.getTime(),e=c=1E3/60,0!=this.s.od&&
(e=b-this.s.od),this.j.d=this.s.sh*(0-this.j.c)/100,this.f.d=this.s.sh*(this.f.Pa-this.f.c)/100,this.pan.d=.95*this.pan.d+-this.s.speed*this.Ed()*.05,c=e/c,this.pan.c+=this.pan.d*c,this.j.c+=this.j.d*c,this.f.c+=this.f.d*c,this.s.od=b,this.update();3E3<a.getTime()-this.s.Xg&&!this.s.Dg&&(this.Ba.style.cursor="none",this.s.Dg=!0)}else!this.qb.ai&&1E3<a.getTime()-this.Ke&&(this.Ia.splice(this.Ia.indexOf(this.D),1),this.D=this.uf(!1),this.zb=this.D.Ta,this.s.active=!1,this.s.Jg=!0),this.s.enabled&&!this.X.hb&&
a.getTime()-this.Ke>1E3*this.s.timeout&&(this.s.ig&&this.Lg()||!this.s.ig)&&(this.s.active=!0,this.s.startTime=a.getTime(),this.s.od=0,this.pan.d=0,this.j.d=0,this.f.d=0),!this.va.enabled||0!=this.fe||this.X.hb||0==this.pan.d&&0==this.j.d&&0==this.f.d||(this.pan.d*=.9,this.j.d*=.9,this.f.d*=.9,this.pan.c+=this.pan.d,this.j.c+=this.j.d,this.lf(this.f.d),1E-4>this.pan.d*this.pan.d+this.j.d*this.j.d+this.f.d*this.f.d&&(this.pan.d=0,this.j.d=0,this.f.d=0),this.update())};b.prototype.tn=function(a){var b=
this.C;if(b.zd){var c=a.getTime()-b.yl,c=c/(1E3*b.xl);if(1<=c){b.zd=!1;for(c=0;c<this.Fa.kg.length;c++)this.Fa.Zh(this.Fa.kg[c]);b.Ui=a.getTime();this.el();b.re=!0;0==b.Ob||b.ef||(4==b.Ob?(this.D=this.uf(!0,b.ne,b.oe,b.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(b.ne,b.oe,b.xd,b.Rd,0,b.$c))}else b.Dk(c)}else b.re&&(c=a.getTime()-b.Ui,c/=1E3*b.vg,1<=c?(b.re=!1,this.Ke=a.getTime(),this.update(),0!=b.Ob&&b.ef&&(4==b.Ob?(this.D=this.uf(!0,b.ne,b.oe,b.xd),this.zb=this.D.Ta,this.s.active=
!0,this.qb.ud=!0):this.moveTo(b.ne,b.oe,b.xd,b.Rd,0,b.$c)),4!=b.Ob&&(this.Zf(b.yi),this.$f(b.ij),this.Yf(b.oi),this.s.active=b.Td,b.Td=!1),this.s.od=0,this.ga&&this.Rh(),this.yg=!1):b.Dk(c));b=this.mn;b.Ql&&(b.Fg?a.getTime()-b.Xh>=1E3*b.fm&&(b.Fg=!1):(b.current+=b.Jc,0>b.current&&(b.current=0,b.Jc=-b.Jc,b.Fg=!0,b.Xh=a.getTime()),1<b.current&&(b.current=1,b.Jc=-b.Jc,b.Fg=!0,b.Xh=a.getTime())))};b.prototype.xn=function(){var a,b=this.w;if(0<b.eb.length){for(a=0;a<b.eb.length;a++)b.Ec[a]!=b.Eb[a]&&(b.Ec[a]>
b.Eb[a]?(b.Eb[a]+=.05,b.Ec[a]<b.Eb[a]&&(b.Eb[a]=b.Ec[a])):(b.Eb[a]-=.05,b.Ec[a]>b.Eb[a]&&(b.Eb[a]=b.Ec[a],-1!=b.nh.indexOf(b.eb[a])&&(b.nh.splice(b.nh.indexOf(b.eb[a]),1),b.eb.splice(a,1),b.Ec.splice(a,1),b.Eb.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.P.length;a++){var c=this.P[a];"poly"==c.type&&c.fb!=c.oa&&(c.fb>c.oa?(c.oa+=b.Jc,c.fb<c.oa&&(c.oa=c.fb)):(c.oa-=b.Jc,c.fb>c.oa&&(c.oa=c.fb)),this.update())}3==b.mode&&b.fb!=b.oa&&(b.fb>b.oa?(b.oa+=b.Jc,b.fb<b.oa&&(b.oa=b.fb)):(b.oa-=
b.Jc,b.fb>b.oa&&(b.oa=b.fb)),this.update())};b.prototype.wn=function(){var a=this.va;this.X.hb&&(this.A.md?(a.ba.x=.4*(this.Y.ca.x-a.ca.x),a.ba.y=.4*(this.Y.ca.y-a.ca.y),a.ca.x+=a.ba.x,a.ca.y+=a.ba.y):(a.ba.x=.1*-this.Y.ba.x*this.A.sensitivity/8,a.ba.y=.1*-this.Y.ba.y*this.A.sensitivity/8),this.sl(a.ba.x,a.ba.y),this.update());a.f.active&&(this.qj(.4*(a.f.Wb-this.f.c)),.001>Math.abs(a.f.Wb-this.f.c)/this.f.c&&(a.f.active=!1),this.update());if(a.enabled&&(0!=a.ba.x||0!=a.ba.y)&&!this.X.hb){var b=.9*
(1-a.Oi);a.ba.x=b*a.ba.x;a.ba.y=b*a.ba.y;.01>a.ba.x*a.ba.x+a.ba.y*a.ba.y?(a.ba.x=0,a.ba.y=0):(this.sl(a.ba.x,a.ba.y),this.update())}};b.prototype.sn=function(){if(this.A.Rk&&this.A.md){var a=new g;a.pan=this.pan.c;a.j=this.j.c;a.f=this.f.c;this.Be(a);this.Be(a);this.Be(a);var b=a.pan-this.pan.c,c=a.j-this.j.c,a=a.f-this.f.c;if(0!=b||0!=c||0!=a){var e;e=.2+.9*Math.min((Math.abs(b)+Math.abs(c)+Math.abs(a))/Math.abs(Math.min(this.f.c,100))*.3,1);this.pan.c+=b*e;this.j.c+=c*e;this.f.c+=a*e;this.va.Oi=
.3;this.update()}else this.va.Oi=0}else this.zg();if(2!=this.kb){for(;360<this.pan.c;)this.pan.c-=360;for(;-360>this.pan.c;)this.pan.c+=360}};b.prototype.un=function(){if(0!=this.fe){var a=this.A.sensitivity/8;switch(this.fe){case 37:case 65:this.wg(a*this.Ed(),!0);break;case 38:case 87:this.xg(a*this.Ed(),!0);break;case 39:case 68:this.wg(-a*this.Ed(),!0);break;case 40:case 83:this.xg(-a*this.Ed(),!0);break;case 43:case 107:case 16:case 81:this.A.ui||this.lf(-a,!0);break;case 17:case 18:case 109:case 45:case 91:case 69:this.A.ui||
this.lf(a,!0)}this.update()}};b.prototype.vn=function(){if(!this.Lg()&&this.Df&&5<this.g.Ok){var a,b=0,c=this.Hb.length;if(this.ng)c=50,this.Yh<c&&this.Yh++,b=this.Yh;else for(a=0;a<c;a++)(this.Hb[a].complete&&this.Hb[a].src!=this.Aj||""==this.Hb[a].src)&&b++;b==c?(this.eh=1,this.isLoaded=!0,this.N&&this.N.ggLoaded&&this.N.ggLoaded(),this.s.ig&&this.s.enabled&&!this.v.active&&!this.C.zd&&(this.s.active=!0,this.s.startTime=(new Date).getTime(),this.s.od=0)):this.eh=b/(1*c)}};b.prototype.Ei=function(){var a=
new Date;this.vb&&""!==this.ce&&!this.ha&&document.hasOwnProperty(this.ce)&&document[this.ce].setPan&&0==this.jm--&&(this.ha=document[this.ce],this.Fc=this.$=!1,this.ta&&(this.ta.style.visibility="hidden"),this.ha.setLocked(!0),this.ha.setSlaveMode(!0),this.ha.readConfigString(this.Uh),this.Xc("Flash player '"+this.ce+"' connected."));this.Kg++;120<=this.Kg&&(this.O("Fps: "+1E3*this.Kg/(a.getTime()-this.kk)),this.kk=a.getTime(),this.Kg=0);this.Ki=this.gh=0;this.cj&&(this.bd(),this.cj=!1);this.wn();
this.un();this.vn();this.rn(a);this.sn();this.tn(a);this.ma.Fo();(0<=this.w.mode||0<this.w.eb.length)&&this.xn();this.yh();this.ya&&(0<this.Gg?this.Gg--:(this.ya=!1,this.Gg=0),this.C.re||this.C.zd||this.mg());var b=this;setTimeout(function(){b.Ei()},1E3/60)};b.prototype.wf=function(a){switch(a){case 4:a=Math.min(110,this.f.max);break;case 12:a=Math.min(270,this.f.wi);a=Math.min(360*this.Sd(),a);a=Math.min(360/this.Sd(),a);break;case 9:a=Math.min(270,this.f.xi);break;default:a=90}return a};b.prototype.ol=
function(){var a=this;setTimeout(function(){a.We(!1)},10);setTimeout(function(){a.We(!1)},100)};b.prototype.yh=function(){this.Th.Dj(this.pan.c,this.j.c);for(var a=0;a<this.S.length+this.J.length;a++){var b;if(a<this.S.length)b=this.S[a];else if(b=this.J[a-this.S.length],b.Yc)continue;b.yh()}};b.prototype.yj=function(a){var b="",c,e,f,g,k,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),
g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),c=c<<2|e>>4,e=(e&15)<<4|g>>2,f=(g&3)<<6|k,b+=String.fromCharCode(c),64!=g&&(b+=String.fromCharCode(e)),64!=k&&(b+=String.fromCharCode(f));while(h<a.length);return b};b.prototype.fo=function(a,b){var c,e,f=this;if(0!=f.Qf.length||!f.A.Ef||f.A.pf||f.A.Ag)if(f.Pc)f.Pc=null,f.U.removeChild(f.Pc);else{f.Pc=document.createElement("div");
var g=f.Pc;c="left: "+a+"px;"+("top:\t "+b+"px;")+"z-index: 32000;";c+="position:relative;";c+="display: table;";c+="background-color: white;";c+="border: 1px solid lightgray;";c+="box-shadow: 1px 1px 3px #333;";c+="font-family: Verdana, Arial, Helvetica, sans-serif;";c+="font-size: 9pt;";c+="opacity : 0.95;";g.setAttribute("style",c);g.setAttribute("class","gg_contextmenu");c=document.createElement("style");e=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");c.type="text/css";
c.styleSheet?c.styleSheet.cssText=e.nodeValue:c.appendChild(e);g.appendChild(c);for(e=0;e<f.Qf.length;e++){var k=f.Qf[e],h=document.createElement("div");c="text-align: left;";c+="margin: 0;";c+="padding: 5px 20px;";c+="vertical-align: left;";h.setAttribute("style",c);h.setAttribute("class","gg_context_row");c=document.createElement("a");c.href=k.url;c.target="_blank";c.innerHTML=k.text;c.setAttribute("style","color: black; text-decoration: none;");h.appendChild(c);g.appendChild(h)}0<f.Qf.length&&
(!f.A.Ef||f.A.pf||f.A.Ag)&&g.appendChild(document.createElement("hr"));if(f.A.Ag&&f.$){k=[];k.push({text:"Rectilinear Projection",Uf:4});k.push({text:"Stereographic Projection",Uf:9});k.push({text:"Fisheye Projection",Uf:12});for(e=0;e<k.length;e++){var h=k[e],m=document.createElement("div");m.setAttribute("class","gg_context_row");c="text-align: left;";c+="margin: 0;";c=f.Za==h.Uf?c+"padding: 5px 20px 5px 7px;":c+"padding: 5px 20px;";c+="vertical-align: left;";c+="cursor: pointer;";m.setAttribute("style",
c);m.onclick=function(a){return function(){f.Nh(a,1);f.update()}}(h.Uf);f.Za==h.Uf?m.innerHTML="&#10687; "+h.text:m.innerHTML=h.text;g.appendChild(m)}f.A.Ef&&!f.A.pf||g.appendChild(document.createElement("hr"))}f.A.pf&&(e=document.createElement("div"),e.setAttribute("class","gg_context_row"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",c+="cursor: pointer;",e.setAttribute("style",c),e.onclick=function(){f.uh()},e.innerHTML=f.Sg()?"Exit Fullscreen":"Enter Fullscreen",
g.appendChild(e));c="<<U>>"+String(f.Ja);c=c.toUpperCase();f.A.Ef&&"U"==c.charAt(2)||(e=document.createElement("div"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",e.setAttribute("style",c),e.setAttribute("class","gg_context_row"),c=document.createElement("a"),c.href=f.yj("aHR0cDovL3Bhbm8ydnIuY29tLw=="),c.target="_blank",c.innerHTML=f.yj("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),c.setAttribute("style","color: black; text-decoration: none;"),e.appendChild(c),g.appendChild(e));
f.U.insertBefore(f.Pc,f.U.firstChild);g.onclick=function(){f.Pc&&(f.U.removeChild(f.Pc),f.Pc=null)};g.oncontextmenu=g.onclick}};b.prototype.Pl=function(){var a=this,b;b=a.Ba;a.control=b;a.control=b;a.ol();setTimeout(function(){a.Ei()},10);setTimeout(function(){a.Ek()},200);setTimeout(function(){a.te();a.mg()},10);b.addEventListener&&(b.addEventListener("touchstart",function(b){a.yo(b)},!1),b.addEventListener("touchmove",function(b){a.xo(b)},!1),b.addEventListener("touchend",function(b){a.wo(b)},!1),
b.addEventListener("touchcancel",function(b){a.vo(b)},!1),b.addEventListener("pointerdown",function(b){a.xk(b)},!1),b.addEventListener("MSPointerDown",function(b){a.xk(b)},!1),b.addEventListener("MSGestureStart",function(b){a.Lj(b)},!1),b.addEventListener("MSGestureEnd",function(b){a.Kj(b)},!1),b.addEventListener("MSGestureChange",function(b){a.fn(b)},!1),b.addEventListener("gesturestart",function(b){a.Lj(b)},!1),b.addEventListener("gesturechange",function(b){a.mm(b)},!1),b.addEventListener("gestureend",
function(b){a.Kj(b)},!1),b.addEventListener("mousedown",function(b){a.cn(b)},!1),b.addEventListener("mousemove",function(b){a.bn(b)},!1),document.addEventListener("mouseup",function(b){a.an(b)},!1),b.addEventListener("mousewheel",function(b){a.wk(b)},!1),b.addEventListener("DOMMouseScroll",function(b){a.wk(b)},!1),document.addEventListener("keydown",function(b){a.Ym(b)},!1),document.addEventListener("keyup",function(b){a.Zm(b)},!1),window.addEventListener("orientationchange",function(){a.ol()},!1),
window.addEventListener("resize",function(){a.te()},!1),window.addEventListener("blur",function(){a.ln()},!1),a.U.addEventListener("webkitfullscreenchange",function(){a.bh()},!1),document.addEventListener("mozfullscreenchange",function(){a.bh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.bh()},!1),document.addEventListener("MSFullscreenChange",function(){a.bh()},!1));b.oncontextmenu=function(b){void 0===b&&(b=window.event);if(b.target&&!a.nd(b.target))return!0;if(!b.ctrlKey){b=
a.xf(b);var d=a.de();a.fo(b.x-d.x,b.y-d.y);return!1}return!0}};b.prototype.kj=function(){for(var a=0;a<this.P.length;a++)if("point"==this.P[a].type&&(this.Qa&&this.Qa.addSkinHotspot?(this.P[a].Fe(),this.P[a].a=new this.Qa.addSkinHotspot(this.P[a])):this.P[a].a=new m.zl(this,this.P[a]),this.P[a].a.__div.style.left="-1000px",this.P[a].a.__div.style.top="-1000px",this.P[a].a&&this.P[a].a.__div)){var b=this.Ba.firstChild;b?this.Ba.insertBefore(this.P[a].a.__div,b):this.Ba.appendChild(this.P[a].a.__div)}};
b.prototype.wl=function(){var a,b=document.createElement("fakeelement"),c={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]};b.prototype.Jb=function(a){var b=[];a=new RegExp(a,"");for(var c=0;c<this.S.length;c++)a.test(this.S[c].id)&&b.push(this.S[c]);for(c=0;c<this.J.length;c++)a.test(this.J[c].id)&&b.push(this.J[c]);for(c=0;c<this.Xa.length;c++)a.test(this.Xa[c].id)&&
b.push(this.Xa[c]);return b};b.prototype.ym=function(a){if("_videopanorama"==a)return this.o.a;a=this.Jb(a);return 0<a.length?a[0].a:null};b.prototype.Jk=function(a,b){for(var c=0;c<this.J.length;c++)if(this.J[c].id==a)return this.J[c].a=b,this.J[c];c=new m.Sk(this);c.registerElement(a,b);return c};b.prototype.Cc=function(a){if(this.vb){var b=this.ha;if(b)return b.isPlaying(a)}else{if("_main"===a)return!0;a=this.Jb(a);if(0<a.length)return a[0].ia?a[0].le:!a[0].a.ended&&!a[0].a.paused}return!1};b.prototype.ke=
function(a,b){if(this.vb){var c=this.ha;c&&c.playSound(a,b)}else try{for(var c=this.Jb(a),e=0;e<c.length;e++){var f=c[e];f.Nc=b&&!isNaN(Number(b))?Number(b)-1:f.loop-1;-1==f.Nc&&(f.Nc=1E7);this.O(f.a);this.Cc(a)&&this.Wi(a);f.ia?f.Kc():f.a.play()}}catch(g){this.O(g)}};b.prototype.Fk=function(a,b){for(var c=this.Jb(a),e=0;e<c.length;e++){var f=c[e];this.Cc(f.id)?this.Fi(f.id):this.ke(f.id,b)}};b.prototype.yn=function(a,b){for(var c=this.Jb(a),e=0;e<c.length;e++){var f=c[e];this.Cc(f.id)?this.Wi(f.id):
this.ke(f.id,b)}};b.prototype.Fi=function(a){if(this.vb){var b=this.ha;b&&b.pauseSound(a)}else try{if("_main"==a){for(b=0;b<this.S.length;b++)this.S[b].ia?this.S[b].Lh():this.S[b].a.pause();for(b=0;b<this.J.length;b++)this.J[b].a.pause()}else for(var c=this.Jb(a),b=0;b<c.length;b++){var e=c[b];e.ia?e.Lh():e.a.pause()}}catch(f){this.O(f)}};b.prototype.Kl=function(a,b){for(var c=this.Jb(a),e=0;e<c.length;e++){var f=c[e];0==b||1==b?f.zf&&f.zf(1==b):2==b&&f.Tc&&f.Tc()}};b.prototype.Wi=function(a){var b;
if(this.vb)(b=this.ha)&&b.stopSound(a);else try{if("_main"===a){for(b=0;b<this.S.length;b++)this.S[b].ia?this.S[b].ze():(this.S[b].a.pause(),this.S[b].a.currentTime=0);for(b=0;b<this.J.length;b++)this.J[b].a.pause(),this.J[b].a.currentTime=0}else{var c=this.Jb(a);for(b=0;b<c.length;b++){var e=c[b];e.ia?e.ze():e.a&&e.a.pause&&(e.a.pause(),e.a.currentTime=0,this.Gf&&(e.td(),e.addElement()))}}}catch(f){this.O(f)}};b.prototype.io=function(a){a=this.Jb(a);return 0<a.length?(a=a[0],a.ia?a.Sl():a.a?a.a.currentTime:
0):0};b.prototype.jo=function(a,b){var c=this.Jb(a);0<c.length&&(c=c[0],c.ia?(0>b&&(b=0),b>c.jf.duration&&(b=c.jf.duration-.1),c.Tl(b)):c.a&&(0>b&&(b=0),b>c.a.duration&&(b=c.a.duration-.1),c.a.currentTime=b))};b.prototype.bo=function(a,b){if(this.vb){var c=this.ha;c&&c.setVolume(a,b)}else try{var e=Number(b);1<e&&(e=1);0>e&&(e=0);"_videopanorama"===a&&this.o.a&&(this.o.a.volume=e);if("_main"===a){this.V=e;for(c=0;c<this.S.length;c++)this.S[c].a.volume=this.S[c].level*this.V;for(c=0;c<this.J.length;c++)this.J[c].a.volume=
this.J[c].level*this.V;this.o.a&&(this.o.a.volume=this.V)}else{var f=this.Jb(a);this.O(f);for(c=0;c<f.length;c++){var g=f[c];g.a&&null!=g.a.volume&&(g.a.volume=e*this.V);g.level=e}}}catch(k){this.O(k)}};b.prototype.$l=function(a,b){if(this.vb){var c=this.ha;c&&c.changeVolume(a,b)}else try{var e;"_videopanorama"===a&&this.o.a&&(this.o.a.volume=this.o.a.volume+Number(b));if("_main"===a){c=this.V;c+=Number(b);1<c&&(c=1);0>c&&(c=0);this.V=c;for(e=0;e<this.S.length;e++)this.S[e].a.volume=this.S[e].level*
this.V;for(e=0;e<this.J.length;e++)this.J[e].a.volume=this.J[e].level*this.V;this.o.a&&(this.o.a.volume=this.V)}else{var f=this.Jb(a);for(e=0;e<f.length;e++){var g=f[e],c=g.level,c=c+Number(b);1<c&&(c=1);0>c&&(c=0);g.level=c;g.a&&null!=g.a.volume&&(g.a.volume=c*this.V)}}}catch(k){this.O(k)}};b.prototype.el=function(){try{for(var a=this,b=!1,c=!1,e=0;e<this.S.length;e++){var f=this.S[e];-1==f.loop||this.Cc(f.id)||(this.Ha&&this.Fa.enabled&&4!=f.mode&&6!=f.mode?this.Fa.vj?(f.ia?f.Kc():(f.a.play(),f.a.currentTime=
0),f.ka=0,c=!0):b=!0:4==f.mode||6==f.mode||"_background"==f.id&&this.Cc(f.id)||(f.ia?f.Kc():(f.a.play(),f.a.currentTime&&(f.a.currentTime=0))))}b&&setTimeout(function(){a.Fa.oo()},1E3*this.Fa.nb);c&&(this.Fa.lo=this.Ha.currentTime,this.Fa.ko=setInterval(function(){a.Fa.im()},10))}catch(g){this.O(g)}};b.prototype.Nk=function(){for(var a;0<this.P.length;)a=this.P.pop(),a.a&&(this.Ba.removeChild(a.a.__div),delete a.a),a.a=null};b.prototype.Ri=function(a){this.rg=a;0!=a?this.U.style.zIndex=a.toString():
this.U.style.zIndex="auto";this.Ca&&this.Ca.Lc&&(this.Ca.Lc.zIndex=(a+4).toString());this.Ba.style.zIndex=(a+4).toString();this.ta.style.zIndex=(a+3).toString();this.ua.style.zIndex=(a+5).toString();for(var b=0;b<this.J.length+this.Xa.length;b++){var c;c=b<this.J.length?this.J[b]:this.Xa[b-this.J.length];c.a&&(c.a.style.zIndex=(a+(c.xb?8E4:0)).toString())}};b.prototype.We=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.zh)try{this.U.webkitRequestFullScreen?
this.U.webkitRequestFullScreen():this.U.mozRequestFullScreen?this.U.mozRequestFullScreen():this.U.msRequestFullscreen?this.U.msRequestFullscreen():this.U.requestFullScreen?this.U.requestFullScreen():this.U.requestFullscreen&&this.U.requestFullscreen()}catch(c){this.O(c)}this.U.style.position="absolute";a=this.de();this.U.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.U.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.Ri(10);document.body.style.overflow="hidden";b&&this.N&&
this.N.ggEnterFullscreen&&this.N.ggEnterFullscreen()}else{if(this.zh)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(c){this.O(c)}this.U.style.position="relative";this.U.style.left="0px";this.U.style.top="0px";this.Ri(0);document.body.style.overflow=
"";b&&this.N&&this.N.ggExitFullscreen&&this.N.ggExitFullscreen()}this.te()};b.prototype.uh=function(){this.We(!this.isFullscreen)};b.prototype.hm=function(){this.We(!0)};b.prototype.exitFullscreen=function(){this.We(!1)};b.prototype.tm=function(){return this.isFullscreen};b.prototype.bl=function(a,b,c){this.s.enabled=!0;this.s.active=!0;this.s.od=0;this.s.startTime=(new Date).getTime();a&&0!=a&&(this.s.speed=a);b&&(this.s.timeout=b);c&&(this.s.sh=c)};b.prototype.po=function(){this.s.active=!1;this.s.enabled=
!1;this.s.cd=!1};b.prototype.to=function(){this.s.enabled=!this.s.active;this.s.active=this.s.enabled;this.s.od=0;this.s.enabled&&(this.s.startTime=(new Date).getTime())};b.prototype.mo=function(){this.s.cd||(this.s.cd=!0,this.s.oj=this.s.enabled,this.bl())};b.prototype.uj=function(a){if(this.Dd=document.getElementById(a)){this.Dd.innerHTML="";this.U=document.createElement("div");this.U.onselectstart=function(){return!1};O&&this.U.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+
(this.Ja+"user-select: none;");this.U.setAttribute("style",a);this.Dd.appendChild(this.U);this.B=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ja+"user-select: none;");O&&this.B.setAttribute("id","viewer");this.B.setAttribute("style",a);this.U.appendChild(this.B);if(this.vb){var b=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+
(this.Ja+"user-select: none;");b.setAttribute("id",this.di);b.setAttribute("style",a);this.B.appendChild(b)}this.Ca&&(this.Ca.Lc=document.createElement("canvas"),O&&this.Ca.Lc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ja+"user-select: none;"),a+=this.Ja+"pointer-events: none;",this.Ca.Lc.setAttribute("style",a),this.U.appendChild(this.Ca.Lc));this.Ba=document.createElement("div");O&&this.Ba.setAttribute("id",
"hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.fk&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.Jd&&!this.$&&(a+=this.Ja+"transform: translateZ(9999999px);");a+=this.Ja+"user-select: none;";this.Ba.setAttribute("style",a);this.U.appendChild(this.Ba);this.ta=document.createElement("canvas");O&&this.ta.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.Ja+"user-select: none;");a+=this.Ja+"pointer-events: none;";this.ta.setAttribute("style",a);this.U.appendChild(this.ta);this.ua=document.createElement("div");O&&this.ua.setAttribute("id","hotspottext");this.ua.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");this.ua.innerHTML=" Hotspot text!";this.U.appendChild(this.ua);this.divSkin=this.N=this.Ba;this.Ri(0)}else alert("container not found!")};b.prototype.wj=function(a){this.ya=!0;return function(){a.Oa&&
(a.g&&a.g.complete?(a.loaded=!0,a.Oa.drawImage(a.g,0,0,a.width,a.height),a.g=null,a.sd=null):a.sd&&a.sd.complete&&!a.loaded&&(a.Oa.drawImage(a.sd,0,0,a.width,a.height),a.sd=null))}};b.prototype.tj=function(a){var b,c,e,f=128;this.g.Qe&&(this.B.style.backgroundColor=this.g.Qe.replace("0x","#"));a?(f=this.kf,this.Ye=1):this.jc>f&&(f=this.jc);for(e=0;6>e;e++){c=this.gb.ab[e];a?(c.width=this.kf,c.height=this.kf):(c.K=document.createElement("canvas"),c.K.width=this.jc,c.K.height=this.jc,c.width=this.jc,
c.height=this.jc,c.Oa=c.K.getContext("2d"));b="position:absolute;";b+="left: 0px;";b+="top: 0px;";b+="width: "+f+"px;";b+="height: "+f+"px;";a&&(b+="outline: 1px solid transparent;");b+=this.Ja+"transform-origin: 0% 0%;";b+="-webkit-user-select: none;";b+=this.Ja+"transform: ";var g;g="";var k=1;this.Se&&(k=100);g=4>e?g+("rotateY("+-90*e+"deg)"):g+("rotateX("+(4==e?-90:90)+"deg)");this.Se&&(g+=" scale("+k+")");g+=" translate3d("+-f/2+"px,"+-f/2+"px,"+-f*k/(2*this.Ye)+"px)";b+=g+";";c.Uj=g;a||(c.K.setAttribute("style",
b),this.B.insertBefore(c.K,this.B.firstChild))}if(!a){for(e=0;6>e;e++)c=this.gb.ab[e],""!=this.De[e]&&(c.sd=new Image,c.sd.crossOrigin=this.crossOrigin,c.sd.onload=this.wj(c),c.sd.setAttribute("src",this.Xb(this.De[e])),this.Hb.push(c.sd));for(e=0;6>e;e++)c=this.gb.ab[e],c.loaded=!1,c.g=new Image,c.g.crossOrigin=this.crossOrigin,c.g.onload=this.wj(c),c.g.setAttribute("src",this.Xb(this.Cg[e])),this.Hb.push(c.g)}};b.prototype.ih=function(){var a;this.va.ba.x=0;this.va.ba.y=0;if(this.Fc){for(a=0;a<
this.gb.ab.length;a++)this.gb.ab[a].K&&this.gb.ab[a].K.setAttribute&&(this.gb.ab[a].K.setAttribute("src",this.Aj),this.B.removeChild(this.gb.ab[a].K));if(this.g.I){for(a=0;a<this.g.I.length;a++){var b=this.g.I[a],c;for(c in b.W)if(b.W.hasOwnProperty(c)){var e=b.W[c];e.visible=!1;e.K&&(e.Oa&&e.Oa.clearRect(0,0,e.Oa.canvas.width,e.Oa.canvas.height),this.vh.push(e.K));e.g&&delete e.g;e.ib&&(this.H.deleteTexture(e.ib),this.Uc--);e.Oa=null;e.K=null;e.g=null}delete b.W}delete this.g.I;this.g.I=null}}this.ma.ih();
c=[];for(a=0;a<this.J.length;a++)b=this.J[a],b.Yc?c.push(b):b.td();for(a=0;a<this.Xa.length;a++)this.Xa[a].td();this.w.Kf=-1;this.ta.style.visibility="hidden";this.kb=0;b=[];this.Fa.kg=[];for(a=0;a<this.S.length;a++)if(e=this.S[a],0==e.mode||1==e.mode)b.push(e),this.O("Keep in list "+e.id);else if(this.Ha&&this.Fa.enabled&&this.Cc(e.id))this.Fa.kg.push(e),1!=this.C.Na&&2!=this.C.Na&&this.Fa.Zh(e);else{try{e.ia?e.ze():e.a.pause()}catch(f){this.O(f)}e.td()}this.S=b;this.J=c;this.Xa=[];this.o.a&&(this.U.removeChild(this.o.a),
this.o.a=null,a=this.Jb("_videopanorama"),0<a.length&&(a[0].a=null));this.o.Wc=!1;this.o.Tg=!1};b.prototype.Rj=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{Bh:screen.width*a,Pg:screen.height*a}};b.prototype.Nj=function(){var a=this.Rj();return a.Bh>a.Pg?a.Bh:a.Pg};b.prototype.Ji=function(a,b){var c=(new DOMParser).parseFromString(a,"text/xml");this.Uh=a;this.Ik(c,b);this.ha&&(this.O("Apply to Flash player"),this.ha.readConfigString(this.Uh),
this.ha.setLocked(!0),this.ha.setSlaveMode(!0))};b.prototype.Hk=function(a,b,c){try{var e;e=new XMLHttpRequest;e.open("GET",a,!1);e.send(null);if(e.responseXML){var f=a.lastIndexOf("/");0<=f&&(this.Bd=a.substr(0,f+1));2<=arguments.length&&null!=b&&(this.Bd=b);this.Ji(e.responseText,c)}else alert("Error loading panorama XML")}catch(g){alert("Error:"+g)}};b.prototype.An=function(a,b,c,e){var f;f=new XMLHttpRequest;var g=this;f.onload=function(k){if(4<=f.readyState)if(f.responseXML){var h=a.lastIndexOf("/");
0<=h&&(g.Bd=a.substr(0,h+1));3<=arguments.length&&null!=c&&(g.Bd=c);g.Ji(f.responseText,e);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+f.statusText)};f.onerror=function(){console.error("Error loading XML:"+f.statusText)};f.open("GET",a,!0);f.send(null)};b.prototype.Mh=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));a={oldNodeId:this.Vb,nodeId:b};this.il("beforechangenodeid",a);""!=this.Vb&&-1==this.hj.indexOf(this.Vb)&&this.hj.push(this.Vb);
this.lk=this.Vb;this.Vb=b;this.O("change active node: "+b);this.Qa&&this.Qa.changeActiveNode&&this.Qa.changeActiveNode("{"+b+"}");this.il("changenodeid",a)};b.prototype.Mj=function(){return this.Vb};b.prototype.Oj=function(){if(0<this.La.length){var a;a=this.La.indexOf(this.Vb);a++;a>=this.La.length&&(a=0);return this.La[a]}return""};b.prototype.Jm=function(){if(0<this.La.length){var a;a=this.La.indexOf(this.Vb);a--;0>a&&(a=this.La.length-1);return this.La[a]}return""};b.prototype.xm=function(){return this.lk};
b.prototype.jn=function(a){return-1!=this.hj.indexOf(a)};b.prototype.Ik=function(a,b){var c=a.firstChild;this.qe=[];this.La=[];this.Eg=[];if("tour"==c.nodeName){this.If=!0;var e="",f;(f=c.getAttributeNode("start"))&&(e=f.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(e=String(this.startNode),this.startNode="");for(var g=c.firstChild,k="",c="";g;){if("panorama"==g.nodeName){if(f=g.getAttributeNode("id"))k=f.nodeValue.toString(),""==e&&(e=k),""==c&&(c=k),this.qe[k]=g,this.La.push(k);
for(f=g.firstChild;f;){if("userdata"==f.nodeName){var h=this.Hg(f);this.fj[k]=h;h.customnodeid&&(this.Eg[h.customnodeid]=k)}f=f.nextSibling}}g=g.nextSibling}this.qe.hasOwnProperty(e)||(g=this.Eg[e])&&(e=g);this.qe.hasOwnProperty(e)||(this.Xc("Start node "+e+" not found!"),e=c);this.Ii(this.qe[e],b);this.Mh("{"+e+"}")}else this.If=!1,this.Ii(c,b),this.Mh(""),this.La.push("")};b.prototype.Ii=function(a,b){this.Nk();this.Ca&&this.Ca.Cn();this.Ve(this.pb);this.ih();this.Lf=0;for(var c=a.firstChild,e,
f,g=0;c;){if("view"==c.nodeName){if(e=c.getAttributeNode("fovmode"))this.f.mode=Number(e.nodeValue);e=c.getAttributeNode("pannorth");this.pan.Ci=1*(e?e.nodeValue:0);for(var k=c.firstChild;k;){"start"==k.nodeName&&(e=k.getAttributeNode("pan"),this.pan.c=Number(e?e.nodeValue:0),this.pan.Pa=this.pan.c,e=k.getAttributeNode("tilt"),this.j.c=Number(e?e.nodeValue:0),this.j.Pa=this.j.c,e=k.getAttributeNode("roll"),this.M.c=Number(e?e.nodeValue:0),this.M.Pa=this.M.c,e=k.getAttributeNode("fov"),this.f.c=Number(e?
e.nodeValue:70),this.f.Pa=this.f.c,e=k.getAttributeNode("projection"),this.dh=Number(e?e.nodeValue:4),this.Zc(this.dh));"min"==k.nodeName&&(e=k.getAttributeNode("pan"),this.pan.min=1*(e?e.nodeValue:0),e=k.getAttributeNode("tilt"),this.j.min=1*(e?e.nodeValue:-90),e=k.getAttributeNode("fov"),this.f.min=1*(e?e.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),e=k.getAttributeNode("fovpixel"),this.f.Rf=1*(e?e.nodeValue:0));if("max"==k.nodeName){e=k.getAttributeNode("pan");this.pan.max=1*(e?e.nodeValue:
0);e=k.getAttributeNode("tilt");this.j.max=1*(e?e.nodeValue:90);e=k.getAttributeNode("fov");this.f.max=1*(e?e.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(e=k.getAttributeNode("fovstereographic"))this.f.xi=1*e.nodeValue;if(e=k.getAttributeNode("fovfisheye"))this.f.wi=1*e.nodeValue;if(e=k.getAttributeNode("scaletofit"))this.A.Tk=1==e.nodeValue}if("flyin"==k.nodeName){if(e=k.getAttributeNode("projection"))this.mc.Bb=Number(e.nodeValue);if(e=k.getAttributeNode("pan"))this.mc.pan=parseFloat(e.nodeValue);
if(e=k.getAttributeNode("tilt"))this.mc.j=parseFloat(e.nodeValue);if(e=k.getAttributeNode("fov"))this.mc.f=parseFloat(e.nodeValue)}k=k.nextSibling}}if("autorotate"==c.nodeName){if(e=c.getAttributeNode("speed"))this.s.speed=1*e.nodeValue;if(e=c.getAttributeNode("delay"))this.s.timeout=1*e.nodeValue;if(e=c.getAttributeNode("returntohorizon"))this.s.sh=1*e.nodeValue;if(e=c.getAttributeNode("nodedelay"))this.s.ah=1*e.nodeValue;if(e=c.getAttributeNode("noderandom"))this.s.Bi=1==e.nodeValue;this.ae&&(this.s.enabled=
!0,this.s.active=!1);if(e=c.getAttributeNode("startloaded"))this.s.ig=1==e.nodeValue,this.s.ig&&(this.s.active=!1);if(e=c.getAttributeNode("useanimation"))this.s.ej=1==e.nodeValue;if(e=c.getAttributeNode("syncanimationwithvideo"))this.s.Xi=1==e.nodeValue}if("animation"==c.nodeName){if(e=c.getAttributeNode("syncanimationwithvideo"))this.s.Xi=1==e.nodeValue;if(e=c.getAttributeNode("useinautorotation"))this.s.ej=1==e.nodeValue;this.Ia=[];for(k=c.firstChild;k;){if("clip"==k.nodeName){this.D=new m.uk;
if(e=k.getAttributeNode("animtitle"))this.D.Uo=e.nodeValue.toString();if(e=k.getAttributeNode("cliptitle"))this.D.Ta=e.nodeValue.toString();if(e=k.getAttributeNode("nodeid"))this.D.Vo=e.nodeValue.toString();if(e=k.getAttributeNode("length"))this.D.length=Number(e.nodeValue);if(e=k.getAttributeNode("animtype"))this.D.Ml=Number(e.nodeValue);if(e=k.getAttributeNode("nextcliptitle"))this.D.zk=e.nodeValue.toString();if(e=k.getAttributeNode("nextclipnodeid"))this.D.yk=e.nodeValue.toString();if(e=k.getAttributeNode("transitiontype"))this.D.zo=
Number(e.nodeValue);var h=k.firstChild;for(this.D.ja=[];h;){if("keyframe"==h.nodeName){var B=new m.yc;if(e=h.getAttributeNode("time"))B.time=Number(e.nodeValue);if(e=h.getAttributeNode("value"))B.value=Number(e.nodeValue);if(e=h.getAttributeNode("transitiontime"))B.nb=Number(e.nodeValue);e=h.getAttributeNode("type");var n=0;e&&(B.type=Number(e.nodeValue),n=Number(e.nodeValue));if(e=h.getAttributeNode("property"))B.ub=Number(e.nodeValue);if(1==n||2==n){if(e=h.getAttributeNode("bezierintime"))B.Ud=
Number(e.nodeValue);if(e=h.getAttributeNode("bezierinvalue"))B.Ic=Number(e.nodeValue);if(e=h.getAttributeNode("bezierouttime"))B.Vd=Number(e.nodeValue);if(e=h.getAttributeNode("bezieroutvalue"))B.Wd=Number(e.nodeValue)}this.D.ja.push(B)}h=h.nextSibling}this.zb==this.D.Ta&&(e=this.D.ja,this.ag(e[0].value,e[1].value,e[2].value));this.Ia.push(this.D)}k=k.nextSibling}}"input"==c.nodeName&&(f||(f=c));if(f)for(k=0;6>k;k++)e=f.getAttributeNode("prev"+k+"url"),this.De[k]=e?String(e.nodeValue):"";"altinput"==
c.nodeName&&(k=0,(e=c.getAttributeNode("screensize"))&&(k=1*e.nodeValue),0<k&&k<=this.Nj()&&k>g&&(g=k,f=c));if("control"==c.nodeName&&this.ae){if(e=c.getAttributeNode("simulatemass"))this.va.enabled=1==e.nodeValue;if(e=c.getAttributeNode("rubberband"))this.A.Rk=1==e.nodeValue;if(e=c.getAttributeNode("locked"))this.A.yb=1==e.nodeValue;e&&(this.A.Nf=1==e.nodeValue);if(e=c.getAttributeNode("lockedmouse"))this.A.yb=1==e.nodeValue;if(e=c.getAttributeNode("lockedkeyboard"))this.A.Nf=1==e.nodeValue;if(e=
c.getAttributeNode("lockedkeyboardzoom"))this.A.ui=1==e.nodeValue;if(e=c.getAttributeNode("lockedwheel"))this.A.qd=1==e.nodeValue;if(e=c.getAttributeNode("invertwheel"))this.A.ck=1==e.nodeValue;if(e=c.getAttributeNode("speedwheel"))this.A.al=1*e.nodeValue;if(e=c.getAttributeNode("invertcontrol"))this.A.md=1==e.nodeValue;if(e=c.getAttributeNode("sensitivity"))this.A.sensitivity=1*e.nodeValue,1>this.A.sensitivity&&(this.A.sensitivity=1);if(e=c.getAttributeNode("dblclickfullscreen"))this.A.Wh=1==e.nodeValue;
if(e=c.getAttributeNode("contextfullscreen"))this.A.pf=1==e.nodeValue;if(e=c.getAttributeNode("contextprojections"))this.A.Ag=1==e.nodeValue;if(e=c.getAttributeNode("hideabout"))this.A.Ef=1==e.nodeValue;for(k=c.firstChild;k;)"menulink"==k.nodeName&&(h={text:"",url:""},e=k.getAttributeNode("text"),h.text=e.nodeValue,e=k.getAttributeNode("url"),h.url=e.nodeValue,this.Qf.push(h)),k=k.nextSibling}if("transition"==c.nodeName&&this.ae){if(e=c.getAttributeNode("enabled"))this.C.enabled=1==e.nodeValue;if(e=
c.getAttributeNode("blendtime"))this.C.vg=e.nodeValue;if(e=c.getAttributeNode("blendcolor"))this.C.xe=e.nodeValue.toString();if(e=c.getAttributeNode("type"))this.C.type=e.nodeValue.toString();if(e=c.getAttributeNode("softedge"))this.C.uc=1*e.nodeValue;if(e=c.getAttributeNode("zoomin"))this.C.Na=e.nodeValue;if(e=c.getAttributeNode("zoomout"))this.C.Ob=e.nodeValue;if(e=c.getAttributeNode("zoomfov"))this.C.df=e.nodeValue;if(e=c.getAttributeNode("zoomspeed"))this.C.Rd=e.nodeValue;if(e=c.getAttributeNode("zoomoutpause"))this.C.ef=
1==e.nodeValue}if("soundstransition"==c.nodeName){if(e=c.getAttributeNode("enabled"))this.Fa.enabled=1==e.nodeValue;if(e=c.getAttributeNode("transitiontime"))this.Fa.nb=1*e.nodeValue;if(e=c.getAttributeNode("crossfade"))this.Fa.vj=1==e.nodeValue}if("flyintransition"==c.nodeName){if(e=c.getAttributeNode("enabled"))this.qb.enabled=1==e.nodeValue&&this.$;if(e=c.getAttributeNode("speed"))this.qb.speed=1*e.nodeValue}"userdata"==c.nodeName&&(this.userdata=this.bf=this.Hg(c));if("hotspots"==c.nodeName)for(k=
c.firstChild;k;){if("label"==k.nodeName&&this.ae){h=this.w.Zi;if(e=k.getAttributeNode("enabled"))h.enabled=1==e.nodeValue;if(e=k.getAttributeNode("width"))h.width=1*e.nodeValue;if(e=k.getAttributeNode("height"))h.height=1*e.nodeValue;if(e=k.getAttributeNode("textcolor"))h.$i=1*e.nodeValue;if(e=k.getAttributeNode("textalpha"))h.Yi=1*e.nodeValue;if(e=k.getAttributeNode("background"))h.background=1==e.nodeValue;if(e=k.getAttributeNode("backgroundalpha"))h.Pb=1*e.nodeValue;if(e=k.getAttributeNode("backgroundcolor"))h.Qb=
1*e.nodeValue;if(e=k.getAttributeNode("border"))h.Kh=1*e.nodeValue;if(e=k.getAttributeNode("bordercolor"))h.Tb=1*e.nodeValue;if(e=k.getAttributeNode("borderalpha"))h.Sb=1*e.nodeValue;if(e=k.getAttributeNode("borderradius"))h.Jh=1*e.nodeValue;if(e=k.getAttributeNode("wordwrap"))h.Ch=1==e.nodeValue}if("polystyle"==k.nodeName&&this.ae){if(e=k.getAttributeNode("mode"))this.w.mode=1*e.nodeValue;if(e=k.getAttributeNode("bordercolor"))this.w.Tb=1*e.nodeValue;if(e=k.getAttributeNode("backgroundcolor"))this.w.Qb=
1*e.nodeValue;if(e=k.getAttributeNode("borderalpha"))this.w.Sb=1*e.nodeValue;if(e=k.getAttributeNode("backgroundalpha"))this.w.Pb=1*e.nodeValue;if(e=k.getAttributeNode("handcursor"))this.w.Ie=1==e.nodeValue}e=void 0;"hotspot"==k.nodeName&&(e=new m.Vg(this),e.type="point",e.Db(k),this.P.push(e));"polyhotspot"==k.nodeName&&(e=new m.Vg(this),e.type="poly",e.Db(k),this.P.push(e));k=k.nextSibling}if("sounds"==c.nodeName||"media"==c.nodeName)for(k=c.firstChild;k;)"sound"!=k.nodeName||this.Ak||(e=new m.Il(this),
e.Db(k),this.vb||e.addElement()),"video"==k.nodeName&&(e=new m.Sk(this),e.Db(k),this.vb||e.addElement()),"image"==k.nodeName&&(e=new m.Gl(this),e.Db(k),this.vb||e.addElement()),"lensflare"==k.nodeName&&this.Ca&&(e=new m.Hl(this),e.Db(k),this.Ca.Mf.push(e)),k=k.nextSibling;c=c.nextSibling}b&&""!=b&&(c=b.toString().split("/"),4<c.length&&this.Zc(Number(c[4])),0<c.length&&(e=String(c[0]),"N"==e.charAt(0)?this.Qi(Number(e.substr(1))):"S"==e.charAt(0)?this.Qi(-180+Number(e.substr(1))):this.lh(Number(e))),
1<c.length&&this.mh(Number(c[1])),2<c.length&&this.Xf(Number(c[2])));if(f){for(k=0;6>k;k++)(e=f.getAttributeNode("tile"+k+"url"))&&(this.Cg[k]=String(e.nodeValue)),e=f.getAttributeNode("tile"+k+"url1");for(k=0;6>k;k++)(e=f.getAttributeNode("prev"+k+"url"))&&(this.De[k]=String(e.nodeValue));if(e=f.getAttributeNode("tilesize"))this.jc=1*e.nodeValue;if(e=f.getAttributeNode("canvassize"))this.kf=Number(e.nodeValue);if(e=f.getAttributeNode("tilescale"))this.Ye=1*e.nodeValue;if(e=f.getAttributeNode("leveltileurl"))this.g.tk=
e.nodeValue;if(e=f.getAttributeNode("leveltilesize"))this.g.G=Number(e.nodeValue);if(e=f.getAttributeNode("levelbias"))this.g.rk=Number(e.nodeValue);if(e=f.getAttributeNode("levelbiashidpi"))this.g.sk=Number(e.nodeValue);e=f.getAttributeNode("overlap");this.Da.M=0;this.Da.pitch=0;e&&(this.g.Ka=Number(e.nodeValue));if(e=f.getAttributeNode("levelingroll"))this.Da.M=Number(e.nodeValue);if(e=f.getAttributeNode("levelingpitch"))this.Da.pitch=Number(e.nodeValue);this.kb=0;(e=f.getAttributeNode("flat"))&&
1==e.nodeValue&&(this.kb=2);e=f.getAttributeNode("width");this.g.width=1*(e?e.nodeValue:1);e=f.getAttributeNode("height");this.g.height=1*(e?e.nodeValue:this.g.width);this.o.src=[];this.g.I=[];for(k=f.firstChild;k;){if("preview"==k.nodeName){if(e=k.getAttributeNode("color"))this.g.Qe=e.nodeValue;if(e=k.getAttributeNode("strip"))this.g.Gk=1==e.nodeValue}if("video"==k.nodeName){if(e=k.getAttributeNode("format"))"3x2"==e.nodeValue&&(this.o.format=14),"equirectangular"==e.nodeValue&&(this.o.format=1);
if(e=k.getAttributeNode("flipy"))this.o.ei=Number(e.nodeValue);if(e=k.getAttributeNode("startmuted"))this.o.dl=1==e.nodeValue;if(e=k.getAttributeNode("bleed"))this.o.we=Number(e.nodeValue);if(e=k.getAttributeNode("endaction"))this.o.$d=String(e.nodeValue);if(e=k.getAttributeNode("width"))this.o.width=Number(e.nodeValue);if(e=k.getAttributeNode("height"))this.o.height=Number(e.nodeValue);for(f=k.firstChild;f;)"source"==f.nodeName&&(e=f.getAttributeNode("url"))&&this.o.src.push(e.nodeValue.toString()),
f=f.nextSibling}if("level"==k.nodeName){f=new m.Bk;e=k.getAttributeNode("width");f.width=1*(e?e.nodeValue:1);e=k.getAttributeNode("height");f.height=1*(e?e.nodeValue:f.width);if(e=k.getAttributeNode("preload"))f.cache=1==e.nodeValue;if(e=k.getAttributeNode("preview"))f.Pe=1==e.nodeValue;f.L=Math.floor((f.width+this.g.G-1)/this.g.G);f.ea=Math.floor((f.height+this.g.G-1)/this.g.G);this.g.I.push(f)}k=k.nextSibling}this.g.ri=this.g.I.length}this.ng&&(this.$=this.Fc=!1,this.Ub||(this.O("dummy rendering"),
this.Ub=document.createElement("canvas"),this.Ub.width=100,this.Ub.height=100,this.Ub.id="dummycanvas",this.B.appendChild(this.Ub)),this.bd());this.$&&this.H&&(this.ma.ak(this.Ye),this.ma.bk());this.Fc&&(0<this.g.I.length?this.tj(!0):this.tj(!1),this.Lf=0);var r=this;0<this.g.I.length&&this.g.Gk&&0==this.kb&&(c=new Image,f=new m.Bk,f.Pe=!0,f.cache=!0,f.L=f.ea=0,f.height=f.width=0,this.g.I.push(f),c.crossOrigin=this.crossOrigin,c.onload=this.ma.hn(c),c.setAttribute("src",this.pe(6,this.g.ri-1,0,0)));
if(0<this.o.src.length&&this.$)if(this.Ah){this.o.a=document.createElement("video");this.o.a.crossOrigin=this.crossOrigin;this.o.a.setAttribute("style","display:none; max-width:none;");this.o.a.setAttribute("playsinline","playsinline");this.Id&&this.bi&&this.o.dl&&this.o.a.setAttribute("muted","muted");this.o.a.b=!0;this.o.a.volume=this.V;this.U.appendChild(this.o.a);this.o.Wc=!1;this.o.fl=!1;this.o.a.oncanplay=function(){if(!r.o.Wc){r.o.Tg=!0;var a,b,c,d,e,f,g=[],h=new m.sa,k=r.H,l=r.o.a.videoWidth/
3;r.o.width=r.o.a.videoWidth;r.o.height=r.o.a.videoHeight;for(a=0;6>a;a++)for(c=a%3*l+r.o.we,e=c+l-2*r.o.we,f=4,3>a&&(f+=l),d=f+l-2*r.o.we,b=0;4>b;b++){h.x=-1;h.y=-1;h.z=1;for(var n=0;n<b;n++)h.Qk();g.push((0<h.x?c:e)/(3*l),(0<h.y?d:f)/(2*l))}k.bindBuffer(k.ARRAY_BUFFER,r.o.qh);k.bufferData(k.ARRAY_BUFFER,new Float32Array(g),k.STATIC_DRAW)}};"exit"==this.o.$d?this.o.a.onended=function(){r.o.Tg=!1;r.o.Wc=!1;r.U.removeChild(r.o.a);r.o.a=null;r.update()}:"stop"==this.o.$d?r.o.a.onended=function(){r.update()}:
"{"==this.o.$d.charAt(0)?this.o.a.onended=function(){r.ie(r.o.$d,"$fwd")}:this.o.a.loop=!0;for(k=0;k<this.o.src.length;k++)f=document.createElement("source"),f.setAttribute("src",this.Xb(this.o.src[k])),this.o.a.appendChild(f);f=this.Jb("_videopanorama");0<f.length?f[0].a=this.o.a:this.Jk("_videopanorama",this.o.a);this.o.a.play()}else"{"==this.o.$d.charAt(0)&&r.ie(r.o.$d,"$fwd");this.kj();this.C.zd||this.el();this.update();this.ae&&(this.N&&this.N.ggViewerInit&&this.N.ggViewerInit(),this.qb.enabled&&
0==this.kb&&this.$&&(this.Zc(9),this.pan.c=this.mc.pan,this.j.c=this.mc.j,this.f.c=this.mc.f,this.Za=this.mc.Bb,this.D=this.uf(!1),this.pan.c=this.D.ja[0].value,this.j.c=this.D.ja[1].value,this.f.c=this.D.ja[2].value,3==this.D.ja[3].ub&&this.Zc(this.D.ja[3].value),this.zb=this.D.Ta,this.s.active=!1,this.s.Jg=!0));this.ae=!1;this.Df=!0;this.bd()};b.prototype.Di=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.ie(this.Xb(a),b):window.open(this.Xb(a),
b))};b.prototype.no=function(){this.Df=this.isLoaded=!1;this.checkLoaded=this.Hb=[];this.eh=0;this.N&&this.N.ggReLoaded&&this.N.ggReLoaded()};b.prototype.ie=function(a,b){if(""!=a&&"{}"!=a){this.no();this.Qa&&this.Qa.hotspotProxyOut&&this.Qa.hotspotProxyOut(this.Aa.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="";b&&(c=b.toString());c=c.replace("$cur",this.pan.c+"/"+this.j.c+"/"+this.f.c+"//"+this.za());c=c.replace("$fwd","N"+this.Mg()+"/"+this.j.c+"/"+this.f.c+"//"+this.za());
c=c.replace("$bwd","S"+this.Mg()+"/"+this.j.c+"/"+this.f.c+"//"+this.za());c=c.replace("$ap",String(this.pan.c));c=c.replace("$an",String(this.Mg()));c=c.replace("$at",String(this.j.c));c=c.replace("$af",String(this.f.c));c=c.replace("$ar",String(this.za()));if(""!=c){var e=c.split("/");3<e.length&&""!=e[3]&&(this.startNode=e[3])}this.qa();if("{"==a.charAt(0)){var e=a.substr(1,a.length-2),f=this.Eg[e];f&&(e=f);var f=this.C,g=this.H;if(this.qe[e]){this.yg=!0;if(this.C.enabled&&this.$&&this.C.Nb){f.re||
f.zd||(f.yi=this.A.yb,f.ij=this.A.qd,f.oi=this.A.Nf,this.Zf(!0),this.$f(!0),this.Yf(!0));var h;"wipeleftright"==f.type?h=1:"wiperightleft"==f.type?h=2:"wipetopbottom"==f.type?h=3:"wipebottomtop"==f.type?h=4:"wiperandom"==f.type&&(h=Math.ceil(4*Math.random()));f.Vh=h;g.bindFramebuffer(g.FRAMEBUFFER,f.Nb);g.viewport(0,0,f.Nb.width,f.Nb.height);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);f.jg=!0;this.mg();f.jg=!1;g.bindFramebuffer(g.FRAMEBUFFER,null);g.viewport(0,0,this.jb.width,this.jb.height);h=
new Date;this.Aa!=this.pb?(f.sg=this.Aa.hc/this.m.width,f.tg=1-this.Aa.Cb/this.m.height):(f.sg=.5,f.tg=.5);1!=f.Na&&2!=f.Na?(f.Ui=h.getTime(),f.re=!0):(f.yl=h.getTime(),f.zd=!0,f.ob=Math.sin(this.Kb()/2*Math.PI/180)/Math.sin(f.df/2*Math.PI/180),f.ob=Math.max(f.ob,1),f.xl=1/f.Rd*f.ob*.3)}this.Ii(this.qe[e],c);this.Mh(a);f.enabled&&this.$&&0!=f.Ob&&(f.ne=this.gi(),f.oe=this.ii(),f.xd=this.Kb(),f.$c=this.za(),1==f.Ob||3==f.Ob?this.cg(f.df):2==f.Ob?this.cg(this.vf()+(this.vf()-f.df)):4==f.Ob&&(this.Zc(this.mc.Bb),
this.lh(this.mc.pan),this.mh(this.mc.j),this.cg(this.mc.f)),f.ef||1==f.Na||2==f.Na||(4==f.Ob?(this.D=this.uf(!0,f.ne,f.oe,f.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(f.ne,f.oe,f.xd,f.Rd,0,f.$c)));this.ha&&this.ha.openNext(a,c);this.C.zd||this.C.re||(this.ga&&this.Rh(),this.yg=!1)}else{this.Xc("invalid node id: "+e);return}}else this.Hk(a,null,c);this.update(5)}};b.prototype.Am=function(){return this.If?this.La.slice(0):[""]};b.prototype.Hg=function(a){var b,c;c=[];c.title=
"";c.description="";c.author="";c.datetime="";c.copyright="";c.source="";c.information="";c.comment="";c.latitude=0;c.longitude=0;c.customnodeid="";c.tags=[];if(a&&((b=a.getAttributeNode("title"))&&(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(c.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),
(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(c.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=
0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};b.prototype.fi=function(a){return a?this.fj[a]?this.fj[a]:this.Hg():this.bf};b.prototype.Bm=function(a){a=this.fi(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.Cm=function(a){return this.fi(a).title};b.prototype.He=function(a,b){var c;for(c=0;c<this.D.ja.length;c++)if(this.D.ja[c].time==a&&this.D.ja[c].ub==b)return this.D.ja[c];return!1};b.prototype.zm=function(a){var b,
c=1E5,e=a,f=!1;for(b=0;b<this.D.ja.length;b++)this.D.ja[b].ub==a.ub&&this.D.ja[b].time>a.time&&this.D.ja[b].time<c&&(e=this.D.ja[b],c=e.time,f=!0);return f?e:!1};b.prototype.uf=function(a,b,c,e){for(var f=0;f<this.Ia.length;f++)if(this.Ia[f].Ta&&0==this.Ia[f].Ta.indexOf("__FlyIn"))return this.Ia[f];f=new m.jk;f.Ta="__FlyIn";f.eg=this.pan.c;f.gg=this.j.c;f.wd=this.f.c;f.fg=this.Za;f.$c=this.dh;a?(f.Ee=!1,f.Yd=!1,f.speed=this.C.Rd,f.Pd=b,f.Qd=c,f.Xe=e):(f.Ee=!0,f.Yd=!0,f.speed=this.qb.speed,f.Pd=this.pan.Pa,
f.Qd=this.j.Pa,f.Xe=this.f.Pa);return this.Jj(f)};b.prototype.Jj=function(a){var b=new m.uk;b.Ta=a.Ta;b.ja=[];var c=a.fg!=a.$c&&-1!=a.$c,e=a.Pd-a.eg;if(360==this.pan.max-this.pan.min){for(;-360>e;)e+=360;for(;360<e;)e-=360}var f=a.Qd-a.gg,g=a.Xe-a.wd,h=Math.round(Math.sqrt(e*e+f*f+g*g)/a.speed*.33);c&&(h=Math.max(10,h));b.length=h;var w,B;a.Zd&&(w=Math.ceil(.7*h),w=Math.min(15,w),w=Math.max(5,w),b.length=h+w,B=.33*w);var n=a.Xe,r=h,p=0,u=h-1;if(c){var t=a.wd,v;4==a.$c?v=120:v=this.wf(a.$c);var n=
a.Xe,g=n-a.wd,q=new m.lc(0,a.wd),x=new m.lc(h,n),A=new m.lc,z=new m.lc;z.Ya(h/3,a.wd+g/3);A.Ya(2*h/3,n-g/3);if(t>v)for(;p<=h&&t>v;)t=new m.lc,t.Ih(q,x,z,A,p),t=t.y,p++;else p=1;p>=.8*h&&(r=p=Math.round(.8*h));0==p&&(p=1);var y;4==a.fg?y=120:y=this.wf(a.fg);v=a.Xe;if(v>y)for(;u>p&&v>y;)t=new m.lc,t.Ih(q,x,z,A,u),v=t.y,u--}q=new m.yc;q.time=0;q.ub=0;q.value=a.eg;q.type=1;q.Vd=h/3;q.Wd=a.Ee?a.eg:a.eg+e/3;b.ja.push(q);q=new m.yc;q.time=0;q.ub=1;q.value=a.gg;q.type=1;q.Vd=h/3;q.Wd=a.Ee?a.gg:a.gg+f/3;b.ja.push(q);
q=new m.yc;q.time=0;q.ub=2;q.value=a.wd;q.type=1;q.Vd=h/3;q.Wd=a.Ee?a.wd:a.wd+g/3;b.ja.push(q);q=new m.yc;q.time=0;q.ub=3;q.value=a.fg;q.type=0;q.nb=0;b.ja.push(q);c&&(q=new m.yc,q.time=p,q.ub=3,q.value=a.$c,q.type=0,q.nb=u-p,b.ja.push(q));q=new m.yc;q.time=h;q.ub=0;q.value=a.Pd;q.type=1;q.Ud=2*h/3;a.Yd&&!a.Zd?q.Ic=a.Pd:q.Ic=a.Pd-e/3;a.Zd&&(q.Vd=h+B,q.Wd=q.value+B/h*e);b.ja.push(q);q=new m.yc;q.time=h;q.ub=1;q.value=a.Qd;q.type=1;q.Ud=2*h/3;a.Yd&&!a.Zd?q.Ic=a.Qd:q.Ic=a.Qd-f/3;a.Zd&&(q.Vd=h+B,q.Wd=
q.value+B/h*f);b.ja.push(q);q=new m.yc;q.time=r;q.ub=2;q.value=n;q.type=1;q.Ud=2*r/3;a.Yd?q.Ic=n:q.Ic=n-g/3;b.ja.push(q);a.Zd&&(q=new m.yc,q.time=h+w,q.ub=0,q.value=a.Pd,q.type=1,q.Ud=h+w-B,q.Ic=a.Pd,b.ja.push(q),q=new m.yc,q.time=h+w,q.ub=1,q.value=a.Qd,q.type=1,q.Ud=h+w-B,q.Ic=a.Qd,b.ja.push(q));this.Ia.push(b);return b};b.prototype.Lo=function(){this.o.a&&this.o.a.play()};b.prototype.Mo=function(){this.o.a&&(this.o.a.pause(),this.o.a.currentTime=0)};b.prototype.Ko=function(){this.o.a&&this.o.a.pause()};
b.prototype.ao=function(a){this.o.a&&(0>a&&(a=0),a>this.o.a.duration&&(a=this.o.a.duration-.1),this.o.a.currentTime=a,this.update())};b.prototype.Om=function(){return this.o.a?this.o.a.currentTime:0};b.prototype.Nm=function(){if(this.o.a)return this.o.a};b.prototype.$n=function(a){if(this.o.a){var b=!this.o.a.paused&&!this.o.a.ended,c=this.o.a.currentTime;this.o.a.pause();isNaN(parseInt(a,10))?this.o.a.src=String(a):this.o.a.src=this.o.src[parseInt(a,10)];b&&(this.o.a.onloadedmetadata=function(){this.currentTime=
c;this.play();this.onloadedmetadata=null});this.o.a.currentTime=c}};b.prototype.gm=function(){this.Ak=!0};return b}();m.b=h})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=G;window.ggHasWebGL=N;window.pano2vrPlayer=ggP2VR.b;ggP2VR.b.prototype.readConfigString=ggP2VR.b.prototype.Ji;ggP2VR.b.prototype.readConfigUrl=ggP2VR.b.prototype.Hk;ggP2VR.b.prototype.readConfigUrlAsync=ggP2VR.b.prototype.An;ggP2VR.b.prototype.readConfigXml=ggP2VR.b.prototype.Ik;ggP2VR.b.prototype.openUrl=ggP2VR.b.prototype.Di;
ggP2VR.b.prototype.openNext=ggP2VR.b.prototype.ie;ggP2VR.b.prototype.setMargins=ggP2VR.b.prototype.On;ggP2VR.b.prototype.addListener=ggP2VR.b.prototype.addListener;ggP2VR.b.prototype.removeEventListener=ggP2VR.b.prototype.removeEventListener;ggP2VR.b.prototype.detectBrowser=ggP2VR.b.prototype.zj;ggP2VR.b.prototype.initWebGL=ggP2VR.b.prototype.Bc;ggP2VR.b.prototype.getPercentLoaded=ggP2VR.b.prototype.Fm;ggP2VR.b.prototype.setBasePath=ggP2VR.b.prototype.Hn;ggP2VR.b.prototype.getBasePath=ggP2VR.b.prototype.nm;
ggP2VR.b.prototype.setViewerSize=ggP2VR.b.prototype.Wk;ggP2VR.b.prototype.getViewerSize=ggP2VR.b.prototype.Rm;ggP2VR.b.prototype.setSkinObject=ggP2VR.b.prototype.Yn;ggP2VR.b.prototype.changeViewMode=ggP2VR.b.prototype.Yl;ggP2VR.b.prototype.getViewMode=ggP2VR.b.prototype.Pm;ggP2VR.b.prototype.changePolygonMode=ggP2VR.b.prototype.rj;ggP2VR.b.prototype.setPolygonMode=ggP2VR.b.prototype.rj;ggP2VR.b.prototype.getPolygonMode=ggP2VR.b.prototype.Hm;ggP2VR.b.prototype.showOnePolyHotspot=ggP2VR.b.prototype.Yk;
ggP2VR.b.prototype.hideOnePolyHotspot=ggP2VR.b.prototype.Xj;ggP2VR.b.prototype.changePolyHotspotColor=ggP2VR.b.prototype.Wl;ggP2VR.b.prototype.toggleOnePolyHotspot=ggP2VR.b.prototype.uo;ggP2VR.b.prototype.changeViewState=ggP2VR.b.prototype.Zl;ggP2VR.b.prototype.getViewState=ggP2VR.b.prototype.Qm;ggP2VR.b.prototype.setRenderFlags=ggP2VR.b.prototype.Qn;ggP2VR.b.prototype.getRenderFlags=ggP2VR.b.prototype.Km;ggP2VR.b.prototype.setMaxTileCount=ggP2VR.b.prototype.Uk;ggP2VR.b.prototype.getVFov=ggP2VR.b.prototype.Kb;
ggP2VR.b.prototype.setVFov=ggP2VR.b.prototype.cg;ggP2VR.b.prototype.getHFov=ggP2VR.b.prototype.qm;ggP2VR.b.prototype.updatePanorama=ggP2VR.b.prototype.mg;ggP2VR.b.prototype.isTouching=ggP2VR.b.prototype.Xm;ggP2VR.b.prototype.getIsMobile=ggP2VR.b.prototype.um;ggP2VR.b.prototype.setIsMobile=ggP2VR.b.prototype.Mn;ggP2VR.b.prototype.getIsAutorotating=ggP2VR.b.prototype.sm;ggP2VR.b.prototype.getIsLoaded=ggP2VR.b.prototype.Lg;ggP2VR.b.prototype.getIsTileLoading=ggP2VR.b.prototype.vm;
ggP2VR.b.prototype.getLastActivity=ggP2VR.b.prototype.wm;ggP2VR.b.prototype.getPan=ggP2VR.b.prototype.gi;ggP2VR.b.prototype.getPanNorth=ggP2VR.b.prototype.Mg;ggP2VR.b.prototype.getPanDest=ggP2VR.b.prototype.Dm;ggP2VR.b.prototype.getPanN=ggP2VR.b.prototype.Em;ggP2VR.b.prototype.setPan=ggP2VR.b.prototype.lh;ggP2VR.b.prototype.setPanNorth=ggP2VR.b.prototype.Qi;ggP2VR.b.prototype.changePan=ggP2VR.b.prototype.wg;ggP2VR.b.prototype.changePanLog=ggP2VR.b.prototype.Vl;ggP2VR.b.prototype.getTilt=ggP2VR.b.prototype.ii;
ggP2VR.b.prototype.getTiltDest=ggP2VR.b.prototype.Mm;ggP2VR.b.prototype.setTilt=ggP2VR.b.prototype.mh;ggP2VR.b.prototype.changeTilt=ggP2VR.b.prototype.xg;ggP2VR.b.prototype.changeTiltLog=ggP2VR.b.prototype.Xl;ggP2VR.b.prototype.getFov=ggP2VR.b.prototype.vf;ggP2VR.b.prototype.getFovDest=ggP2VR.b.prototype.pm;ggP2VR.b.prototype.setFov=ggP2VR.b.prototype.Xf;ggP2VR.b.prototype.changeFov=ggP2VR.b.prototype.qj;ggP2VR.b.prototype.changeFovLog=ggP2VR.b.prototype.lf;ggP2VR.b.prototype.getRoll=ggP2VR.b.prototype.Lm;
ggP2VR.b.prototype.setRoll=ggP2VR.b.prototype.Rn;ggP2VR.b.prototype.setPanTilt=ggP2VR.b.prototype.Pn;ggP2VR.b.prototype.setPanTiltFov=ggP2VR.b.prototype.ag;ggP2VR.b.prototype.setDefaultView=ggP2VR.b.prototype.Jn;ggP2VR.b.prototype.setLocked=ggP2VR.b.prototype.Nn;ggP2VR.b.prototype.setLockedMouse=ggP2VR.b.prototype.Zf;ggP2VR.b.prototype.setLockedKeyboard=ggP2VR.b.prototype.Yf;ggP2VR.b.prototype.setLockedWheel=ggP2VR.b.prototype.$f;ggP2VR.b.prototype.moveTo=ggP2VR.b.prototype.moveTo;
ggP2VR.b.prototype.moveToEx=ggP2VR.b.prototype.Zg;ggP2VR.b.prototype.moveToDefaultView=ggP2VR.b.prototype.dn;ggP2VR.b.prototype.moveToDefaultViewEx=ggP2VR.b.prototype.en;ggP2VR.b.prototype.addHotspotElements=ggP2VR.b.prototype.kj;ggP2VR.b.prototype.playSound=ggP2VR.b.prototype.ke;ggP2VR.b.prototype.playPauseSound=ggP2VR.b.prototype.Fk;ggP2VR.b.prototype.playStopSound=ggP2VR.b.prototype.yn;ggP2VR.b.prototype.pauseSound=ggP2VR.b.prototype.Fi;ggP2VR.b.prototype.activateSound=ggP2VR.b.prototype.Kl;
ggP2VR.b.prototype.soundGetTime=ggP2VR.b.prototype.io;ggP2VR.b.prototype.soundSetTime=ggP2VR.b.prototype.jo;ggP2VR.b.prototype.isPlaying=ggP2VR.b.prototype.Cc;ggP2VR.b.prototype.stopSound=ggP2VR.b.prototype.Wi;ggP2VR.b.prototype.setVolume=ggP2VR.b.prototype.bo;ggP2VR.b.prototype.changeVolume=ggP2VR.b.prototype.$l;ggP2VR.b.prototype.removeHotspots=ggP2VR.b.prototype.Nk;ggP2VR.b.prototype.addHotspot=ggP2VR.b.prototype.Ll;ggP2VR.b.prototype.updateHotspot=ggP2VR.b.prototype.Co;
ggP2VR.b.prototype.removeHotspot=ggP2VR.b.prototype.Bn;ggP2VR.b.prototype.setActiveHotspot=ggP2VR.b.prototype.Ve;ggP2VR.b.prototype.getPointHotspotIds=ggP2VR.b.prototype.Gm;ggP2VR.b.prototype.getHotspot=ggP2VR.b.prototype.rm;ggP2VR.b.prototype.setFullscreen=ggP2VR.b.prototype.We;ggP2VR.b.prototype.toggleFullscreen=ggP2VR.b.prototype.uh;ggP2VR.b.prototype.enterFullscreen=ggP2VR.b.prototype.hm;ggP2VR.b.prototype.exitFullscreen=ggP2VR.b.prototype.exitFullscreen;ggP2VR.b.prototype.getIsFullscreen=ggP2VR.b.prototype.tm;
ggP2VR.b.prototype.startAutorotate=ggP2VR.b.prototype.bl;ggP2VR.b.prototype.stopAutorotate=ggP2VR.b.prototype.po;ggP2VR.b.prototype.toggleAutorotate=ggP2VR.b.prototype.to;ggP2VR.b.prototype.startAnimation=ggP2VR.b.prototype.mo;ggP2VR.b.prototype.createLayers=ggP2VR.b.prototype.uj;ggP2VR.b.prototype.removePanorama=ggP2VR.b.prototype.ih;ggP2VR.b.prototype.getScreenResolution=ggP2VR.b.prototype.Rj;ggP2VR.b.prototype.getMaxScreenResolution=ggP2VR.b.prototype.Nj;ggP2VR.b.prototype.getNodeIds=ggP2VR.b.prototype.Am;
ggP2VR.b.prototype.getNodeUserdata=ggP2VR.b.prototype.fi;ggP2VR.b.prototype.getNodeLatLng=ggP2VR.b.prototype.Bm;ggP2VR.b.prototype.getNodeTitle=ggP2VR.b.prototype.Cm;ggP2VR.b.prototype.getCurrentNode=ggP2VR.b.prototype.Mj;ggP2VR.b.prototype.getNextNode=ggP2VR.b.prototype.Oj;ggP2VR.b.prototype.getPrevNode=ggP2VR.b.prototype.Jm;ggP2VR.b.prototype.getLastVisitedNode=ggP2VR.b.prototype.xm;ggP2VR.b.prototype.getCurrentPointHotspots=ggP2VR.b.prototype.om;ggP2VR.b.prototype.getPositionAngles=ggP2VR.b.prototype.Im;
ggP2VR.b.prototype.getPositionRawAngles=ggP2VR.b.prototype.Pj;ggP2VR.b.prototype.nodeVisited=ggP2VR.b.prototype.jn;ggP2VR.b.prototype.setElementIdPrefix=ggP2VR.b.prototype.Kn;ggP2VR.b.prototype.videoPanoPlay=ggP2VR.b.prototype.Lo;ggP2VR.b.prototype.videoPanoStop=ggP2VR.b.prototype.Mo;ggP2VR.b.prototype.videoPanoPause=ggP2VR.b.prototype.Ko;ggP2VR.b.prototype.getVideoPanoTime=ggP2VR.b.prototype.Om;ggP2VR.b.prototype.setVideoPanoTime=ggP2VR.b.prototype.ao;ggP2VR.b.prototype.getVideoPanoObject=ggP2VR.b.prototype.Nm;
ggP2VR.b.prototype.setVideoPanoSource=ggP2VR.b.prototype.$n;ggP2VR.b.prototype.getMediaObject=ggP2VR.b.prototype.ym;ggP2VR.b.prototype.registerVideoElement=ggP2VR.b.prototype.Jk;ggP2VR.b.prototype.disableSoundLoading=ggP2VR.b.prototype.gm;ggP2VR.b.prototype.setCrossOrigin=ggP2VR.b.prototype.In;ggP2VR.b.prototype.setProjection=ggP2VR.b.prototype.Zc;ggP2VR.b.prototype.getProjection=ggP2VR.b.prototype.za;ggP2VR.b.prototype.changeProjection=ggP2VR.b.prototype.Nh;
ggP2VR.b.prototype.changeProjectionEx=ggP2VR.b.prototype.Nh;ggP2VR.b.prototype.changeLensflares=ggP2VR.b.prototype.Ul;ggP2VR.b.prototype.setTransition=ggP2VR.b.prototype.Zn;
